{"version":3,"file":"threebird-loader-3d-tiles.esm.min.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/library-utils/library-utils.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterator-utils/async-iteration.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","../node_modules/@probe.gl/stats/dist/esm/lib/stat.js","../node_modules/@probe.gl/stats/dist/esm/lib/stats.js","../node_modules/@loaders.gl/loader-utils/dist/esm/lib/request-utils/request-scheduler.js","../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","../node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","../node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","../node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-error-message.js","../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","../node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","../node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/blob-iterator.js","../node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","../node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/array-buffer-iterator.js","../node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/stream-iterator.js","../node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/make-iterator.js","../node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/string-iterator.js","../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","../node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/context-utils.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","../node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@math.gl/core/dist/esm/lib/assert.js","../node_modules/@math.gl/core/dist/esm/lib/common.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","../node_modules/@math.gl/core/dist/esm/lib/validators.js","../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","../node_modules/gl-matrix/esm/vec2.js","../node_modules/gl-matrix/esm/common.js","../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","../node_modules/@math.gl/core/dist/esm/classes/vector2.js","../node_modules/gl-matrix/esm/vec3.js","../node_modules/@math.gl/core/dist/esm/classes/vector3.js","../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","../node_modules/gl-matrix/esm/mat3.js","../node_modules/@math.gl/core/dist/esm/classes/matrix3.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/gl-matrix/esm/mat4.js","../node_modules/gl-matrix/esm/vec4.js","../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","../node_modules/gl-matrix/esm/quat.js","../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","../node_modules/@math.gl/core/dist/esm/lib/math-utils.js","../node_modules/@math.gl/geospatial/dist/esm/type-utils.js","../node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/scale-to-geodetic-surface.js","../node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/ellipsoid-transform.js","../node_modules/@math.gl/geospatial/dist/esm/ellipsoid/ellipsoid.js","../node_modules/@math.gl/geospatial/dist/esm/constants.js","../node_modules/@loaders.gl/tiles/dist/esm/utils/doubly-linked-list-node.js","../node_modules/@loaders.gl/tiles/dist/esm/utils/doubly-linked-list.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/tileset-cache.js","../node_modules/@math.gl/culling/dist/esm/constants.js","../node_modules/@math.gl/culling/dist/esm/lib/axis-aligned-bounding-box.js","../node_modules/@math.gl/culling/dist/esm/lib/bounding-sphere.js","../node_modules/@math.gl/culling/dist/esm/lib/oriented-bounding-box.js","../node_modules/@math.gl/culling/dist/esm/lib/plane.js","../node_modules/@math.gl/culling/dist/esm/lib/culling-volume.js","../node_modules/@math.gl/culling/dist/esm/lib/perspective-off-center-frustum.js","../node_modules/@math.gl/culling/dist/esm/lib/perspective-frustum.js","../node_modules/@math.gl/culling/dist/esm/algorithms/bounding-sphere-from-points.js","../node_modules/@math.gl/culling/dist/esm/algorithms/compute-eigen-decomposition.js","../node_modules/@math.gl/culling/dist/esm/algorithms/bounding-box-from-points.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/frame-state.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/zoom.js","../node_modules/@loaders.gl/tiles/dist/esm/constants.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/bounding-volume.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/tiles-3d-lod.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/i3s-lod.js","../node_modules/@loaders.gl/tiles/dist/esm/utils/managed-array.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/tileset-traverser.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/tile-3d.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/3d-tiles-options.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/tileset-3d-traverser.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/i3s-tile-manager.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/i3s-tileset-traverser.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/tileset-3d.js","../node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/transform-utils.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/utils/version.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/constants.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-utils.js","../node_modules/@loaders.gl/schema/dist/esm/lib/schema/classes/schema.js","../node_modules/@loaders.gl/schema/dist/esm/lib/utils/assert.js","../node_modules/@loaders.gl/schema/dist/esm/lib/schema/classes/field.js","../node_modules/@loaders.gl/schema/dist/esm/lib/schema/classes/enum.js","../node_modules/@loaders.gl/schema/dist/esm/lib/schema/classes/type.js","../node_modules/@loaders.gl/draco/dist/esm/lib/utils/schema-attribute-utils.js","../node_modules/@loaders.gl/schema/dist/esm/lib/utils/type-utils.js","../node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","../node_modules/@loaders.gl/loader-utils/dist/esm/categories/mesh/mesh-utils.js","../node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","../node_modules/@loaders.gl/draco/dist/esm/lib/utils/version.js","../node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","../node_modules/@loaders.gl/math/dist/esm/geometry/constants.js","../node_modules/@loaders.gl/math/dist/esm/geometry/gl/gl-type.js","../node_modules/@loaders.gl/math/dist/esm/geometry/colors/rgb565.js","../node_modules/@loaders.gl/math/dist/esm/geometry/compression/attribute-compression.js","../node_modules/@loaders.gl/math/dist/esm/geometry/utils/assert.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-feature-table.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/helpers/tile-3d-accessor-utils.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-batch-table-hierarchy.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-batch-table.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-header.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-tables.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-colors.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-normals.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-positions.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-point-cloud.js","../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","../node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","../node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","../node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","../node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","../node_modules/@loaders.gl/images/dist/esm/image-loader.js","../node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/api/gltf-scenegraph.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-constants.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_techniques_webgl.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/api/normalize-gltf-v1.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_binary_gltf.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/api/post-process-gltf.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/parsers/parse-glb.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/parsers/parse-gltf.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/version.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-gltf-view.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-batched-model.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-instanced-model.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-composite.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-header.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/tiles-3d-loader.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/lib/ion/ion.js","../node_modules/@loaders.gl/3d-tiles/dist/esm/cesium-ion-loader.js","../src/util.ts","../src/RDGLTFLoader.js","../src/gradients.ts","../src/shaders.ts","../src/types.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", void 0);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", void 0);\n\n    _defineProperty(this, \"_reject\", void 0);\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n\n    this._resolve = () => {};\n\n    this._reject = () => {};\n\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}\");\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += \"worker \".concat(this.name, \". \");\n\n    if (event.message) {\n      message += \"\".concat(event.message, \" in \");\n    }\n\n    if (event.lineno) {\n      message += \":\".concat(event.lineno, \":\").concat(event.colno);\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { global, isBrowser, isWorker } from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst LATEST = 'beta';\nconst VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : LATEST;\nconst loadLibraryPromises = {};\nexport async function loadLibrary(libraryUrl, moduleName = null, options = {}) {\n  if (moduleName) {\n    libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n  }\n\n  loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n  return await loadLibraryPromises[libraryUrl];\n}\nexport function getLibraryUrl(library, moduleName, options) {\n  if (library.startsWith('http')) {\n    return library;\n  }\n\n  const modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (!isBrowser) {\n    return \"modules/\".concat(moduleName, \"/dist/libs/\").concat(library);\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nasync function loadLibraryFromFile(libraryUrl) {\n  if (libraryUrl.endsWith('wasm')) {\n    const response = await fetch(libraryUrl);\n    return await response.arrayBuffer();\n  }\n\n  if (!isBrowser) {\n    return node.requireFromFile && (await node.requireFromFile(libraryUrl));\n  }\n\n  if (isWorker) {\n    return importScripts(libraryUrl);\n  }\n\n  const response = await fetch(libraryUrl);\n  const scriptSource = await response.text();\n  return loadLibraryFromString(scriptSource, libraryUrl);\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  const script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}\n//# sourceMappingURL=library-utils.js.map","import { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(\"parse-with-worker unknown message \".concat(type));\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'beta';\nconst VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? \" (worker-utils@\".concat(VERSION, \")\") : '';\n  return \"\".concat(worker.name, \"@\").concat(worker.version).concat(warning);\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = \"\".concat(worker.id, \"-worker.js\");\n  let url = workerOptions.workerUrl;\n\n  if (options._workerType === 'test') {\n    url = \"modules/\".concat(worker.module, \"/dist/\").concat(workerFile);\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? \"@\".concat(version) : '';\n    url = \"https://unpkg.com/@loaders.gl/\".concat(worker.module).concat(versionTag, \"/dist/\").concat(workerFile);\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","export function getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=get-first-characters.js.map","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}\n//# sourceMappingURL=parse-json.js.map","import * as node from '../node/buffer-utils.node';\nexport function toArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    data = node.toArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import { assert } from '../env-utils/assert';\nexport function padToNBytes(byteLength, padding) {\n  assert(byteLength >= 0);\n  assert(padding > 0);\n  return byteLength + (padding - 1) & ~(padding - 1);\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset, byteLength = sourceBuffer.byteLength) {\n  const targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  const sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  let sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    const srcByteOffset = source.byteOffset;\n    const srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer || source.arrayBuffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padToNBytes(sourceArray.byteLength, 4);\n}\n//# sourceMappingURL=memory-copy-utils.js.map","export function dirname(url) {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}\nexport function join(...parts) {\n  const separator = '/';\n  parts = parts.map((part, index) => {\n    if (index) {\n      part = part.replace(new RegExp(\"^\".concat(separator)), '');\n    }\n\n    if (index !== parts.length - 1) {\n      part = part.replace(new RegExp(\"\".concat(separator, \"$\")), '');\n    }\n\n    return part;\n  });\n  return parts.join(separator);\n}\n//# sourceMappingURL=path.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function getHiResTimestamp() {\n  var timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\n\nvar Stat = function () {\n  function Stat(name, type) {\n    _classCallCheck(this, Stat);\n\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  _createClass(Stat, [{\n    key: \"setSampleSize\",\n    value: function setSampleSize(samples) {\n      this.sampleSize = samples;\n      return this;\n    }\n  }, {\n    key: \"incrementCount\",\n    value: function incrementCount() {\n      this.addCount(1);\n      return this;\n    }\n  }, {\n    key: \"decrementCount\",\n    value: function decrementCount() {\n      this.subtractCount(1);\n      return this;\n    }\n  }, {\n    key: \"addCount\",\n    value: function addCount(value) {\n      this._count += value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"subtractCount\",\n    value: function subtractCount(value) {\n      this._count -= value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"addTime\",\n    value: function addTime(time) {\n      this._time += time;\n      this.lastTiming = time;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"timeStart\",\n    value: function timeStart() {\n      this._startTime = getHiResTimestamp();\n      this._timerPending = true;\n      return this;\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd() {\n      if (!this._timerPending) {\n        return this;\n      }\n\n      this.addTime(getHiResTimestamp() - this._startTime);\n      this._timerPending = false;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"getSampleAverageCount\",\n    value: function getSampleAverageCount() {\n      return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleAverageTime\",\n    value: function getSampleAverageTime() {\n      return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleHz\",\n    value: function getSampleHz() {\n      return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n    }\n  }, {\n    key: \"getAverageCount\",\n    value: function getAverageCount() {\n      return this.samples > 0 ? this.count / this.samples : 0;\n    }\n  }, {\n    key: \"getAverageTime\",\n    value: function getAverageTime() {\n      return this.samples > 0 ? this.time / this.samples : 0;\n    }\n  }, {\n    key: \"getHz\",\n    value: function getHz() {\n      return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.time = 0;\n      this.count = 0;\n      this.samples = 0;\n      this.lastTiming = 0;\n      this.lastSampleTime = 0;\n      this.lastSampleCount = 0;\n      this._count = 0;\n      this._time = 0;\n      this._samples = 0;\n      this._startTime = 0;\n      this._timerPending = false;\n      return this;\n    }\n  }, {\n    key: \"_checkSampling\",\n    value: function _checkSampling() {\n      if (this._samples === this.sampleSize) {\n        this.lastSampleTime = this._time;\n        this.lastSampleCount = this._count;\n        this.count += this._count;\n        this.time += this._time;\n        this.samples += this._samples;\n        this._time = 0;\n        this._count = 0;\n        this._samples = 0;\n      }\n    }\n  }]);\n\n  return Stat;\n}();\n\nexport { Stat as default };\n//# sourceMappingURL=stat.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Stat from './stat';\n\nvar Stats = function () {\n  function Stats(_ref) {\n    var id = _ref.id,\n        stats = _ref.stats;\n\n    _classCallCheck(this, Stats);\n\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  _createClass(Stats, [{\n    key: \"get\",\n    value: function get(name) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n      return this._getOrCreate({\n        name: name,\n        type: type\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      for (var key in this.stats) {\n        this.stats[key].reset();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      for (var key in this.stats) {\n        fn(this.stats[key]);\n      }\n    }\n  }, {\n    key: \"getTable\",\n    value: function getTable() {\n      var table = {};\n      this.forEach(function (stat) {\n        table[stat.name] = {\n          time: stat.time || 0,\n          count: stat.count || 0,\n          average: stat.getAverageTime() || 0,\n          hz: stat.getHz() || 0\n        };\n      });\n      return table;\n    }\n  }, {\n    key: \"_initializeStats\",\n    value: function _initializeStats() {\n      var _this = this;\n\n      var stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      stats.forEach(function (stat) {\n        return _this._getOrCreate(stat);\n      });\n    }\n  }, {\n    key: \"_getOrCreate\",\n    value: function _getOrCreate(stat) {\n      if (!stat || !stat.name) {\n        return null;\n      }\n\n      var name = stat.name,\n          type = stat.type;\n\n      if (!this.stats[name]) {\n        if (stat instanceof Stat) {\n          this.stats[name] = stat;\n        } else {\n          this.stats[name] = new Stat(name, type);\n        }\n      }\n\n      return this.stats[name];\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return Object.keys(this.stats).length;\n    }\n  }]);\n\n  return Stats;\n}();\n\nexport { Stats as default };\n//# sourceMappingURL=stats.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Stats } from '@probe.gl/stats';\nconst STAT_QUEUED_REQUESTS = 'Queued Requests';\nconst STAT_ACTIVE_REQUESTS = 'Active Requests';\nconst STAT_CANCELLED_REQUESTS = 'Cancelled Requests';\nconst STAT_QUEUED_REQUESTS_EVER = 'Queued Requests Ever';\nconst STAT_ACTIVE_REQUESTS_EVER = 'Active Requests Ever';\nconst DEFAULT_PROPS = {\n  id: 'request-scheduler',\n  throttleRequests: true,\n  maxRequests: 6\n};\nexport default class RequestScheduler {\n  constructor(props = {}) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"activeRequestCount\", void 0);\n\n    _defineProperty(this, \"requestQueue\", void 0);\n\n    _defineProperty(this, \"requestMap\", void 0);\n\n    _defineProperty(this, \"_deferredUpdate\", void 0);\n\n    this.props = { ...DEFAULT_PROPS,\n      ...props\n    };\n    this.requestQueue = [];\n    this.activeRequestCount = 0;\n    this.requestMap = new Map();\n    this.stats = new Stats({\n      id: props.id\n    });\n    this.stats.get(STAT_QUEUED_REQUESTS);\n    this.stats.get(STAT_ACTIVE_REQUESTS);\n    this.stats.get(STAT_CANCELLED_REQUESTS);\n    this.stats.get(STAT_QUEUED_REQUESTS_EVER);\n    this.stats.get(STAT_ACTIVE_REQUESTS_EVER);\n    this._deferredUpdate = null;\n  }\n\n  scheduleRequest(handle, getPriority = () => 0) {\n    if (!this.props.throttleRequests) {\n      return Promise.resolve({\n        done: () => {}\n      });\n    }\n\n    if (this.requestMap.has(handle)) {\n      return this.requestMap.get(handle);\n    }\n\n    const request = {\n      handle,\n      priority: 0,\n      getPriority\n    };\n    const promise = new Promise(resolve => {\n      request.resolve = resolve;\n      return request;\n    });\n    this.requestQueue.push(request);\n    this.requestMap.set(handle, promise);\n\n    this._issueNewRequests();\n\n    return promise;\n  }\n\n  _issueRequest(request) {\n    const {\n      handle,\n      resolve\n    } = request;\n    let isDone = false;\n\n    const done = () => {\n      if (!isDone) {\n        isDone = true;\n        this.requestMap.delete(handle);\n        this.activeRequestCount--;\n\n        this._issueNewRequests();\n      }\n    };\n\n    this.activeRequestCount++;\n    return resolve ? resolve({\n      done\n    }) : Promise.resolve({\n      done\n    });\n  }\n\n  _issueNewRequests() {\n    if (!this._deferredUpdate) {\n      this._deferredUpdate = setTimeout(() => this._issueNewRequestsAsync(), 0);\n    }\n  }\n\n  _issueNewRequestsAsync() {\n    this._deferredUpdate = null;\n    const freeSlots = Math.max(this.props.maxRequests - this.activeRequestCount, 0);\n\n    if (freeSlots === 0) {\n      return;\n    }\n\n    this._updateAllRequests();\n\n    for (let i = 0; i < freeSlots; ++i) {\n      if (this.requestQueue.length > 0) {\n        const request = this.requestQueue.shift();\n\n        this._issueRequest(request);\n      }\n    }\n  }\n\n  _updateAllRequests() {\n    const requestQueue = this.requestQueue;\n\n    for (let i = 0; i < requestQueue.length; ++i) {\n      const request = requestQueue[i];\n\n      if (!this._updateRequest(request)) {\n        requestQueue.splice(i, 1);\n        this.requestMap.delete(request.handle);\n        i--;\n      }\n    }\n\n    requestQueue.sort((a, b) => a.priority - b.priority);\n  }\n\n  _updateRequest(request) {\n    request.priority = request.getPriority(request.handle);\n\n    if (request.priority < 0) {\n      request.resolve(null);\n      return false;\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=request-scheduler.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = \"\".concat(response.status, \" \").concat(response.statusText);\n    message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += \" \".concat(await response.text());\n    }\n\n    message += text;\n    message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return \"data:,\".concat(resource.slice(0, INITIAL_DATA_LENGTH));\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return \"data:base64,\".concat(base64);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nimport { getErrorMessageFromResponse } from './fetch-error-message';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    const response = await fetch(url, fetchOptions);\n\n    if (!response.ok && options !== null && options !== void 0 && options.throws) {\n      throw new Error(await getErrorMessageFromResponse(response));\n    }\n\n    return response;\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","export function getErrorMessageFromResponseSync(response) {\n  return \"Failed to fetch resource \".concat(response.url, \"(\").concat(response.status, \"): \").concat(response.statusText, \" \");\n}\nexport async function getErrorMessageFromResponse(response) {\n  let message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n\n  try {\n    const contentType = response.headers.get('Content-Type') || '';\n\n    if (contentType.includes('application/json')) {\n      message += await response.text();\n    } else {\n      message += response.statusText;\n    }\n  } catch (error) {\n    return message;\n  }\n\n  return message;\n}\n//# sourceMappingURL=fetch-error-message.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport class NullLog {\n  log() {\n    return _ => {};\n  }\n\n  info() {\n    return _ => {};\n  }\n\n  warn() {\n    return _ => {};\n  }\n\n  error() {\n    return _ => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { NullLog, ConsoleLog } from './loggers';\nconst DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  _workerType: '',\n  batchSize: 'auto',\n  metadata: false,\n  transforms: [],\n  attributeName: null,\n  attributeType: null\n};\nconst REMOVED_LOADER_OPTIONS = {\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\nexport function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  const {\n    loaders\n  } = global;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context && context.fetch) {\n    return context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders, log = console) {\n  validateOptionsObject(options, null, log, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.defaultOptions && loader.defaultOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, log, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, log, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? \"\".concat(id, \".\") : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n\n    if (!(key in defaultOptions) && !(key === 'baseUri' && !id)) {\n      if (key in deprecatedOptions) {\n        log.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' no longer supported, use '\").concat(deprecatedOptions[key], \"'\"));\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        log.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' not recognized. \").concat(suggestion));\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await readFileSlice(blob, offset, end);\n    offset = end;\n    yield chunk;\n  }\n}\nexport async function readFileSlice(file, offset, end) {\n  return await new Promise((resolve, reject) => {\n    const slice = file.slice(offset, end);\n    const fileReader = new FileReader();\n\n    fileReader.onload = event => {\n      var _event$target;\n\n      return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n    };\n\n    fileReader.onerror = error => reject(error);\n\n    fileReader.readAsArrayBuffer(slice);\n  });\n}\n//# sourceMappingURL=blob-iterator.js.map","import { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { readFileSlice } from '../../iterator-utils/make-iterator/blob-iterator';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await readFileSlice(data, 0, 10);\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  loaders = [...(loaders || []), ...getRegisteredLoaders()];\n  normalizeLoaders(loaders);\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = findLoaderByUrl(loaders, testUrl);\n  loader = loader || findLoaderByContentType(loaders, type);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found';\n\n  if (data) {\n    message += \" data: \\\"\".concat(getFirstCharacters(data), \"\\\", contentType: \\\"\").concat(type, \"\\\"\");\n  }\n\n  if (url) {\n    message += \" url: \".concat(url);\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === \"application/x.\".concat(loader.id)) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=array-buffer-iterator.js.map","import { isBrowser, nodeVersion, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return makeToArrayBufferIterator(stream);\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nasync function* makeToArrayBufferIterator(asyncIterator) {\n  for await (const chunk of asyncIterator) {\n    yield toArrayBuffer(chunk);\n  }\n}\n\nasync function* makeBrowserStreamIterator(stream) {\n  const reader = stream.getReader();\n\n  try {\n    while (true) {\n      const {\n        done,\n        value\n      } = await reader.read();\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream) {\n  stream = await stream;\n\n  while (true) {\n    const data = stream.read();\n\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      continue;\n    }\n\n    if (stream._readableState.ended) {\n      return;\n    }\n\n    await onceReadable(stream);\n  }\n}\n\nasync function onceReadable(stream) {\n  return new Promise(resolve => {\n    stream.once('readable', resolve);\n  });\n}\n//# sourceMappingURL=stream-iterator.js.map","import { makeStringIterator } from './string-iterator';\nimport { makeArrayBufferIterator } from './array-buffer-iterator';\nimport { makeBlobIterator } from './blob-iterator';\nimport { makeStreamIterator } from './stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=string-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterator-utils/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return makeIterator(response.body);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIteratorFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from '../loader-utils/context-utils';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const candidateLoaders = getLoaders(loaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n  data = await getArrayBufferOrStringFromData(data, loader);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(\"\".concat(loader.id, \" loader - no parser found and worker is disabled\"));\n}\n//# sourceMappingURL=parse.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=context-utils.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","export const VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : 'latest';\n\nif (typeof \"3.0.0-beta.5\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  var _super = _createSuper(MathArray);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate()) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };\n//# sourceMappingURL=math-array.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length) {\n  var callerName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  var _super = _createSuper(Vector);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Vector, [{\n    key: \"copy\",\n    value: function copy(vector) {\n      assert(false);\n      return this;\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };\n//# sourceMappingURL=vector.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { vec2_transformMat4AsVector } from '../lib/gl-matrix-extras';\n\nvar Vector2 = function (_Vector) {\n  _inherits(Vector2, _Vector);\n\n  var _super = _createSuper(Vector2);\n\n  function Vector2() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Vector2);\n\n    _this = _super.call(this, 2);\n\n    if (isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector2, [{\n    key: \"set\",\n    value: function set(x, y) {\n      this[0] = x;\n      this[1] = y;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      return object;\n    }\n  }, {\n    key: \"horizontalAngle\",\n    value: function horizontalAngle() {\n      return Math.atan2(this.y, this.x);\n    }\n  }, {\n    key: \"verticalAngle\",\n    value: function verticalAngle() {\n      return Math.atan2(this.x, this.y);\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec2.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec2_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec2.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2x3\",\n    value: function transformByMatrix2x3(matrix2x3) {\n      vec2.transformMat2d(this, this, matrix2x3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec2.transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 2;\n    }\n  }]);\n\n  return Vector2;\n}(Vector);\n\nexport { Vector2 as default };\n//# sourceMappingURL=vector2.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\nvar constants = {};\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  var _super = _createSuper(Vector3);\n\n  _createClass(Vector3, null, [{\n    key: \"ZERO\",\n    get: function get() {\n      return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n    }\n  }]);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _super.call(this, -0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };\n//# sourceMappingURL=vector3.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  var _super = _createSuper(Matrix);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };\n//# sourceMappingURL=matrix.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Matrix from './base/matrix';\nimport { checkVector, deprecated } from '../lib/validators';\nimport { vec4_transformMat3 } from '../lib/gl-matrix-extras';\nimport * as mat3 from 'gl-matrix/mat3';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 1, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL1ROW0: 3,\n  COL1ROW1: 4,\n  COL1ROW2: 5,\n  COL2ROW0: 6,\n  COL2ROW1: 7,\n  COL2ROW2: 8\n});\nvar constants = {};\n\nvar Matrix3 = function (_Matrix) {\n  _inherits(Matrix3, _Matrix);\n\n  var _super = _createSuper(Matrix3);\n\n  _createClass(Matrix3, [{\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 9;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix3(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix3(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix3(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix3);\n\n    _this = _super.call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix3, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m01, m11, m21, m02, m12, m22) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m01;\n      this[4] = m11;\n      this[5] = m21;\n      this[6] = m02;\n      this[7] = m12;\n      this[8] = m22;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m01;\n      this[4] = m11;\n      this[5] = m21;\n      this[6] = m02;\n      this[7] = m12;\n      this[8] = m22;\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat3.determinant(this);\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat3.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat3.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat3.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat3.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat3.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(radians) {\n      mat3.rotate(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat3.scale(this, this, factor);\n      } else {\n        mat3.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat3.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2.transformMat3(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat3(result || [-0, -0, -0], vector, this);\n          break;\n\n        case 4:\n          result = vec4_transformMat3(result || [-0, -0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix3.transformVector');\n      return this.transform(vector, result);\n    }\n  }, {\n    key: \"transformVector2\",\n    value: function transformVector2(vector, result) {\n      deprecated('Matrix3.transformVector');\n      return this.transform(vector, result);\n    }\n  }, {\n    key: \"transformVector3\",\n    value: function transformVector3(vector, result) {\n      deprecated('Matrix3.transformVector');\n      return this.transform(vector, result);\n    }\n  }]);\n\n  return Matrix3;\n}(Matrix);\n\nexport { Matrix3 as default };\n//# sourceMappingURL=matrix3.js.map","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  var _super = _createSuper(Matrix4);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _super.call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$fovy = _ref4.fovy,\n          fovy = _ref4$fovy === void 0 ? undefined : _ref4$fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };\n//# sourceMappingURL=matrix4.js.map","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyVec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {ReadonlyQuat} a     Origin unit quaternion\r\n * @param  {ReadonlyQuat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random unit quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyMat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {ReadonlyQuat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {ReadonlyQuat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat} a The first quaternion.\r\n * @param {ReadonlyQuat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat} a The first vector.\r\n * @param {ReadonlyQuat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {ReadonlyVec3} a the initial vector\r\n * @param {ReadonlyVec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {ReadonlyQuat} c the third operand\r\n * @param {ReadonlyQuat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\r\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\r\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  var _super = _createSuper(Quaternion);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _super.call(this, -0, -0, -0, -0);\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };\n//# sourceMappingURL=quaternion.js.map","export default {\n  EPSILON1: 1e-1,\n  EPSILON2: 1e-2,\n  EPSILON3: 1e-3,\n  EPSILON4: 1e-4,\n  EPSILON5: 1e-5,\n  EPSILON6: 1e-6,\n  EPSILON7: 1e-7,\n  EPSILON8: 1e-8,\n  EPSILON9: 1e-9,\n  EPSILON10: 1e-10,\n  EPSILON11: 1e-11,\n  EPSILON12: 1e-12,\n  EPSILON13: 1e-13,\n  EPSILON14: 1e-14,\n  EPSILON15: 1e-15,\n  EPSILON16: 1e-16,\n  EPSILON17: 1e-17,\n  EPSILON18: 1e-18,\n  EPSILON19: 1e-19,\n  EPSILON20: 1e-20,\n  PI_OVER_TWO: Math.PI / 2,\n  PI_OVER_FOUR: Math.PI / 4,\n  PI_OVER_SIX: Math.PI / 6,\n  TWO_PI: Math.PI * 2\n};\n//# sourceMappingURL=math-utils.js.map","import { Vector3, isArray, toRadians, toDegrees, config } from '@math.gl/core';\nimport { WGS84_CONSTANTS } from './constants';\n\nvar noop = function noop(x) {\n  return x;\n};\n\nvar scratchVector = new Vector3();\nexport function fromCartographic(cartographic, result) {\n  var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    result[0] = map(cartographic[0]);\n    result[1] = map(cartographic[1]);\n    result[2] = cartographic[2];\n  } else if ('longitude' in cartographic) {\n    result[0] = map(cartographic.longitude);\n    result[1] = map(cartographic.latitude);\n    result[2] = cartographic.height;\n  } else {\n    result[0] = map(cartographic.x);\n    result[1] = map(cartographic.y);\n    result[2] = cartographic.z;\n  }\n\n  return result;\n}\nexport function fromCartographicToRadians(cartographic) {\n  var vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? noop : toRadians);\n}\nexport function fromCartographicToDegrees(cartographic) {\n  var vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? toDegrees : noop);\n}\nexport function toCartographic(vector, cartographic) {\n  var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    cartographic[0] = map(vector[0]);\n    cartographic[1] = map(vector[1]);\n    cartographic[2] = vector[2];\n  } else if ('longitude' in cartographic) {\n    cartographic.longitude = map(vector[0]);\n    cartographic.latitude = map(vector[1]);\n    cartographic.height = vector[2];\n  } else {\n    cartographic.x = map(vector[0]);\n    cartographic.y = map(vector[1]);\n    cartographic.z = vector[2];\n  }\n\n  return cartographic;\n}\nexport function toCartographicFromRadians(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? noop : toDegrees);\n}\nexport function toCartographicFromDegrees(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? toRadians : noop);\n}\nexport function isWGS84(vector) {\n  if (!vector) {\n    return false;\n  }\n\n  scratchVector.from(vector);\n  var oneOverRadiiSquared = WGS84_CONSTANTS.oneOverRadiiSquared,\n      centerToleranceSquared = WGS84_CONSTANTS.centerToleranceSquared;\n  var x2 = vector[0] * vector[0] * oneOverRadiiSquared[0];\n  var y2 = vector[1] * vector[1] * oneOverRadiiSquared[1];\n  var z2 = vector[2] * vector[2] * oneOverRadiiSquared[2];\n  return Math.abs(x2 + y2 + z2 - 1) < centerToleranceSquared;\n}\n//# sourceMappingURL=type-utils.js.map","import { Vector3, assert, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nvar scratchVector = new Vector3();\nvar scaleToGeodeticSurfaceIntersection = new Vector3();\nvar scaleToGeodeticSurfaceGradient = new Vector3();\nexport default function scaleToGeodeticSurface(cartesian, ellipsoid) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector3();\n  var oneOverRadii = ellipsoid.oneOverRadii,\n      oneOverRadiiSquared = ellipsoid.oneOverRadiiSquared,\n      centerToleranceSquared = ellipsoid.centerToleranceSquared;\n  scratchVector.from(cartesian);\n  var positionX = cartesian.x;\n  var positionY = cartesian.y;\n  var positionZ = cartesian.z;\n  var oneOverRadiiX = oneOverRadii.x;\n  var oneOverRadiiY = oneOverRadii.y;\n  var oneOverRadiiZ = oneOverRadii.z;\n  var x2 = positionX * positionX * oneOverRadiiX * oneOverRadiiX;\n  var y2 = positionY * positionY * oneOverRadiiY * oneOverRadiiY;\n  var z2 = positionZ * positionZ * oneOverRadiiZ * oneOverRadiiZ;\n  var squaredNorm = x2 + y2 + z2;\n  var ratio = Math.sqrt(1.0 / squaredNorm);\n\n  if (!Number.isFinite(ratio)) {\n    return undefined;\n  }\n\n  var intersection = scaleToGeodeticSurfaceIntersection;\n  intersection.copy(cartesian).scale(ratio);\n\n  if (squaredNorm < centerToleranceSquared) {\n    return intersection.to(result);\n  }\n\n  var oneOverRadiiSquaredX = oneOverRadiiSquared.x;\n  var oneOverRadiiSquaredY = oneOverRadiiSquared.y;\n  var oneOverRadiiSquaredZ = oneOverRadiiSquared.z;\n  var gradient = scaleToGeodeticSurfaceGradient;\n  gradient.set(intersection.x * oneOverRadiiSquaredX * 2.0, intersection.y * oneOverRadiiSquaredY * 2.0, intersection.z * oneOverRadiiSquaredZ * 2.0);\n  var lambda = (1.0 - ratio) * cartesian.len() / (0.5 * gradient.len());\n  var correction = 0.0;\n  var xMultiplier;\n  var yMultiplier;\n  var zMultiplier;\n  var func;\n\n  do {\n    lambda -= correction;\n    xMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredX);\n    yMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredY);\n    zMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredZ);\n    var xMultiplier2 = xMultiplier * xMultiplier;\n    var yMultiplier2 = yMultiplier * yMultiplier;\n    var zMultiplier2 = zMultiplier * zMultiplier;\n    var xMultiplier3 = xMultiplier2 * xMultiplier;\n    var yMultiplier3 = yMultiplier2 * yMultiplier;\n    var zMultiplier3 = zMultiplier2 * zMultiplier;\n    func = x2 * xMultiplier2 + y2 * yMultiplier2 + z2 * zMultiplier2 - 1.0;\n    var denominator = x2 * xMultiplier3 * oneOverRadiiSquaredX + y2 * yMultiplier3 * oneOverRadiiSquaredY + z2 * zMultiplier3 * oneOverRadiiSquaredZ;\n    var derivative = -2.0 * denominator;\n    correction = func / derivative;\n  } while (Math.abs(func) > _MathUtils.EPSILON12);\n\n  return scratchVector.scale([xMultiplier, yMultiplier, zMultiplier]).to(result);\n}\n//# sourceMappingURL=scale-to-geodetic-surface.js.map","import { Vector3, assert, equals as equalsEpsilon } from '@math.gl/core';\nvar EPSILON14 = 1e-14;\nvar scratchOrigin = new Vector3();\nvar VECTOR_PRODUCT_LOCAL_FRAME = {\n  up: {\n    south: 'east',\n    north: 'west',\n    west: 'south',\n    east: 'north'\n  },\n  down: {\n    south: 'west',\n    north: 'east',\n    west: 'north',\n    east: 'south'\n  },\n  south: {\n    up: 'west',\n    down: 'east',\n    west: 'down',\n    east: 'up'\n  },\n  north: {\n    up: 'east',\n    down: 'west',\n    west: 'up',\n    east: 'down'\n  },\n  west: {\n    up: 'north',\n    down: 'south',\n    north: 'down',\n    south: 'up'\n  },\n  east: {\n    up: 'south',\n    down: 'north',\n    north: 'up',\n    south: 'down'\n  }\n};\nvar degeneratePositionLocalFrame = {\n  north: [-1, 0, 0],\n  east: [0, 1, 0],\n  up: [0, 0, 1],\n  south: [1, 0, 0],\n  west: [0, -1, 0],\n  down: [0, 0, -1]\n};\nvar scratchAxisVectors = {\n  east: new Vector3(),\n  north: new Vector3(),\n  up: new Vector3(),\n  west: new Vector3(),\n  south: new Vector3(),\n  down: new Vector3()\n};\nvar scratchVector1 = new Vector3();\nvar scratchVector2 = new Vector3();\nvar scratchVector3 = new Vector3();\nexport default function localFrameToFixedFrame(ellipsoid, firstAxis, secondAxis, thirdAxis, cartesianOrigin, result) {\n  var thirdAxisInferred = VECTOR_PRODUCT_LOCAL_FRAME[firstAxis] && VECTOR_PRODUCT_LOCAL_FRAME[firstAxis][secondAxis];\n  assert(thirdAxisInferred && (!thirdAxis || thirdAxis === thirdAxisInferred));\n  var firstAxisVector;\n  var secondAxisVector;\n  var thirdAxisVector;\n  var origin = scratchOrigin.copy(cartesianOrigin);\n  var atPole = equalsEpsilon(origin.x, 0.0, EPSILON14) && equalsEpsilon(origin.y, 0.0, EPSILON14);\n\n  if (atPole) {\n    var sign = Math.sign(origin.z);\n    firstAxisVector = scratchVector1.fromArray(degeneratePositionLocalFrame[firstAxis]);\n\n    if (firstAxis !== 'east' && firstAxis !== 'west') {\n      firstAxisVector.scale(sign);\n    }\n\n    secondAxisVector = scratchVector2.fromArray(degeneratePositionLocalFrame[secondAxis]);\n\n    if (secondAxis !== 'east' && secondAxis !== 'west') {\n      secondAxisVector.scale(sign);\n    }\n\n    thirdAxisVector = scratchVector3.fromArray(degeneratePositionLocalFrame[thirdAxis]);\n\n    if (thirdAxis !== 'east' && thirdAxis !== 'west') {\n      thirdAxisVector.scale(sign);\n    }\n  } else {\n    var up = scratchAxisVectors.up,\n        east = scratchAxisVectors.east,\n        north = scratchAxisVectors.north;\n    east.set(-origin.y, origin.x, 0.0).normalize();\n    ellipsoid.geodeticSurfaceNormal(origin, up);\n    north.copy(up).cross(east);\n    var down = scratchAxisVectors.down,\n        west = scratchAxisVectors.west,\n        south = scratchAxisVectors.south;\n    down.copy(up).scale(-1);\n    west.copy(east).scale(-1);\n    south.copy(north).scale(-1);\n    firstAxisVector = scratchAxisVectors[firstAxis];\n    secondAxisVector = scratchAxisVectors[secondAxis];\n    thirdAxisVector = scratchAxisVectors[thirdAxis];\n  }\n\n  result[0] = firstAxisVector.x;\n  result[1] = firstAxisVector.y;\n  result[2] = firstAxisVector.z;\n  result[3] = 0.0;\n  result[4] = secondAxisVector.x;\n  result[5] = secondAxisVector.y;\n  result[6] = secondAxisVector.z;\n  result[7] = 0.0;\n  result[8] = thirdAxisVector.x;\n  result[9] = thirdAxisVector.y;\n  result[10] = thirdAxisVector.z;\n  result[11] = 0.0;\n  result[12] = origin.x;\n  result[13] = origin.y;\n  result[14] = origin.z;\n  result[15] = 1.0;\n  return result;\n}\n//# sourceMappingURL=ellipsoid-transform.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Matrix4, toRadians, toDegrees, assert, equals, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z } from '../constants';\nimport { fromCartographicToRadians, toCartographicFromRadians } from '../type-utils';\nimport _scaleToGeodeticSurface from './helpers/scale-to-geodetic-surface';\nimport _localFrameToFixedFrame from './helpers/ellipsoid-transform';\nvar scratchVector = new Vector3();\nvar scratchNormal = new Vector3();\nvar scratchK = new Vector3();\nvar scratchPosition = new Vector3();\nvar scratchHeight = new Vector3();\nvar scratchCartesian = new Vector3();\nvar wgs84;\n\nvar Ellipsoid = function () {\n  _createClass(Ellipsoid, null, [{\n    key: \"WGS84\",\n    get: function get() {\n      wgs84 = wgs84 || new Ellipsoid(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z);\n      return wgs84;\n    }\n  }]);\n\n  function Ellipsoid() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.0;\n\n    _classCallCheck(this, Ellipsoid);\n\n    assert(x >= 0.0);\n    assert(y >= 0.0);\n    assert(z >= 0.0);\n    this.radii = new Vector3(x, y, z);\n    this.radiiSquared = new Vector3(x * x, y * y, z * z);\n    this.radiiToTheFourth = new Vector3(x * x * x * x, y * y * y * y, z * z * z * z);\n    this.oneOverRadii = new Vector3(x === 0.0 ? 0.0 : 1.0 / x, y === 0.0 ? 0.0 : 1.0 / y, z === 0.0 ? 0.0 : 1.0 / z);\n    this.oneOverRadiiSquared = new Vector3(x === 0.0 ? 0.0 : 1.0 / (x * x), y === 0.0 ? 0.0 : 1.0 / (y * y), z === 0.0 ? 0.0 : 1.0 / (z * z));\n    this.minimumRadius = Math.min(x, y, z);\n    this.maximumRadius = Math.max(x, y, z);\n    this.centerToleranceSquared = _MathUtils.EPSILON1;\n\n    if (this.radiiSquared.z !== 0) {\n      this.squaredXOverSquaredZ = this.radiiSquared.x / this.radiiSquared.z;\n    }\n\n    Object.freeze(this);\n  }\n\n  _createClass(Ellipsoid, [{\n    key: \"equals\",\n    value: function equals(right) {\n      return this === right || Boolean(right && this.radii.equals(right.radii));\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.radii.toString();\n    }\n  }, {\n    key: \"cartographicToCartesian\",\n    value: function cartographicToCartesian(cartographic) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      var normal = scratchNormal;\n      var k = scratchK;\n\n      var _cartographic = _slicedToArray(cartographic, 3),\n          height = _cartographic[2];\n\n      this.geodeticSurfaceNormalCartographic(cartographic, normal);\n      k.copy(this.radiiSquared).scale(normal);\n      var gamma = Math.sqrt(normal.dot(k));\n      k.scale(1 / gamma);\n      normal.scale(height);\n      k.add(normal);\n      return k.to(result);\n    }\n  }, {\n    key: \"cartesianToCartographic\",\n    value: function cartesianToCartographic(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      scratchCartesian.from(cartesian);\n      var point = this.scaleToGeodeticSurface(scratchCartesian, scratchPosition);\n\n      if (!point) {\n        return undefined;\n      }\n\n      var normal = this.geodeticSurfaceNormal(point, scratchNormal);\n      var h = scratchHeight;\n      h.copy(scratchCartesian).subtract(point);\n      var longitude = Math.atan2(normal.y, normal.x);\n      var latitude = Math.asin(normal.z);\n      var height = Math.sign(vec3.dot(h, scratchCartesian)) * vec3.length(h);\n      return toCartographicFromRadians([longitude, latitude, height], result);\n    }\n  }, {\n    key: \"eastNorthUpToFixedFrame\",\n    value: function eastNorthUpToFixedFrame(origin) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Matrix4();\n      return _localFrameToFixedFrame(this, 'east', 'north', 'up', origin, result);\n    }\n  }, {\n    key: \"localFrameToFixedFrame\",\n    value: function localFrameToFixedFrame(firstAxis, secondAxis, thirdAxis, origin) {\n      var result = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new Matrix4();\n      return _localFrameToFixedFrame(this, firstAxis, secondAxis, thirdAxis, origin, result);\n    }\n  }, {\n    key: \"geocentricSurfaceNormal\",\n    value: function geocentricSurfaceNormal(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchVector.from(cartesian).normalize().to(result);\n    }\n  }, {\n    key: \"geodeticSurfaceNormalCartographic\",\n    value: function geodeticSurfaceNormalCartographic(cartographic) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      var cartographicVectorRadians = fromCartographicToRadians(cartographic);\n      var longitude = cartographicVectorRadians[0];\n      var latitude = cartographicVectorRadians[1];\n      var cosLatitude = Math.cos(latitude);\n      scratchVector.set(cosLatitude * Math.cos(longitude), cosLatitude * Math.sin(longitude), Math.sin(latitude)).normalize();\n      return scratchVector.to(result);\n    }\n  }, {\n    key: \"geodeticSurfaceNormal\",\n    value: function geodeticSurfaceNormal(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchVector.from(cartesian).scale(this.oneOverRadiiSquared).normalize().to(result);\n    }\n  }, {\n    key: \"scaleToGeodeticSurface\",\n    value: function scaleToGeodeticSurface(cartesian, result) {\n      return _scaleToGeodeticSurface(cartesian, this, result);\n    }\n  }, {\n    key: \"scaleToGeocentricSurface\",\n    value: function scaleToGeocentricSurface(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      scratchPosition.from(cartesian);\n      var positionX = scratchPosition.x;\n      var positionY = scratchPosition.y;\n      var positionZ = scratchPosition.z;\n      var oneOverRadiiSquared = this.oneOverRadiiSquared;\n      var beta = 1.0 / Math.sqrt(positionX * positionX * oneOverRadiiSquared.x + positionY * positionY * oneOverRadiiSquared.y + positionZ * positionZ * oneOverRadiiSquared.z);\n      return scratchPosition.multiplyScalar(beta).to(result);\n    }\n  }, {\n    key: \"transformPositionToScaledSpace\",\n    value: function transformPositionToScaledSpace(position) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchPosition.from(position).scale(this.oneOverRadii).to(result);\n    }\n  }, {\n    key: \"transformPositionFromScaledSpace\",\n    value: function transformPositionFromScaledSpace(position) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchPosition.from(position).scale(this.radii).to(result);\n    }\n  }, {\n    key: \"getSurfaceNormalIntersectionWithZAxis\",\n    value: function getSurfaceNormalIntersectionWithZAxis(position) {\n      var buffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n      var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 0];\n      assert(equals(this.radii.x, this.radii.y, _MathUtils.EPSILON15));\n      assert(this.radii.z > 0);\n      scratchPosition.from(position);\n      var z = scratchPosition.z * (1 - this.squaredXOverSquaredZ);\n\n      if (Math.abs(z) >= this.radii.z - buffer) {\n        return undefined;\n      }\n\n      return scratchPosition.set(0.0, 0.0, z).to(result);\n    }\n  }]);\n\n  return Ellipsoid;\n}();\n\nexport { Ellipsoid as default };\n//# sourceMappingURL=ellipsoid.js.map","export var WGS84_RADIUS_X = 6378137.0;\nexport var WGS84_RADIUS_Y = 6378137.0;\nexport var WGS84_RADIUS_Z = 6356752.3142451793;\nexport var WGS84_CONSTANTS = {\n  radii: [WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z],\n  radiiSquared: [WGS84_RADIUS_X * WGS84_RADIUS_X, WGS84_RADIUS_Y * WGS84_RADIUS_Y, WGS84_RADIUS_Z * WGS84_RADIUS_Z],\n  oneOverRadii: [1.0 / WGS84_RADIUS_X, 1.0 / WGS84_RADIUS_Y, 1.0 / WGS84_RADIUS_Z],\n  oneOverRadiiSquared: [1.0 / (WGS84_RADIUS_X * WGS84_RADIUS_X), 1.0 / (WGS84_RADIUS_Y * WGS84_RADIUS_Y), 1.0 / (WGS84_RADIUS_Z * WGS84_RADIUS_Z)],\n  maximumRadius: Math.max(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z),\n  centerToleranceSquared: 1e-1\n};\n//# sourceMappingURL=constants.js.map","export default class DoublyLinkedListNode {\n  constructor(item, previous, next) {\n    this.item = item;\n    this.previous = previous;\n    this.next = next;\n  }\n\n}\n//# sourceMappingURL=doubly-linked-list-node.js.map","import DoublyLinkedListNode from '../utils/doubly-linked-list-node';\nexport default class DoublyLinkedList {\n  constructor() {\n    this.head = null;\n    this.tail = null;\n    this._length = 0;\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  add(item) {\n    const node = new DoublyLinkedListNode(item, this.tail, null);\n\n    if (this.tail) {\n      this.tail.next = node;\n      this.tail = node;\n    } else {\n      this.head = node;\n      this.tail = node;\n    }\n\n    ++this._length;\n    return node;\n  }\n\n  remove(node) {\n    if (!node) {\n      return;\n    }\n\n    if (node.previous && node.next) {\n      node.previous.next = node.next;\n      node.next.previous = node.previous;\n    } else if (node.previous) {\n      node.previous.next = null;\n      this.tail = node.previous;\n    } else if (node.next) {\n      node.next.previous = null;\n      this.head = node.next;\n    } else {\n      this.head = null;\n      this.tail = null;\n    }\n\n    node.next = null;\n    node.previous = null;\n    --this._length;\n  }\n\n  splice(node, nextNode) {\n    if (node === nextNode) {\n      return;\n    }\n\n    this.remove(nextNode);\n\n    this._insert(node, nextNode);\n  }\n\n  _insert(node, nextNode) {\n    const oldNodeNext = node.next;\n    node.next = nextNode;\n\n    if (this.tail === node) {\n      this.tail = nextNode;\n    } else {\n      oldNodeNext.previous = nextNode;\n    }\n\n    nextNode.next = oldNodeNext;\n    nextNode.previous = node;\n    ++this._length;\n  }\n\n}\n//# sourceMappingURL=doubly-linked-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport DoublyLinkedList from '../utils/doubly-linked-list';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nexport default class TilesetCache {\n  constructor() {\n    _defineProperty(this, \"_list\", void 0);\n\n    _defineProperty(this, \"_sentinel\", void 0);\n\n    _defineProperty(this, \"_trimTiles\", void 0);\n\n    this._list = new DoublyLinkedList();\n    this._sentinel = this._list.add('sentinel');\n    this._trimTiles = false;\n  }\n\n  reset() {\n    this._list.splice(this._list.tail, this._sentinel);\n  }\n\n  touch(tile) {\n    const node = tile._cacheNode;\n\n    if (defined(node)) {\n      this._list.splice(this._sentinel, node);\n    }\n  }\n\n  add(tileset, tile, addCallback) {\n    if (!defined(tile._cacheNode)) {\n      tile._cacheNode = this._list.add(tile);\n\n      if (addCallback) {\n        addCallback(tileset, tile);\n      }\n    }\n  }\n\n  unloadTile(tileset, tile, unloadCallback) {\n    const node = tile._cacheNode;\n\n    if (!defined(node)) {\n      return;\n    }\n\n    this._list.remove(node);\n\n    tile._cacheNode = undefined;\n\n    if (unloadCallback) {\n      unloadCallback(tileset, tile);\n    }\n  }\n\n  unloadTiles(tileset, unloadCallback) {\n    const trimTiles = this._trimTiles;\n    this._trimTiles = false;\n    const list = this._list;\n    const maximumMemoryUsageInBytes = tileset.maximumMemoryUsage * 1024 * 1024;\n    const sentinel = this._sentinel;\n    let node = list.head;\n\n    while (node !== sentinel && (tileset.gpuMemoryUsageInBytes > maximumMemoryUsageInBytes || trimTiles)) {\n      const tile = node.item;\n      node = node.next;\n      this.unloadTile(tileset, tile, unloadCallback);\n    }\n  }\n\n  trim() {\n    this._trimTiles = true;\n  }\n\n}\n//# sourceMappingURL=tileset-cache.js.map","export var INTERSECTION = Object.freeze({\n  OUTSIDE: -1,\n  INTERSECTING: 0,\n  INSIDE: 1\n});\n//# sourceMappingURL=constants.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3 } from '@math.gl/core';\nimport { INTERSECTION } from '../constants';\nvar scratchVector = new Vector3();\nvar scratchNormal = new Vector3();\n\nvar AxisAlignedBoundingBox = function () {\n  function AxisAlignedBoundingBox() {\n    var minimum = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0, 0];\n    var maximum = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n    var center = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, AxisAlignedBoundingBox);\n\n    center = center || scratchVector.copy(minimum).add(maximum).scale(0.5);\n    this.center = new Vector3(center);\n    this.halfDiagonal = new Vector3(maximum).subtract(this.center);\n    this.minimum = new Vector3(minimum);\n    this.maximum = new Vector3(maximum);\n  }\n\n  _createClass(AxisAlignedBoundingBox, [{\n    key: \"clone\",\n    value: function clone() {\n      return new AxisAlignedBoundingBox(this.minimum, this.maximum, this.center);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(right) {\n      return this === right || Boolean(right) && this.minimum.equals(right.minimum) && this.maximum.equals(right.maximum);\n    }\n  }, {\n    key: \"intersectPlane\",\n    value: function intersectPlane(plane) {\n      var halfDiagonal = this.halfDiagonal;\n      var normal = scratchNormal.from(plane.normal);\n      var e = halfDiagonal.x * Math.abs(normal.x) + halfDiagonal.y * Math.abs(normal.y) + halfDiagonal.z * Math.abs(normal.z);\n      var s = this.center.dot(normal) + plane.distance;\n\n      if (s - e > 0) {\n        return INTERSECTION.INSIDE;\n      }\n\n      if (s + e < 0) {\n        return INTERSECTION.OUTSIDE;\n      }\n\n      return INTERSECTION.INTERSECTING;\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(point) {\n      return Math.sqrt(this.distanceSquaredTo(point));\n    }\n  }, {\n    key: \"distanceSquaredTo\",\n    value: function distanceSquaredTo(point) {\n      var offset = scratchVector.from(point).subtract(this.center);\n      var halfDiagonal = this.halfDiagonal;\n      var distanceSquared = 0.0;\n      var d;\n      d = Math.abs(offset.x) - halfDiagonal.x;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      d = Math.abs(offset.y) - halfDiagonal.y;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      d = Math.abs(offset.z) - halfDiagonal.z;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      return distanceSquared;\n    }\n  }]);\n\n  return AxisAlignedBoundingBox;\n}();\n\nexport { AxisAlignedBoundingBox as default };\n//# sourceMappingURL=axis-aligned-bounding-box.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Matrix4 } from '@math.gl/core';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { INTERSECTION } from '../constants';\nvar scratchVector = new Vector3();\nvar scratchVector2 = new Vector3();\n\nvar BoundingSphere = function () {\n  function BoundingSphere() {\n    var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0, 0];\n    var radius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n\n    _classCallCheck(this, BoundingSphere);\n\n    this.radius = -0;\n    this.center = new Vector3();\n    this.fromCenterRadius(center, radius);\n  }\n\n  _createClass(BoundingSphere, [{\n    key: \"fromCenterRadius\",\n    value: function fromCenterRadius(center, radius) {\n      this.center.from(center);\n      this.radius = radius;\n      return this;\n    }\n  }, {\n    key: \"fromCornerPoints\",\n    value: function fromCornerPoints(corner, oppositeCorner) {\n      oppositeCorner = scratchVector.from(oppositeCorner);\n      this.center = new Vector3().from(corner).add(oppositeCorner).scale(0.5);\n      this.radius = this.center.distance(oppositeCorner);\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(right) {\n      return this === right || Boolean(right) && this.center.equals(right.center) && this.radius === right.radius;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new BoundingSphere(this.center, this.radius);\n    }\n  }, {\n    key: \"union\",\n    value: function union(boundingSphere) {\n      var leftCenter = this.center;\n      var leftRadius = this.radius;\n      var rightCenter = boundingSphere.center;\n      var rightRadius = boundingSphere.radius;\n      var toRightCenter = scratchVector.copy(rightCenter).subtract(leftCenter);\n      var centerSeparation = toRightCenter.magnitude();\n\n      if (leftRadius >= centerSeparation + rightRadius) {\n        return this.clone();\n      }\n\n      if (rightRadius >= centerSeparation + leftRadius) {\n        return boundingSphere.clone();\n      }\n\n      var halfDistanceBetweenTangentPoints = (leftRadius + centerSeparation + rightRadius) * 0.5;\n      scratchVector2.copy(toRightCenter).scale((-leftRadius + halfDistanceBetweenTangentPoints) / centerSeparation).add(leftCenter);\n      this.center.copy(scratchVector2);\n      this.radius = halfDistanceBetweenTangentPoints;\n      return this;\n    }\n  }, {\n    key: \"expand\",\n    value: function expand(point) {\n      point = scratchVector.from(point);\n      var radius = point.subtract(this.center).magnitude();\n\n      if (radius > this.radius) {\n        this.radius = radius;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"intersectPlane\",\n    value: function intersectPlane(plane) {\n      var center = this.center;\n      var radius = this.radius;\n      var normal = plane.normal;\n      var distanceToPlane = normal.dot(center) + plane.distance;\n\n      if (distanceToPlane < -radius) {\n        return INTERSECTION.OUTSIDE;\n      }\n\n      if (distanceToPlane < radius) {\n        return INTERSECTION.INTERSECTING;\n      }\n\n      return INTERSECTION.INSIDE;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(_transform) {\n      this.center.transform(_transform);\n      var scale = mat4.getScaling(scratchVector, _transform);\n      this.radius = Math.max(scale[0], Math.max(scale[1], scale[2])) * this.radius;\n      return this;\n    }\n  }, {\n    key: \"distanceSquaredTo\",\n    value: function distanceSquaredTo(point) {\n      point = scratchVector.from(point);\n      var delta = point.subtract(this.center);\n      return delta.lengthSquared() - this.radius * this.radius;\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(point) {\n      return Math.sqrt(this.distanceSquaredTo(point));\n    }\n  }]);\n\n  return BoundingSphere;\n}();\n\nexport { BoundingSphere as default };\n//# sourceMappingURL=bounding-sphere.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Matrix3, Quaternion } from '@math.gl/core';\nimport BoundingSphere from './bounding-sphere';\nimport { INTERSECTION } from '../constants';\nvar scratchVector = new Vector3();\nvar scratchOffset = new Vector3();\nvar scratchVectorU = new Vector3();\nvar scratchVectorV = new Vector3();\nvar scratchVectorW = new Vector3();\nvar scratchCorner = new Vector3();\nvar scratchToCenter = new Vector3();\nvar fromOrientedBoundingBoxScratchU = new Vector3();\nvar fromOrientedBoundingBoxScratchV = new Vector3();\nvar fromOrientedBoundingBoxScratchW = new Vector3();\nvar MATRIX3 = {\n  COLUMN0ROW0: 0,\n  COLUMN0ROW1: 1,\n  COLUMN0ROW2: 2,\n  COLUMN1ROW0: 3,\n  COLUMN1ROW1: 4,\n  COLUMN1ROW2: 5,\n  COLUMN2ROW0: 6,\n  COLUMN2ROW1: 7,\n  COLUMN2ROW2: 8\n};\n\nvar OrientedBoundingBox = function () {\n  function OrientedBoundingBox() {\n    var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0, 0];\n    var halfAxes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n    _classCallCheck(this, OrientedBoundingBox);\n\n    this.center = new Vector3().from(center);\n    this.halfAxes = new Matrix3(halfAxes);\n  }\n\n  _createClass(OrientedBoundingBox, [{\n    key: \"fromCenterHalfSizeQuaternion\",\n    value: function fromCenterHalfSizeQuaternion(center, halfSize, quaternion) {\n      var quaternionObject = new Quaternion(quaternion);\n      var directionsMatrix = new Matrix3().fromQuaternion(quaternionObject);\n      directionsMatrix[0] = directionsMatrix[0] * halfSize[0];\n      directionsMatrix[1] = directionsMatrix[1] * halfSize[0];\n      directionsMatrix[2] = directionsMatrix[2] * halfSize[0];\n      directionsMatrix[3] = directionsMatrix[3] * halfSize[1];\n      directionsMatrix[4] = directionsMatrix[4] * halfSize[1];\n      directionsMatrix[5] = directionsMatrix[5] * halfSize[1];\n      directionsMatrix[6] = directionsMatrix[6] * halfSize[2];\n      directionsMatrix[7] = directionsMatrix[7] * halfSize[2];\n      directionsMatrix[8] = directionsMatrix[8] * halfSize[2];\n      this.center = new Vector3().from(center);\n      this.halfAxes = directionsMatrix;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new OrientedBoundingBox(this.center, this.halfAxes);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(right) {\n      return this === right || Boolean(right) && this.center.equals(right.center) && this.halfAxes.equals(right.halfAxes);\n    }\n  }, {\n    key: \"getBoundingSphere\",\n    value: function getBoundingSphere() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new BoundingSphere();\n      var halfAxes = this.halfAxes;\n      var u = halfAxes.getColumn(0, fromOrientedBoundingBoxScratchU);\n      var v = halfAxes.getColumn(1, fromOrientedBoundingBoxScratchV);\n      var w = halfAxes.getColumn(2, fromOrientedBoundingBoxScratchW);\n      var cornerVector = scratchVector.copy(u).add(v).add(w);\n      result.center.copy(this.center);\n      result.radius = cornerVector.magnitude();\n      return result;\n    }\n  }, {\n    key: \"intersectPlane\",\n    value: function intersectPlane(plane) {\n      var center = this.center;\n      var normal = plane.normal;\n      var halfAxes = this.halfAxes;\n      var normalX = normal.x;\n      var normalY = normal.y;\n      var normalZ = normal.z;\n      var radEffective = Math.abs(normalX * halfAxes[MATRIX3.COLUMN0ROW0] + normalY * halfAxes[MATRIX3.COLUMN0ROW1] + normalZ * halfAxes[MATRIX3.COLUMN0ROW2]) + Math.abs(normalX * halfAxes[MATRIX3.COLUMN1ROW0] + normalY * halfAxes[MATRIX3.COLUMN1ROW1] + normalZ * halfAxes[MATRIX3.COLUMN1ROW2]) + Math.abs(normalX * halfAxes[MATRIX3.COLUMN2ROW0] + normalY * halfAxes[MATRIX3.COLUMN2ROW1] + normalZ * halfAxes[MATRIX3.COLUMN2ROW2]);\n      var distanceToPlane = normal.dot(center) + plane.distance;\n\n      if (distanceToPlane <= -radEffective) {\n        return INTERSECTION.OUTSIDE;\n      } else if (distanceToPlane >= radEffective) {\n        return INTERSECTION.INSIDE;\n      }\n\n      return INTERSECTION.INTERSECTING;\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(point) {\n      return Math.sqrt(this.distanceSquaredTo(point));\n    }\n  }, {\n    key: \"distanceSquaredTo\",\n    value: function distanceSquaredTo(point) {\n      var offset = scratchOffset.from(point).subtract(this.center);\n      var halfAxes = this.halfAxes;\n      var u = halfAxes.getColumn(0, scratchVectorU);\n      var v = halfAxes.getColumn(1, scratchVectorV);\n      var w = halfAxes.getColumn(2, scratchVectorW);\n      var uHalf = u.magnitude();\n      var vHalf = v.magnitude();\n      var wHalf = w.magnitude();\n      u.normalize();\n      v.normalize();\n      w.normalize();\n      var distanceSquared = 0.0;\n      var d;\n      d = Math.abs(offset.dot(u)) - uHalf;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      d = Math.abs(offset.dot(v)) - vHalf;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      d = Math.abs(offset.dot(w)) - wHalf;\n\n      if (d > 0) {\n        distanceSquared += d * d;\n      }\n\n      return distanceSquared;\n    }\n  }, {\n    key: \"computePlaneDistances\",\n    value: function computePlaneDistances(position, direction) {\n      var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [-0, -0];\n      var minDist = Number.POSITIVE_INFINITY;\n      var maxDist = Number.NEGATIVE_INFINITY;\n      var center = this.center;\n      var halfAxes = this.halfAxes;\n      var u = halfAxes.getColumn(0, scratchVectorU);\n      var v = halfAxes.getColumn(1, scratchVectorV);\n      var w = halfAxes.getColumn(2, scratchVectorW);\n      var corner = scratchCorner.copy(u).add(v).add(w).add(center);\n      var toCenter = scratchToCenter.copy(corner).subtract(position);\n      var mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      corner.copy(center).add(u).add(v).subtract(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      corner.copy(center).add(u).subtract(v).add(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      corner.copy(center).add(u).subtract(v).subtract(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      center.copy(corner).subtract(u).add(v).add(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      center.copy(corner).subtract(u).add(v).subtract(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      center.copy(corner).subtract(u).subtract(v).add(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      center.copy(corner).subtract(u).subtract(v).subtract(w);\n      toCenter.copy(corner).subtract(position);\n      mag = direction.dot(toCenter);\n      minDist = Math.min(mag, minDist);\n      maxDist = Math.max(mag, maxDist);\n      result[0] = minDist;\n      result[1] = maxDist;\n      return result;\n    }\n  }, {\n    key: \"getTransform\",\n    value: function getTransform() {}\n  }, {\n    key: \"halfSize\",\n    get: function get() {\n      var xAxis = this.halfAxes.getColumn(0);\n      var yAxis = this.halfAxes.getColumn(1);\n      var zAxis = this.halfAxes.getColumn(2);\n      return [new Vector3(xAxis).len(), new Vector3(yAxis).len(), new Vector3(zAxis).len()];\n    }\n  }, {\n    key: \"quaternion\",\n    get: function get() {\n      var xAxis = this.halfAxes.getColumn(0);\n      var yAxis = this.halfAxes.getColumn(1);\n      var zAxis = this.halfAxes.getColumn(2);\n      var normXAxis = new Vector3(xAxis).normalize();\n      var normYAxis = new Vector3(yAxis).normalize();\n      var normZAxis = new Vector3(zAxis).normalize();\n      return new Quaternion().fromMatrix3(new Matrix3([].concat(_toConsumableArray(normXAxis), _toConsumableArray(normYAxis), _toConsumableArray(normZAxis))));\n    }\n  }]);\n\n  return OrientedBoundingBox;\n}();\n\nexport { OrientedBoundingBox as default };\n//# sourceMappingURL=oriented-bounding-box.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, equals as _equals, assert } from '@math.gl/core';\nvar scratchPosition = new Vector3();\nvar scratchNormal = new Vector3();\n\nvar Plane = function () {\n  function Plane() {\n    var normal = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0, 1];\n    var distance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Plane);\n\n    this.normal = new Vector3();\n    this.distance = -0;\n    this.fromNormalDistance(normal, distance);\n  }\n\n  _createClass(Plane, [{\n    key: \"fromNormalDistance\",\n    value: function fromNormalDistance(normal, distance) {\n      assert(Number.isFinite(distance));\n      this.normal.from(normal).normalize();\n      this.distance = distance;\n      return this;\n    }\n  }, {\n    key: \"fromPointNormal\",\n    value: function fromPointNormal(point, normal) {\n      point = scratchPosition.from(point);\n      this.normal.from(normal).normalize();\n      var distance = -this.normal.dot(point);\n      this.distance = distance;\n      return this;\n    }\n  }, {\n    key: \"fromCoefficients\",\n    value: function fromCoefficients(a, b, c, d) {\n      this.normal.set(a, b, c);\n      assert(_equals(this.normal.len(), 1));\n      this.distance = d;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(plane) {\n      return new Plane(this.normal, this.distance);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(right) {\n      return _equals(this.distance, right.distance) && _equals(this.normal, right.normal);\n    }\n  }, {\n    key: \"getPointDistance\",\n    value: function getPointDistance(point) {\n      return this.normal.dot(point) + this.distance;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      var normal = scratchNormal.copy(this.normal).transformAsVector(matrix4).normalize();\n      var point = this.normal.scale(-this.distance).transform(matrix4);\n      return this.fromPointNormal(point, normal);\n    }\n  }, {\n    key: \"projectPointOntoPlane\",\n    value: function projectPointOntoPlane(point) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      point = scratchPosition.from(point);\n      var pointDistance = this.getPointDistance(point);\n      var scaledNormal = scratchNormal.copy(this.normal).scale(pointDistance);\n      return point.subtract(scaledNormal).to(result);\n    }\n  }]);\n\n  return Plane;\n}();\n\nexport { Plane as default };\n//# sourceMappingURL=plane.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Vector3, Vector4, assert } from '@math.gl/core';\nimport { INTERSECTION } from '../constants';\nimport Plane from './plane';\nvar faces = [new Vector3([1, 0, 0]), new Vector3([0, 1, 0]), new Vector3([0, 0, 1])];\nvar scratchPlaneCenter = new Vector3();\nvar scratchPlaneNormal = new Vector3();\nvar scratchPlane = new Plane(new Vector3(1.0, 0.0, 0.0), 0.0);\n\nvar CullingVolume = function () {\n  _createClass(CullingVolume, null, [{\n    key: \"MASK_OUTSIDE\",\n    get: function get() {\n      return 0xffffffff;\n    }\n  }, {\n    key: \"MASK_INSIDE\",\n    get: function get() {\n      return 0x00000000;\n    }\n  }, {\n    key: \"MASK_INDETERMINATE\",\n    get: function get() {\n      return 0x7fffffff;\n    }\n  }]);\n\n  function CullingVolume() {\n    var planes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, CullingVolume);\n\n    this.planes = planes;\n    assert(this.planes.every(function (plane) {\n      return plane instanceof Plane;\n    }));\n  }\n\n  _createClass(CullingVolume, [{\n    key: \"fromBoundingSphere\",\n    value: function fromBoundingSphere(boundingSphere) {\n      this.planes.length = 2 * faces.length;\n      var center = boundingSphere.center;\n      var radius = boundingSphere.radius;\n      var planeIndex = 0;\n\n      var _iterator = _createForOfIteratorHelper(faces),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var faceNormal = _step.value;\n          var plane0 = this.planes[planeIndex];\n          var plane1 = this.planes[planeIndex + 1];\n\n          if (!plane0) {\n            plane0 = this.planes[planeIndex] = new Plane();\n          }\n\n          if (!plane1) {\n            plane1 = this.planes[planeIndex + 1] = new Plane();\n          }\n\n          var plane0Center = scratchPlaneCenter.copy(faceNormal).scale(-radius).add(center);\n          var plane0Distance = -faceNormal.dot(plane0Center);\n          plane0.fromPointNormal(plane0Center, faceNormal);\n          var plane1Center = scratchPlaneCenter.copy(faceNormal).scale(radius).add(center);\n          var negatedFaceNormal = scratchPlaneNormal.copy(faceNormal).negate();\n          var plane1Distance = -negatedFaceNormal.dot(plane1Center);\n          plane1.fromPointNormal(plane1Center, negatedFaceNormal);\n          planeIndex += 2;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"computeVisibility\",\n    value: function computeVisibility(boundingVolume) {\n      assert(boundingVolume);\n      var intersect = INTERSECTION.INSIDE;\n\n      var _iterator2 = _createForOfIteratorHelper(this.planes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var plane = _step2.value;\n          var result = boundingVolume.intersectPlane(plane);\n\n          switch (result) {\n            case INTERSECTION.OUTSIDE:\n              return INTERSECTION.OUTSIDE;\n\n            case INTERSECTION.INTERSECTING:\n              intersect = INTERSECTION.INTERSECTING;\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return intersect;\n    }\n  }, {\n    key: \"computeVisibilityWithPlaneMask\",\n    value: function computeVisibilityWithPlaneMask(boundingVolume, parentPlaneMask) {\n      assert(boundingVolume, 'boundingVolume is required.');\n      assert(Number.isFinite(parentPlaneMask), 'parentPlaneMask is required.');\n\n      if (parentPlaneMask === CullingVolume.MASK_OUTSIDE || parentPlaneMask === CullingVolume.MASK_INSIDE) {\n        return parentPlaneMask;\n      }\n\n      var mask = CullingVolume.MASK_INSIDE;\n      var planes = this.planes;\n\n      for (var k = 0; k < this.planes.length; ++k) {\n        var flag = k < 31 ? 1 << k : 0;\n\n        if (k < 31 && (parentPlaneMask & flag) === 0) {\n          continue;\n        }\n\n        var plane = planes[k];\n        var result = boundingVolume.intersectPlane(plane);\n\n        if (result === INTERSECTION.OUTSIDE) {\n          return CullingVolume.MASK_OUTSIDE;\n        } else if (result === INTERSECTION.INTERSECTING) {\n          mask |= flag;\n        }\n      }\n\n      return mask;\n    }\n  }]);\n\n  return CullingVolume;\n}();\n\nexport { CullingVolume as default };\n//# sourceMappingURL=culling-volume.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Vector3, Matrix4, assert } from '@math.gl/core';\nimport CullingVolume from './culling-volume';\nimport Plane from './plane';\nvar scratchPlaneUpVector = new Vector3();\nvar scratchPlaneRightVector = new Vector3();\nvar scratchPlaneNearCenter = new Vector3();\nvar scratchPlaneFarCenter = new Vector3();\nvar scratchPlaneNormal = new Vector3();\n\nvar PerspectiveOffCenterFrustum = function () {\n  function PerspectiveOffCenterFrustum() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PerspectiveOffCenterFrustum);\n\n    options = _objectSpread({\n      near: 1.0,\n      far: 500000000.0\n    }, options);\n    this.left = options.left;\n    this._left = undefined;\n    this.right = options.right;\n    this._right = undefined;\n    this.top = options.top;\n    this._top = undefined;\n    this.bottom = options.bottom;\n    this._bottom = undefined;\n    this.near = options.near;\n    this._near = this.near;\n    this.far = options.far;\n    this._far = this.far;\n    this._cullingVolume = new CullingVolume([new Plane(), new Plane(), new Plane(), new Plane(), new Plane(), new Plane()]);\n    this._perspectiveMatrix = new Matrix4();\n    this._infinitePerspective = new Matrix4();\n  }\n\n  _createClass(PerspectiveOffCenterFrustum, [{\n    key: \"clone\",\n    value: function clone() {\n      return new PerspectiveOffCenterFrustum({\n        right: this.right,\n        left: this.left,\n        top: this.top,\n        bottom: this.bottom,\n        near: this.near,\n        far: this.far\n      });\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(other) {\n      return other && other instanceof PerspectiveOffCenterFrustum && this.right === other.right && this.left === other.left && this.top === other.top && this.bottom === other.bottom && this.near === other.near && this.far === other.far;\n    }\n  }, {\n    key: \"computeCullingVolume\",\n    value: function computeCullingVolume(position, direction, up) {\n      assert(position, 'position is required.');\n      assert(direction, 'direction is required.');\n      assert(up, 'up is required.');\n      var planes = this._cullingVolume.planes;\n      up = scratchPlaneUpVector.copy(up).normalize();\n      var right = scratchPlaneRightVector.copy(direction).cross(up).normalize();\n      var nearCenter = scratchPlaneNearCenter.copy(direction).multiplyByScalar(this.near).add(position);\n      var farCenter = scratchPlaneFarCenter.copy(direction).multiplyByScalar(this.far).add(position);\n      var normal = scratchPlaneNormal;\n      normal.copy(right).multiplyByScalar(this.left).add(nearCenter).subtract(position).cross(up);\n      planes[0].fromPointNormal(position, normal);\n      normal.copy(right).multiplyByScalar(this.right).add(nearCenter).subtract(position).cross(up).negate();\n      planes[1].fromPointNormal(position, normal);\n      normal.copy(up).multiplyByScalar(this.bottom).add(nearCenter).subtract(position).cross(right).negate();\n      planes[2].fromPointNormal(position, normal);\n      normal.copy(up).multiplyByScalar(this.top).add(nearCenter).subtract(position).cross(right);\n      planes[3].fromPointNormal(position, normal);\n      normal = new Vector3().copy(direction);\n      planes[4].fromPointNormal(nearCenter, normal);\n      normal.negate();\n      planes[5].fromPointNormal(farCenter, normal);\n      return this._cullingVolume;\n    }\n  }, {\n    key: \"getPixelDimensions\",\n    value: function getPixelDimensions(drawingBufferWidth, drawingBufferHeight, distance, result) {\n      update(this);\n      assert(Number.isFinite(drawingBufferWidth) && Number.isFinite(drawingBufferHeight));\n      assert(drawingBufferWidth > 0);\n      assert(drawingBufferHeight > 0);\n      assert(distance > 0);\n      assert(result);\n      var inverseNear = 1.0 / this.near;\n      var tanTheta = this.top * inverseNear;\n      var pixelHeight = 2.0 * distance * tanTheta / drawingBufferHeight;\n      tanTheta = this.right * inverseNear;\n      var pixelWidth = 2.0 * distance * tanTheta / drawingBufferWidth;\n      result.x = pixelWidth;\n      result.y = pixelHeight;\n      return result;\n    }\n  }, {\n    key: \"projectionMatrix\",\n    get: function get() {\n      update(this);\n      return this._perspectiveMatrix;\n    }\n  }, {\n    key: \"infiniteProjectionMatrix\",\n    get: function get() {\n      update(this);\n      return this._infinitePerspective;\n    }\n  }]);\n\n  return PerspectiveOffCenterFrustum;\n}();\n\nexport { PerspectiveOffCenterFrustum as default };\n\nfunction update(frustum) {\n  assert(Number.isFinite(frustum.right) && Number.isFinite(frustum.left) && Number.isFinite(frustum.top) && Number.isFinite(frustum.bottom) && Number.isFinite(frustum.near) && Number.isFinite(frustum.far));\n  var top = frustum.top,\n      bottom = frustum.bottom,\n      right = frustum.right,\n      left = frustum.left,\n      near = frustum.near,\n      far = frustum.far;\n\n  if (top !== frustum._top || bottom !== frustum._bottom || left !== frustum._left || right !== frustum._right || near !== frustum._near || far !== frustum._far) {\n    assert(frustum.near > 0 && frustum.near < frustum.far, 'near must be greater than zero and less than far.');\n    frustum._left = left;\n    frustum._right = right;\n    frustum._top = top;\n    frustum._bottom = bottom;\n    frustum._near = near;\n    frustum._far = far;\n    frustum._perspectiveMatrix = new Matrix4().frustum({\n      left: left,\n      right: right,\n      bottom: bottom,\n      top: top,\n      near: near,\n      far: far\n    });\n    frustum._infinitePerspective = new Matrix4().frustum({\n      left: left,\n      right: right,\n      bottom: bottom,\n      top: top,\n      near: near,\n      far: Infinity\n    });\n  }\n}\n//# sourceMappingURL=perspective-off-center-frustum.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { assert } from '@math.gl/core';\nimport PerspectiveOffCenterFrustum from './perspective-off-center-frustum';\n\nvar defined = function defined(val) {\n  return val !== null && typeof val !== 'undefined';\n};\n\nvar PerspectiveFrustum = function () {\n  function PerspectiveFrustum() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PerspectiveFrustum);\n\n    options = _objectSpread({\n      near: 1.0,\n      far: 500000000.0,\n      xOffset: 0.0,\n      yOffset: 0.0\n    }, options);\n    this._offCenterFrustum = new PerspectiveOffCenterFrustum();\n    this.fov = options.fov;\n    this._fov = undefined;\n    this._fovy = undefined;\n    this._sseDenominator = undefined;\n    this.aspectRatio = options.aspectRatio;\n    this._aspectRatio = undefined;\n    this.near = options.near;\n    this._near = this.near;\n    this.far = options.far;\n    this._far = this.far;\n    this.xOffset = options.xOffset;\n    this._xOffset = this.xOffset;\n    this.yOffset = options.yOffset;\n    this._yOffset = this.yOffset;\n  }\n\n  _createClass(PerspectiveFrustum, [{\n    key: \"clone\",\n    value: function clone() {\n      return new PerspectiveFrustum({\n        aspectRatio: this.aspectRatio,\n        fov: this.fov,\n        near: this.near,\n        far: this.far\n      });\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(other) {\n      if (!defined(other) || !(other instanceof PerspectiveFrustum)) {\n        return false;\n      }\n\n      update(this);\n      update(other);\n      return this.fov === other.fov && this.aspectRatio === other.aspectRatio && this.near === other.near && this.far === other.far && this._offCenterFrustum.equals(other._offCenterFrustum);\n    }\n  }, {\n    key: \"computeCullingVolume\",\n    value: function computeCullingVolume(position, direction, up) {\n      update(this);\n      return this._offCenterFrustum.computeCullingVolume(position, direction, up);\n    }\n  }, {\n    key: \"getPixelDimensions\",\n    value: function getPixelDimensions(drawingBufferWidth, drawingBufferHeight, distance, result) {\n      update(this);\n      return this._offCenterFrustum.getPixelDimensions(drawingBufferWidth, drawingBufferHeight, distance, result);\n    }\n  }, {\n    key: \"projectionMatrix\",\n    get: function get() {\n      update(this);\n      return this._offCenterFrustum.projectionMatrix;\n    }\n  }, {\n    key: \"infiniteProjectionMatrix\",\n    get: function get() {\n      update(this);\n      return this._offCenterFrustum.infiniteProjectionMatrix;\n    }\n  }, {\n    key: \"fovy\",\n    get: function get() {\n      update(this);\n      return this._fovy;\n    }\n  }, {\n    key: \"sseDenominator\",\n    get: function get() {\n      update(this);\n      return this._sseDenominator;\n    }\n  }]);\n\n  return PerspectiveFrustum;\n}();\n\nexport { PerspectiveFrustum as default };\n\nfunction update(frustum) {\n  assert(Number.isFinite(frustum.fov) && Number.isFinite(frustum.aspectRatio) && Number.isFinite(frustum.near) && Number.isFinite(frustum.far));\n  var f = frustum._offCenterFrustum;\n\n  if (frustum.fov !== frustum._fov || frustum.aspectRatio !== frustum._aspectRatio || frustum.near !== frustum._near || frustum.far !== frustum._far || frustum.xOffset !== frustum._xOffset || frustum.yOffset !== frustum._yOffset) {\n    assert(frustum.fov >= 0 && frustum.fov < Math.PI);\n    assert(frustum.aspectRatio > 0);\n    assert(frustum.near >= 0 && frustum.near < frustum.far);\n    frustum._aspectRatio = frustum.aspectRatio;\n    frustum._fov = frustum.fov;\n    frustum._fovy = frustum.aspectRatio <= 1 ? frustum.fov : Math.atan(Math.tan(frustum.fov * 0.5) / frustum.aspectRatio) * 2.0;\n    frustum._near = frustum.near;\n    frustum._far = frustum.far;\n    frustum._sseDenominator = 2.0 * Math.tan(0.5 * frustum._fovy);\n    frustum._xOffset = frustum.xOffset;\n    frustum._yOffset = frustum.yOffset;\n    f.top = frustum.near * Math.tan(0.5 * frustum._fovy);\n    f.bottom = -f.top;\n    f.right = frustum.aspectRatio * f.top;\n    f.left = -f.right;\n    f.near = frustum.near;\n    f.far = frustum.far;\n    f.right += frustum.xOffset;\n    f.left += frustum.xOffset;\n    f.top += frustum.yOffset;\n    f.bottom += frustum.yOffset;\n  }\n}\n//# sourceMappingURL=perspective-frustum.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Vector3 } from '@math.gl/core';\nimport BoundingSphere from '../lib/bounding-sphere';\nvar fromPointsXMin = new Vector3();\nvar fromPointsYMin = new Vector3();\nvar fromPointsZMin = new Vector3();\nvar fromPointsXMax = new Vector3();\nvar fromPointsYMax = new Vector3();\nvar fromPointsZMax = new Vector3();\nvar fromPointsCurrentPos = new Vector3();\nvar fromPointsScratch = new Vector3();\nvar fromPointsRitterCenter = new Vector3();\nvar fromPointsMinBoxPt = new Vector3();\nvar fromPointsMaxBoxPt = new Vector3();\nvar fromPointsNaiveCenterScratch = new Vector3();\nvar volumeConstant = 4.0 / 3.0 * Math.PI;\nexport default function makeBoundingSphereFromPoints(positions) {\n  var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new BoundingSphere();\n\n  if (!positions || positions.length === 0) {\n    return result.fromCenterRadius([0, 0, 0], 0);\n  }\n\n  var currentPos = fromPointsCurrentPos.copy(positions[0]);\n  var xMin = fromPointsXMin.copy(currentPos);\n  var yMin = fromPointsYMin.copy(currentPos);\n  var zMin = fromPointsZMin.copy(currentPos);\n  var xMax = fromPointsXMax.copy(currentPos);\n  var yMax = fromPointsYMax.copy(currentPos);\n  var zMax = fromPointsZMax.copy(currentPos);\n\n  var _iterator = _createForOfIteratorHelper(positions),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var position = _step.value;\n      currentPos.copy(position);\n      var x = currentPos.x;\n      var y = currentPos.y;\n      var z = currentPos.z;\n\n      if (x < xMin.x) {\n        currentPos.copy(xMin);\n      }\n\n      if (x > xMax.x) {\n        currentPos.copy(xMax);\n      }\n\n      if (y < yMin.y) {\n        currentPos.copy(yMin);\n      }\n\n      if (y > yMax.y) {\n        currentPos.copy(yMax);\n      }\n\n      if (z < zMin.z) {\n        currentPos.copy(zMin);\n      }\n\n      if (z > zMax.z) {\n        currentPos.copy(zMax);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var xSpan = fromPointsScratch.copy(xMax).subtract(xMin).magnitudeSquared();\n  var ySpan = fromPointsScratch.copy(yMax).subtract(yMin).magnitudeSquared();\n  var zSpan = fromPointsScratch.copy(zMax).subtract(zMin).magnitudeSquared();\n  var diameter1 = xMin;\n  var diameter2 = xMax;\n  var maxSpan = xSpan;\n\n  if (ySpan > maxSpan) {\n    maxSpan = ySpan;\n    diameter1 = yMin;\n    diameter2 = yMax;\n  }\n\n  if (zSpan > maxSpan) {\n    maxSpan = zSpan;\n    diameter1 = zMin;\n    diameter2 = zMax;\n  }\n\n  var ritterCenter = fromPointsRitterCenter;\n  ritterCenter.x = (diameter1.x + diameter2.x) * 0.5;\n  ritterCenter.y = (diameter1.y + diameter2.y) * 0.5;\n  ritterCenter.z = (diameter1.z + diameter2.z) * 0.5;\n  var radiusSquared = fromPointsScratch.copy(diameter2).subtract(ritterCenter).magnitudeSquared();\n  var ritterRadius = Math.sqrt(radiusSquared);\n  var minBoxPt = fromPointsMinBoxPt;\n  minBoxPt.x = xMin.x;\n  minBoxPt.y = yMin.y;\n  minBoxPt.z = zMin.z;\n  var maxBoxPt = fromPointsMaxBoxPt;\n  maxBoxPt.x = xMax.x;\n  maxBoxPt.y = yMax.y;\n  maxBoxPt.z = zMax.z;\n  var naiveCenter = fromPointsNaiveCenterScratch.copy(minBoxPt).add(maxBoxPt).multiplyByScalar(0.5);\n  var naiveRadius = 0;\n\n  var _iterator2 = _createForOfIteratorHelper(positions),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _position = _step2.value;\n      currentPos.copy(_position);\n      var r = fromPointsScratch.copy(currentPos).subtract(naiveCenter).magnitude();\n\n      if (r > naiveRadius) {\n        naiveRadius = r;\n      }\n\n      var oldCenterToPointSquared = fromPointsScratch.copy(currentPos).subtract(ritterCenter).magnitudeSquared();\n\n      if (oldCenterToPointSquared > radiusSquared) {\n        var oldCenterToPoint = Math.sqrt(oldCenterToPointSquared);\n        ritterRadius = (ritterRadius + oldCenterToPoint) * 0.5;\n        radiusSquared = ritterRadius * ritterRadius;\n        var oldToNew = oldCenterToPoint - ritterRadius;\n        ritterCenter.x = (ritterRadius * ritterCenter.x + oldToNew * currentPos.x) / oldCenterToPoint;\n        ritterCenter.y = (ritterRadius * ritterCenter.y + oldToNew * currentPos.y) / oldCenterToPoint;\n        ritterCenter.z = (ritterRadius * ritterCenter.z + oldToNew * currentPos.z) / oldCenterToPoint;\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  if (ritterRadius < naiveRadius) {\n    ritterCenter.to(result.center);\n    result.radius = ritterRadius;\n  } else {\n    naiveCenter.to(result.center);\n    result.radius = naiveRadius;\n  }\n\n  return result;\n}\n//# sourceMappingURL=bounding-sphere-from-points.js.map","import { Matrix3, _MathUtils } from '@math.gl/core';\nvar scratchMatrix = new Matrix3();\nvar scratchUnitary = new Matrix3();\nvar scratchDiagonal = new Matrix3();\nvar jMatrix = new Matrix3();\nvar jMatrixTranspose = new Matrix3();\nexport default function computeEigenDecomposition(matrix) {\n  var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EIGEN_TOLERANCE = _MathUtils.EPSILON20;\n  var EIGEN_MAX_SWEEPS = 10;\n  var count = 0;\n  var sweep = 0;\n  var unitaryMatrix = scratchUnitary;\n  var diagonalMatrix = scratchDiagonal;\n  unitaryMatrix.identity();\n  diagonalMatrix.copy(matrix);\n  var epsilon = EIGEN_TOLERANCE * computeFrobeniusNorm(diagonalMatrix);\n\n  while (sweep < EIGEN_MAX_SWEEPS && offDiagonalFrobeniusNorm(diagonalMatrix) > epsilon) {\n    shurDecomposition(diagonalMatrix, jMatrix);\n    jMatrixTranspose.copy(jMatrix).transpose();\n    diagonalMatrix.multiplyRight(jMatrix);\n    diagonalMatrix.multiplyLeft(jMatrixTranspose);\n    unitaryMatrix.multiplyRight(jMatrix);\n\n    if (++count > 2) {\n      ++sweep;\n      count = 0;\n    }\n  }\n\n  result.unitary = unitaryMatrix.toTarget(result.unitary);\n  result.diagonal = diagonalMatrix.toTarget(result.diagonal);\n  return result;\n}\n\nfunction computeFrobeniusNorm(matrix) {\n  var norm = 0.0;\n\n  for (var i = 0; i < 9; ++i) {\n    var temp = matrix[i];\n    norm += temp * temp;\n  }\n\n  return Math.sqrt(norm);\n}\n\nvar rowVal = [1, 0, 0];\nvar colVal = [2, 2, 1];\n\nfunction offDiagonalFrobeniusNorm(matrix) {\n  var norm = 0.0;\n\n  for (var i = 0; i < 3; ++i) {\n    var temp = matrix[scratchMatrix.getElementIndex(colVal[i], rowVal[i])];\n    norm += 2.0 * temp * temp;\n  }\n\n  return Math.sqrt(norm);\n}\n\nfunction shurDecomposition(matrix, result) {\n  var tolerance = _MathUtils.EPSILON15;\n  var maxDiagonal = 0.0;\n  var rotAxis = 1;\n\n  for (var i = 0; i < 3; ++i) {\n    var temp = Math.abs(matrix[scratchMatrix.getElementIndex(colVal[i], rowVal[i])]);\n\n    if (temp > maxDiagonal) {\n      rotAxis = i;\n      maxDiagonal = temp;\n    }\n  }\n\n  var p = rowVal[rotAxis];\n  var q = colVal[rotAxis];\n  var c = 1.0;\n  var s = 0.0;\n\n  if (Math.abs(matrix[scratchMatrix.getElementIndex(q, p)]) > tolerance) {\n    var qq = matrix[scratchMatrix.getElementIndex(q, q)];\n    var pp = matrix[scratchMatrix.getElementIndex(p, p)];\n    var qp = matrix[scratchMatrix.getElementIndex(q, p)];\n    var tau = (qq - pp) / 2.0 / qp;\n    var t;\n\n    if (tau < 0.0) {\n      t = -1.0 / (-tau + Math.sqrt(1.0 + tau * tau));\n    } else {\n      t = 1.0 / (tau + Math.sqrt(1.0 + tau * tau));\n    }\n\n    c = 1.0 / Math.sqrt(1.0 + t * t);\n    s = t * c;\n  }\n\n  Matrix3.IDENTITY.to(result);\n  result[scratchMatrix.getElementIndex(p, p)] = result[scratchMatrix.getElementIndex(q, q)] = c;\n  result[scratchMatrix.getElementIndex(q, p)] = s;\n  result[scratchMatrix.getElementIndex(p, q)] = -s;\n  return result;\n}\n//# sourceMappingURL=compute-eigen-decomposition.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Vector3, Matrix3 } from '@math.gl/core';\nimport computeEigenDecomposition from './compute-eigen-decomposition';\nimport OrientedBoundingBox from '../lib/oriented-bounding-box';\nimport AxisAlignedBoundingBox from '../lib/axis-aligned-bounding-box';\nvar scratchVector2 = new Vector3();\nvar scratchVector3 = new Vector3();\nvar scratchVector4 = new Vector3();\nvar scratchVector5 = new Vector3();\nvar scratchVector6 = new Vector3();\nvar scratchCovarianceResult = new Matrix3();\nvar scratchEigenResult = {\n  diagonal: new Matrix3(),\n  unitary: new Matrix3()\n};\nexport function makeOrientedBoundingBoxFromPoints(positions) {\n  var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new OrientedBoundingBox();\n\n  if (!positions || positions.length === 0) {\n    result.halfAxes = new Matrix3([0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    result.center = new Vector3();\n    return result;\n  }\n\n  var length = positions.length;\n  var meanPoint = new Vector3(0, 0, 0);\n\n  var _iterator = _createForOfIteratorHelper(positions),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var position = _step.value;\n      meanPoint.add(position);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var invLength = 1.0 / length;\n  meanPoint.multiplyByScalar(invLength);\n  var exx = 0.0;\n  var exy = 0.0;\n  var exz = 0.0;\n  var eyy = 0.0;\n  var eyz = 0.0;\n  var ezz = 0.0;\n\n  var _iterator2 = _createForOfIteratorHelper(positions),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _position = _step2.value;\n      var p = scratchVector2.copy(_position).subtract(meanPoint);\n      exx += p.x * p.x;\n      exy += p.x * p.y;\n      exz += p.x * p.z;\n      eyy += p.y * p.y;\n      eyz += p.y * p.z;\n      ezz += p.z * p.z;\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  exx *= invLength;\n  exy *= invLength;\n  exz *= invLength;\n  eyy *= invLength;\n  eyz *= invLength;\n  ezz *= invLength;\n  var covarianceMatrix = scratchCovarianceResult;\n  covarianceMatrix[0] = exx;\n  covarianceMatrix[1] = exy;\n  covarianceMatrix[2] = exz;\n  covarianceMatrix[3] = exy;\n  covarianceMatrix[4] = eyy;\n  covarianceMatrix[5] = eyz;\n  covarianceMatrix[6] = exz;\n  covarianceMatrix[7] = eyz;\n  covarianceMatrix[8] = ezz;\n\n  var _computeEigenDecompos = computeEigenDecomposition(covarianceMatrix, scratchEigenResult),\n      unitary = _computeEigenDecompos.unitary;\n\n  var rotation = result.halfAxes.copy(unitary);\n  var v1 = rotation.getColumn(0, scratchVector4);\n  var v2 = rotation.getColumn(1, scratchVector5);\n  var v3 = rotation.getColumn(2, scratchVector6);\n  var u1 = -Number.MAX_VALUE;\n  var u2 = -Number.MAX_VALUE;\n  var u3 = -Number.MAX_VALUE;\n  var l1 = Number.MAX_VALUE;\n  var l2 = Number.MAX_VALUE;\n  var l3 = Number.MAX_VALUE;\n\n  var _iterator3 = _createForOfIteratorHelper(positions),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var _position2 = _step3.value;\n      u1 = Math.max(_position2.dot(v1), u1);\n      u2 = Math.max(_position2.dot(v2), u2);\n      u3 = Math.max(_position2.dot(v3), u3);\n      l1 = Math.min(_position2.dot(v1), l1);\n      l2 = Math.min(_position2.dot(v2), l2);\n      l3 = Math.min(_position2.dot(v3), l3);\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  v1 = v1.multiplyByScalar(0.5 * (l1 + u1));\n  v2 = v2.multiplyByScalar(0.5 * (l2 + u2));\n  v3 = v3.multiplyByScalar(0.5 * (l3 + u3));\n  result.center.copy(v1).add(v2).add(v3);\n  var scale = scratchVector3.set(u1 - l1, u2 - l2, u3 - l3).multiplyByScalar(0.5);\n  var scaleMatrix = new Matrix3([scale[0], 0, 0, 0, scale[1], 0, 0, 0, scale[2]]);\n  result.halfAxes.multiplyRight(scaleMatrix);\n  return result;\n}\nexport function makeAxisAlignedBoundingBoxFromPoints(positions) {\n  var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new AxisAlignedBoundingBox();\n\n  if (!positions || positions.length === 0) {\n    result.minimum.set(0, 0, 0);\n    result.maximum.set(0, 0, 0);\n    result.center.set(0, 0, 0);\n    result.halfDiagonal.set(0, 0, 0);\n    return result;\n  }\n\n  var minimumX = positions[0][0];\n  var minimumY = positions[0][1];\n  var minimumZ = positions[0][2];\n  var maximumX = positions[0][0];\n  var maximumY = positions[0][1];\n  var maximumZ = positions[0][2];\n\n  var _iterator4 = _createForOfIteratorHelper(positions),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var p = _step4.value;\n      var x = p[0];\n      var y = p[1];\n      var z = p[2];\n      minimumX = Math.min(x, minimumX);\n      maximumX = Math.max(x, maximumX);\n      minimumY = Math.min(y, minimumY);\n      maximumY = Math.max(y, maximumY);\n      minimumZ = Math.min(z, minimumZ);\n      maximumZ = Math.max(z, maximumZ);\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  result.minimum.set(minimumX, minimumY, minimumZ);\n  result.maximum.set(maximumX, maximumY, maximumZ);\n  result.center.copy(result.minimum).add(result.maximum).scale(0.5);\n  result.halfDiagonal.copy(result.maximum).subtract(result.center);\n  return result;\n}\n//# sourceMappingURL=bounding-box-from-points.js.map","import { Vector3 } from '@math.gl/core';\nimport { CullingVolume, Plane } from '@math.gl/culling';\nimport { Ellipsoid } from '@math.gl/geospatial';\nconst scratchVector = new Vector3();\nconst scratchPosition = new Vector3();\nconst cullingVolume = new CullingVolume([new Plane(), new Plane(), new Plane(), new Plane(), new Plane(), new Plane()]);\nexport function getFrameState(viewport, frameNumber) {\n  const {\n    cameraDirection,\n    cameraUp,\n    height\n  } = viewport;\n  const {\n    metersPerUnit\n  } = viewport.distanceScales;\n  const viewportCenterCartographic = [viewport.longitude, viewport.latitude, 0];\n  const viewportCenterCartesian = Ellipsoid.WGS84.cartographicToCartesian(viewportCenterCartographic, new Vector3());\n  const enuToFixedTransform = Ellipsoid.WGS84.eastNorthUpToFixedFrame(viewportCenterCartesian);\n  const cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n  const cameraPositionCartesian = Ellipsoid.WGS84.cartographicToCartesian(cameraPositionCartographic, new Vector3());\n  const cameraDirectionCartesian = new Vector3(enuToFixedTransform.transformAsVector(new Vector3(cameraDirection).scale(metersPerUnit))).normalize();\n  const cameraUpCartesian = new Vector3(enuToFixedTransform.transformAsVector(new Vector3(cameraUp).scale(metersPerUnit))).normalize();\n  commonSpacePlanesToWGS84(viewport, viewportCenterCartesian);\n  return {\n    camera: {\n      position: cameraPositionCartesian,\n      direction: cameraDirectionCartesian,\n      up: cameraUpCartesian\n    },\n    viewport,\n    height,\n    cullingVolume,\n    frameNumber,\n    sseDenominator: 1.15\n  };\n}\n\nfunction commonSpacePlanesToWGS84(viewport, viewportCenterCartesian) {\n  const frustumPlanes = viewport.getFrustumPlanes();\n  let i = 0;\n\n  for (const dir in frustumPlanes) {\n    const plane = frustumPlanes[dir];\n    const distanceToCenter = plane.normal.dot(viewport.center);\n    scratchPosition.copy(plane.normal).scale(plane.distance - distanceToCenter).add(viewport.center);\n    const cartographicPos = viewport.unprojectPosition(scratchPosition);\n    const cartesianPos = Ellipsoid.WGS84.cartographicToCartesian(cartographicPos, new Vector3());\n    cullingVolume.planes[i++].fromPointNormal(cartesianPos, scratchVector.copy(viewportCenterCartesian).subtract(cartesianPos));\n  }\n}\n//# sourceMappingURL=frame-state.js.map","import { Vector3 } from '@math.gl/core';\nconst WGS84_RADIUS_X = 6378137.0;\nconst WGS84_RADIUS_Y = 6378137.0;\nconst WGS84_RADIUS_Z = 6356752.3142451793;\nconst scratchVector = new Vector3();\nexport function getZoomFromBoundingVolume(boundingVolume) {\n  const {\n    halfAxes,\n    radius,\n    width,\n    height\n  } = boundingVolume;\n\n  if (halfAxes) {\n    const obbSize = getObbSize(halfAxes);\n    return Math.log2(WGS84_RADIUS_Z / obbSize);\n  } else if (radius) {\n    return Math.log2(WGS84_RADIUS_Z / radius);\n  } else if (height && width) {\n    const zoomX = Math.log2(WGS84_RADIUS_X / width);\n    const zoomY = Math.log2(WGS84_RADIUS_Y / height);\n    return (zoomX + zoomY) / 2;\n  }\n\n  return 1;\n}\n\nfunction getObbSize(halfAxes) {\n  halfAxes.getColumn(0, scratchVector);\n  const axeY = halfAxes.getColumn(1);\n  const axeZ = halfAxes.getColumn(2);\n  const farthestVertex = scratchVector.add(axeY).add(axeZ);\n  const size = farthestVertex.len();\n  return size;\n}\n//# sourceMappingURL=zoom.js.map","export const TILE_CONTENT_STATE = {\n  UNLOADED: 0,\n  LOADING: 1,\n  PROCESSING: 2,\n  READY: 3,\n  EXPIRED: 4,\n  FAILED: 5\n};\nexport const TILE_REFINEMENT = {\n  ADD: 1,\n  REPLACE: 2\n};\nexport const TILE_TYPE = {\n  EMPTY: 'empty',\n  SCENEGRAPH: 'scenegraph',\n  POINTCLOUD: 'pointcloud',\n  MESH: 'mesh'\n};\nexport const TILESET_TYPE = {\n  I3S: 'I3S',\n  TILES3D: 'TILES3D'\n};\nexport const LOD_METRIC_TYPE = {\n  GEOMETRIC_ERROR: 'geometricError',\n  MAX_SCREEN_THRESHOLD: 'maxScreenThreshold'\n};\nexport const TILE3D_OPTIMIZATION_HINT = {\n  NOT_COMPUTED: -1,\n  USE_OPTIMIZATION: 1,\n  SKIP_OPTIMIZATION: 0\n};\n//# sourceMappingURL=constants.js.map","import { Quaternion, Vector3, Matrix3, Matrix4, degrees } from '@math.gl/core';\nimport { BoundingSphere, OrientedBoundingBox } from '@math.gl/culling';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { assert } from '@loaders.gl/loader-utils';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nconst scratchScale = new Vector3();\nconst scratchNorthWest = new Vector3();\nconst scratchSouthEast = new Vector3();\nconst scratchTransform = new Matrix4();\nexport function createBoundingVolume(boundingVolumeHeader, transform, result) {\n  assert(boundingVolumeHeader, '3D Tile: boundingVolume must be defined');\n\n  if (boundingVolumeHeader.box) {\n    return createBox(boundingVolumeHeader.box, transform, result);\n  }\n\n  if (boundingVolumeHeader.region) {\n    const [west, south, east, north, minHeight, maxHeight] = boundingVolumeHeader.region;\n    const northWest = Ellipsoid.WGS84.cartographicToCartesian([degrees(west), degrees(north), minHeight], scratchNorthWest);\n    const southEast = Ellipsoid.WGS84.cartographicToCartesian([degrees(east), degrees(south), maxHeight], scratchSouthEast);\n    const centerInCartesian = new Vector3().addVectors(northWest, southEast).multiplyScalar(0.5);\n    const radius = new Vector3().subVectors(northWest, southEast).len() / 2.0;\n    return createSphere([centerInCartesian[0], centerInCartesian[1], centerInCartesian[2], radius], new Matrix4());\n  }\n\n  if (boundingVolumeHeader.sphere) {\n    return createSphere(boundingVolumeHeader.sphere, transform, result);\n  }\n\n  throw new Error('3D Tile: boundingVolume must contain a sphere, region, or box');\n}\n\nfunction createBox(box, transform, result) {\n  const center = new Vector3(box[0], box[1], box[2]);\n  transform.transform(center, center);\n  let origin = [];\n\n  if (box.length === 10) {\n    const halfSize = box.slice(3, 6);\n    const quaternion = new Quaternion();\n    quaternion.fromArray(box, 6);\n    const x = new Vector3([1, 0, 0]);\n    const y = new Vector3([0, 1, 0]);\n    const z = new Vector3([0, 0, 1]);\n    x.transformByQuaternion(quaternion);\n    x.scale(halfSize[0]);\n    y.transformByQuaternion(quaternion);\n    y.scale(halfSize[1]);\n    z.transformByQuaternion(quaternion);\n    z.scale(halfSize[2]);\n    origin = [...x.toArray(), ...y.toArray(), ...z.toArray()];\n  } else {\n    origin = [...box.slice(3, 6), ...box.slice(6, 9), ...box.slice(9, 12)];\n  }\n\n  const xAxis = transform.transformAsVector(origin.slice(0, 3));\n  const yAxis = transform.transformAsVector(origin.slice(3, 6));\n  const zAxis = transform.transformAsVector(origin.slice(6, 9));\n  const halfAxes = new Matrix3([xAxis[0], xAxis[1], xAxis[2], yAxis[0], yAxis[1], yAxis[2], zAxis[0], zAxis[1], zAxis[2]]);\n\n  if (defined(result)) {\n    result.center = center;\n    result.halfAxes = halfAxes;\n    return result;\n  }\n\n  return new OrientedBoundingBox(center, halfAxes);\n}\n\nfunction createSphere(sphere, transform, result) {\n  const center = new Vector3(sphere[0], sphere[1], sphere[2]);\n  transform.transform(center, center);\n  const scale = transform.getScale(scratchScale);\n  const uniformScale = Math.max(Math.max(scale[0], scale[1]), scale[2]);\n  const radius = sphere[3] * uniformScale;\n\n  if (defined(result)) {\n    result.center = center;\n    result.radius = radius;\n    return result;\n  }\n\n  return new BoundingSphere(center, radius);\n}\n//# sourceMappingURL=bounding-volume.js.map","import { Matrix4, Vector3, clamp } from '@math.gl/core';\nconst scratchPositionNormal = new Vector3();\nconst scratchCartographic = new Vector3();\nconst scratchMatrix = new Matrix4();\nconst scratchCenter = new Vector3();\nconst scratchPosition = new Vector3();\nconst scratchDirection = new Vector3();\nexport function calculateDynamicScreenSpaceError(root, {\n  camera,\n  mapProjection\n}, options = {}) {\n  const {\n    dynamicScreenSpaceErrorHeightFalloff = 0.25,\n    dynamicScreenSpaceErrorDensity = 0.00278\n  } = options;\n  let up;\n  let direction;\n  let height;\n  let minimumHeight;\n  let maximumHeight;\n  const tileBoundingVolume = root.contentBoundingVolume;\n\n  if (tileBoundingVolume instanceof TileBoundingRegion) {\n    up = Cartesian3.normalize(camera.positionWC, scratchPositionNormal);\n    direction = camera.directionWC;\n    height = camera.positionCartographic.height;\n    minimumHeight = tileBoundingVolume.minimumHeight;\n    maximumHeight = tileBoundingVolume.maximumHeight;\n  } else {\n    const transformLocal = Matrix4.inverseTransformation(root.computedTransform, scratchMatrix);\n    const ellipsoid = mapProjection.ellipsoid;\n    const boundingVolume = tileBoundingVolume.boundingVolume;\n    const centerLocal = Matrix4.multiplyByPoint(transformLocal, boundingVolume.center, scratchCenter);\n\n    if (Cartesian3.magnitude(centerLocal) > ellipsoid.minimumRadius) {\n      const centerCartographic = Cartographic.fromCartesian(centerLocal, ellipsoid, scratchCartographic);\n      up = Cartesian3.normalize(camera.positionWC, scratchPositionNormal);\n      direction = camera.directionWC;\n      height = camera.positionCartographic.height;\n      minimumHeight = 0.0;\n      maximumHeight = centerCartographic.height * 2.0;\n    } else {\n      const positionLocal = Matrix4.multiplyByPoint(transformLocal, camera.positionWC, scratchPosition);\n      up = Cartesian3.UNIT_Z;\n      direction = Matrix4.multiplyByPointAsVector(transformLocal, camera.directionWC, scratchDirection);\n      direction = Cartesian3.normalize(direction, direction);\n      height = positionLocal.z;\n\n      if (tileBoundingVolume instanceof TileOrientedBoundingBox) {\n        const boxHeight = root._header.boundingVolume.box[11];\n        minimumHeight = centerLocal.z - boxHeight;\n        maximumHeight = centerLocal.z + boxHeight;\n      } else if (tileBoundingVolume instanceof TileBoundingSphere) {\n        const radius = boundingVolume.radius;\n        minimumHeight = centerLocal.z - radius;\n        maximumHeight = centerLocal.z + radius;\n      }\n    }\n  }\n\n  const heightFalloff = dynamicScreenSpaceErrorHeightFalloff;\n  const heightClose = minimumHeight + (maximumHeight - minimumHeight) * heightFalloff;\n  const heightFar = maximumHeight;\n  const t = clamp((height - heightClose) / (heightFar - heightClose), 0.0, 1.0);\n  const dot = Math.abs(Cartesian3.dot(direction, up));\n  let horizonFactor = 1.0 - dot;\n  horizonFactor = horizonFactor * (1.0 - t);\n  return dynamicScreenSpaceErrorDensity * horizonFactor;\n}\nexport function fog(distanceToCamera, density) {\n  const scalar = distanceToCamera * density;\n  return 1.0 - Math.exp(-(scalar * scalar));\n}\nexport function getDynamicScreenSpaceError(tileset, distanceToCamera) {\n  if (tileset.dynamicScreenSpaceError && tileset.dynamicScreenSpaceErrorComputedDensity) {\n    const density = tileset.dynamicScreenSpaceErrorComputedDensity;\n    const factor = tileset.dynamicScreenSpaceErrorFactor;\n    const dynamicError = fog(distanceToCamera, density) * factor;\n    return dynamicError;\n  }\n\n  return 0;\n}\nexport function getTiles3DScreenSpaceError(tile, frameState, useParentLodMetric) {\n  const tileset = tile.tileset;\n  const parentLodMetricValue = tile.parent && tile.parent.lodMetricValue || tile.lodMetricValue;\n  const lodMetricValue = useParentLodMetric ? parentLodMetricValue : tile.lodMetricValue;\n\n  if (lodMetricValue === 0.0) {\n    return 0.0;\n  }\n\n  const distance = Math.max(tile._distanceToCamera, 1e-7);\n  const {\n    height,\n    sseDenominator\n  } = frameState;\n  const {\n    viewDistanceScale\n  } = tileset.options;\n  let error = lodMetricValue * height * (viewDistanceScale || 1.0) / (distance * sseDenominator);\n  error -= getDynamicScreenSpaceError(tileset, distance);\n  return error;\n}\n//# sourceMappingURL=tiles-3d-lod.js.map","import { toRadians } from '@math.gl/core';\nconst WGS84_RADIUS_X = 6378137.0;\nconst qualityFactor = Math.PI / 2;\nexport function lodJudge(tile, frameState) {\n  const viewport = frameState.viewport;\n  const metersPerPixel = viewport.metersPerPixel;\n  const mbsLat = tile.header.mbs[1];\n  const mbsLon = tile.header.mbs[0];\n  const mbsZ = tile.header.mbs[2];\n  const mbsR = tile.header.mbs[3];\n  const {\n    height,\n    width,\n    latitude,\n    longitude\n  } = viewport;\n  const viewportCenter = [longitude, latitude];\n  const mbsCenter = [mbsLon, mbsLat, mbsZ];\n  const mbsLatProjected = [longitude, mbsLat];\n  const mbsLonProjected = [mbsLon, latitude];\n  const diagonalInMeters = Math.sqrt(height * height + width * width) * metersPerPixel[0];\n  const distanceInMeters = getDistanceFromLatLon(viewportCenter, mbsCenter);\n  const visibleHeight = height * 0.5 + mbsR / WGS84_RADIUS_X;\n  const visibleWidth = width * 0.5 + mbsR / WGS84_RADIUS_X;\n\n  if (distanceInMeters > diagonalInMeters + mbsR / WGS84_RADIUS_X) {\n    return 'OUT';\n  }\n\n  if (getDistanceFromLatLon(viewportCenter, mbsLatProjected) > visibleHeight) {\n    return 'OUT';\n  }\n\n  if (getDistanceFromLatLon(viewportCenter, mbsLonProjected) > visibleWidth) {\n    return 'OUT';\n  }\n\n  if (tile.lodMetricValue === 0) {\n    return 'DIG';\n  }\n\n  let screenSize = getI3ScreenSize(tile, frameState);\n  screenSize *= qualityFactor;\n\n  if (screenSize < 0.5) {\n    return 'OUT';\n  }\n\n  if (!tile.header.children || screenSize <= tile.lodMetricValue) {\n    return 'DRAW';\n  } else if (tile.header.children) {\n    return 'DIG';\n  }\n\n  return 'OUT';\n}\n\nfunction projectVertexToSphere([x, y, z]) {\n  const azim = toRadians(x);\n  const incl = toRadians(y);\n  const radius = 1.0 + z / WGS84_RADIUS_X;\n  const radCosInc = radius * Math.cos(incl);\n  x = radCosInc * Math.cos(azim);\n  y = radCosInc * Math.sin(azim);\n  z = radius * Math.sin(incl);\n  return [x, y, z];\n}\n\nfunction getDistanceFromLatLon(observer, center) {\n  const [observerLon, observerLat, observerZ = 0.0] = observer;\n  const [centerLon, centerLat, centerZ = 0.0] = center;\n  const projectedCenter = projectVertexToSphere([centerLon, centerLat, centerZ]);\n  const projectedObserver = projectVertexToSphere([observerLon, observerLat, observerZ]);\n  const dx = projectedObserver[0] - projectedCenter[0];\n  const dy = projectedObserver[1] - projectedCenter[1];\n  const dz = projectedObserver[2] - projectedCenter[2];\n  return dx * dx + dy * dy + dz * dz;\n}\n\nexport function getI3ScreenSize(tile, frameState) {\n  const viewport = frameState.viewport;\n  const mbsLat = tile.header.mbs[1];\n  const mbsLon = tile.header.mbs[0];\n  const mbsZ = tile.header.mbs[2];\n  const mbsR = tile.header.mbs[3];\n  const mbsCenter = [mbsLon, mbsLat, mbsZ];\n  const cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n  const dSquared = getDistanceFromLatLon(cameraPositionCartographic, mbsCenter);\n  const mbsRNormalized = mbsR / WGS84_RADIUS_X;\n  const d = dSquared - mbsRNormalized * mbsRNormalized;\n  const fltMax = 3.4028235e38;\n\n  if (d <= 0.0) {\n    return 0.5 * fltMax;\n  }\n\n  let screenSizeFactor = calculateScreenSizeFactor(tile, frameState);\n  screenSizeFactor *= mbsRNormalized / Math.sqrt(d) / viewport.scale;\n  return screenSizeFactor;\n}\n\nfunction calculateScreenSizeFactor(tile, frameState) {\n  const {\n    width,\n    height,\n    pixelProjectionMatrix\n  } = frameState.viewport;\n  const tanOfHalfVFAngle = Math.tan(Math.atan(Math.sqrt(1.0 / (pixelProjectionMatrix[0] * pixelProjectionMatrix[0]) + 1.0 / (pixelProjectionMatrix[5] * pixelProjectionMatrix[5]))));\n  const screenCircleFactor = Math.sqrt(height * height + width * width) / tanOfHalfVFAngle;\n  return screenCircleFactor;\n}\n//# sourceMappingURL=i3s-lod.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport default class ManagedArray {\n  constructor(length = 0) {\n    this._array = new Array(length);\n    this._map = new Map();\n    this._length = length;\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  set length(length) {\n    this._length = length;\n\n    if (length > this._array.length) {\n      this._array.length = length;\n    }\n  }\n\n  get values() {\n    return this._array;\n  }\n\n  get(index) {\n    assert(index < this._array.length);\n    return this._array[index];\n  }\n\n  set(index, element) {\n    assert(index >= 0);\n\n    if (index >= this.length) {\n      this.length = index + 1;\n    }\n\n    if (this._map.has(this._array[index])) {\n      this._map.delete(this._array[index]);\n    }\n\n    this._array[index] = element;\n\n    this._map.set(element, index);\n  }\n\n  delete(element) {\n    const index = this._map.get(element);\n\n    if (index >= 0) {\n      this._array.splice(index, 1);\n\n      this._map.delete(element);\n\n      this.length--;\n    }\n  }\n\n  peek() {\n    return this._array[this._length - 1];\n  }\n\n  push(element) {\n    if (!this._map.has(element)) {\n      const index = this.length++;\n      this._array[index] = element;\n\n      this._map.set(element, index);\n    }\n  }\n\n  pop() {\n    const element = this._array[--this.length];\n\n    this._map.delete(element);\n\n    return element;\n  }\n\n  reserve(length) {\n    assert(length >= 0);\n\n    if (length > this._array.length) {\n      this._array.length = length;\n    }\n  }\n\n  resize(length) {\n    assert(length >= 0);\n    this.length = length;\n  }\n\n  trim(length) {\n    if (length === null || length === undefined) {\n      length = this.length;\n    }\n\n    this._array.length = length;\n  }\n\n  reset() {\n    this._array = [];\n    this._map = new Map();\n    this._length = 0;\n  }\n\n  find(target) {\n    return this._map.has(target);\n  }\n\n}\n//# sourceMappingURL=managed-array.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport ManagedArray from '../../utils/managed-array';\nimport { TILE_REFINEMENT } from '../../constants';\nexport const DEFAULT_PROPS = {\n  loadSiblings: false,\n  skipLevelOfDetail: false,\n  maximumScreenSpaceError: 2,\n  updateTransforms: true,\n  onTraversalEnd: () => {},\n  viewportTraversersMap: {},\n  basePath: ''\n};\nexport default class TilesetTraverser {\n  constructor(options) {\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"requestedTiles\", void 0);\n\n    _defineProperty(this, \"selectedTiles\", void 0);\n\n    _defineProperty(this, \"emptyTiles\", void 0);\n\n    _defineProperty(this, \"_traversalStack\", void 0);\n\n    _defineProperty(this, \"_emptyTraversalStack\", void 0);\n\n    _defineProperty(this, \"_frameNumber\", void 0);\n\n    this.options = { ...DEFAULT_PROPS,\n      ...options\n    };\n    this._traversalStack = new ManagedArray();\n    this._emptyTraversalStack = new ManagedArray();\n    this._frameNumber = null;\n    this.root = null;\n    this.selectedTiles = {};\n    this.requestedTiles = {};\n    this.emptyTiles = {};\n  }\n\n  traverse(root, frameState, options) {\n    this.root = root;\n    this.options = { ...this.options,\n      ...options\n    };\n    this.reset();\n    this.updateTile(root, frameState);\n    this._frameNumber = frameState.frameNumber;\n    this.executeTraversal(root, frameState);\n  }\n\n  reset() {\n    this.requestedTiles = {};\n    this.selectedTiles = {};\n    this.emptyTiles = {};\n\n    this._traversalStack.reset();\n\n    this._emptyTraversalStack.reset();\n  }\n\n  executeTraversal(root, frameState) {\n    const stack = this._traversalStack;\n    root._selectionDepth = 1;\n    stack.push(root);\n\n    while (stack.length > 0) {\n      const tile = stack.pop();\n      let shouldRefine = false;\n\n      if (this.canTraverse(tile, frameState)) {\n        this.updateChildTiles(tile, frameState);\n        shouldRefine = this.updateAndPushChildren(tile, frameState, stack, tile.hasRenderContent ? tile._selectionDepth + 1 : tile._selectionDepth);\n      }\n\n      const parent = tile.parent;\n      const parentRefines = Boolean(!parent || parent._shouldRefine);\n      const stoppedRefining = !shouldRefine;\n\n      if (!tile.hasRenderContent) {\n        this.emptyTiles[tile.id] = tile;\n        this.loadTile(tile, frameState);\n\n        if (stoppedRefining) {\n          this.selectTile(tile, frameState);\n        }\n      } else if (tile.refine === TILE_REFINEMENT.ADD) {\n        this.loadTile(tile, frameState);\n        this.selectTile(tile, frameState);\n      } else if (tile.refine === TILE_REFINEMENT.REPLACE) {\n        this.loadTile(tile, frameState);\n\n        if (stoppedRefining) {\n          this.selectTile(tile, frameState);\n        }\n      }\n\n      this.touchTile(tile, frameState);\n      tile._shouldRefine = shouldRefine && parentRefines;\n    }\n\n    this.options.onTraversalEnd(frameState);\n  }\n\n  updateChildTiles(tile, frameState) {\n    const children = tile.children;\n\n    for (const child of children) {\n      this.updateTile(child, frameState);\n    }\n\n    return true;\n  }\n\n  updateAndPushChildren(tile, frameState, stack, depth) {\n    const {\n      loadSiblings,\n      skipLevelOfDetail\n    } = this.options;\n    const children = tile.children;\n    children.sort(this.compareDistanceToCamera.bind(this));\n    const checkRefines = tile.refine === TILE_REFINEMENT.REPLACE && tile.hasRenderContent && !skipLevelOfDetail;\n    let hasVisibleChild = false;\n    let refines = true;\n\n    for (const child of children) {\n      child._selectionDepth = depth;\n\n      if (child.isVisibleAndInRequestVolume) {\n        if (stack.find(child)) {\n          stack.delete(child);\n        }\n\n        stack.push(child);\n        hasVisibleChild = true;\n      } else if (checkRefines || loadSiblings) {\n        this.loadTile(child, frameState);\n        this.touchTile(child, frameState);\n      }\n\n      if (checkRefines) {\n        let childRefines;\n\n        if (!child._inRequestVolume) {\n          childRefines = false;\n        } else if (!child.hasRenderContent) {\n          childRefines = this.executeEmptyTraversal(child, frameState);\n        } else {\n          childRefines = child.contentAvailable;\n        }\n\n        refines = refines && childRefines;\n\n        if (!refines) {\n          return false;\n        }\n      }\n    }\n\n    if (!hasVisibleChild) {\n      refines = false;\n    }\n\n    return refines;\n  }\n\n  updateTile(tile, frameState) {\n    this.updateTileVisibility(tile, frameState);\n  }\n\n  selectTile(tile, frameState) {\n    if (this.shouldSelectTile(tile)) {\n      tile._selectedFrame = frameState.frameNumber;\n      this.selectedTiles[tile.id] = tile;\n    }\n  }\n\n  loadTile(tile, frameState) {\n    if (this.shouldLoadTile(tile)) {\n      tile._requestedFrame = frameState.frameNumber;\n      tile._priority = tile._getPriority();\n      this.requestedTiles[tile.id] = tile;\n    }\n  }\n\n  touchTile(tile, frameState) {\n    tile.tileset._cache.touch(tile);\n\n    tile._touchedFrame = frameState.frameNumber;\n  }\n\n  canTraverse(tile, frameState, useParentMetric = false, ignoreVisibility = false) {\n    if (!tile.hasChildren) {\n      return false;\n    }\n\n    if (tile.hasTilesetContent) {\n      return !tile.contentExpired;\n    }\n\n    if (!ignoreVisibility && !tile.isVisibleAndInRequestVolume) {\n      return false;\n    }\n\n    return this.shouldRefine(tile, frameState, useParentMetric);\n  }\n\n  shouldLoadTile(tile) {\n    return tile.hasUnloadedContent || tile.contentExpired;\n  }\n\n  shouldSelectTile(tile) {\n    return tile.contentAvailable && !this.options.skipLevelOfDetail;\n  }\n\n  shouldRefine(tile, frameState, useParentMetric) {\n    let screenSpaceError = tile._screenSpaceError;\n\n    if (useParentMetric) {\n      screenSpaceError = tile.getScreenSpaceError(frameState, true);\n    }\n\n    return screenSpaceError > this.options.maximumScreenSpaceError;\n  }\n\n  updateTileVisibility(tile, frameState) {\n    const viewportIds = [];\n\n    if (this.options.viewportTraversersMap) {\n      for (const key in this.options.viewportTraversersMap) {\n        const value = this.options.viewportTraversersMap[key];\n\n        if (value === frameState.viewport.id) {\n          viewportIds.push(key);\n        }\n      }\n    } else {\n      viewportIds.push(frameState.viewport.id);\n    }\n\n    tile.updateVisibility(frameState, viewportIds);\n  }\n\n  compareDistanceToCamera(b, a) {\n    return b._distanceToCamera - a._distanceToCamera;\n  }\n\n  anyChildrenVisible(tile, frameState) {\n    let anyVisible = false;\n\n    for (const child of tile.children) {\n      child.updateVisibility(frameState);\n      anyVisible = anyVisible || child.isVisibleAndInRequestVolume;\n    }\n\n    return anyVisible;\n  }\n\n  executeEmptyTraversal(root, frameState) {\n    let allDescendantsLoaded = true;\n    const stack = this._emptyTraversalStack;\n    stack.push(root);\n\n    while (stack.length > 0 && allDescendantsLoaded) {\n      const tile = stack.pop();\n      this.updateTile(tile, frameState);\n\n      if (!tile.isVisibleAndInRequestVolume) {\n        this.loadTile(tile, frameState);\n      }\n\n      this.touchTile(tile, frameState);\n      const traverse = !tile.hasRenderContent && this.canTraverse(tile, frameState, false, true);\n\n      if (traverse) {\n        const children = tile.children;\n\n        for (const child of children) {\n          if (stack.find(child)) {\n            stack.delete(child);\n          }\n\n          stack.push(child);\n        }\n      } else if (!tile.contentAvailable) {\n        allDescendantsLoaded = false;\n      }\n    }\n\n    return allDescendantsLoaded;\n  }\n\n}\n//# sourceMappingURL=tileset-traverser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Vector3, Matrix4 } from '@math.gl/core';\nimport { CullingVolume } from '@math.gl/culling';\nimport { load } from '@loaders.gl/core';\nimport { TILE_REFINEMENT, TILE_CONTENT_STATE, TILESET_TYPE } from '../constants';\nimport { createBoundingVolume } from './helpers/bounding-volume';\nimport { getTiles3DScreenSpaceError } from './helpers/tiles-3d-lod';\nimport { getI3ScreenSize } from './helpers/i3s-lod';\nimport { get3dTilesOptions } from './helpers/3d-tiles-options';\nimport TilesetTraverser from './traversers/tileset-traverser';\nconst scratchVector = new Vector3();\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nexport default class TileHeader {\n  constructor(tileset, header, parentHeader, extendedId = '') {\n    _defineProperty(this, \"tileset\", void 0);\n\n    _defineProperty(this, \"header\", void 0);\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"parent\", void 0);\n\n    _defineProperty(this, \"refine\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"contentUrl\", void 0);\n\n    _defineProperty(this, \"lodMetricType\", void 0);\n\n    _defineProperty(this, \"lodMetricValue\", void 0);\n\n    _defineProperty(this, \"boundingVolume\", void 0);\n\n    _defineProperty(this, \"content\", void 0);\n\n    _defineProperty(this, \"contentState\", void 0);\n\n    _defineProperty(this, \"gpuMemoryUsageInBytes\", void 0);\n\n    _defineProperty(this, \"children\", void 0);\n\n    _defineProperty(this, \"depth\", void 0);\n\n    _defineProperty(this, \"viewportIds\", void 0);\n\n    _defineProperty(this, \"transform\", void 0);\n\n    _defineProperty(this, \"userData\", void 0);\n\n    _defineProperty(this, \"computedTransform\", void 0);\n\n    _defineProperty(this, \"hasEmptyContent\", void 0);\n\n    _defineProperty(this, \"hasTilesetContent\", void 0);\n\n    _defineProperty(this, \"traverser\", void 0);\n\n    _defineProperty(this, \"_cacheNode\", void 0);\n\n    _defineProperty(this, \"_frameNumber\", void 0);\n\n    _defineProperty(this, \"_lodJudge\", void 0);\n\n    _defineProperty(this, \"_expireDate\", void 0);\n\n    _defineProperty(this, \"_expiredContent\", void 0);\n\n    _defineProperty(this, \"_shouldRefine\", void 0);\n\n    _defineProperty(this, \"_distanceToCamera\", void 0);\n\n    _defineProperty(this, \"_centerZDepth\", void 0);\n\n    _defineProperty(this, \"_screenSpaceError\", void 0);\n\n    _defineProperty(this, \"_visibilityPlaneMask\", void 0);\n\n    _defineProperty(this, \"_visible\", void 0);\n\n    _defineProperty(this, \"_inRequestVolume\", void 0);\n\n    _defineProperty(this, \"_stackLength\", void 0);\n\n    _defineProperty(this, \"_selectionDepth\", void 0);\n\n    _defineProperty(this, \"_touchedFrame\", void 0);\n\n    _defineProperty(this, \"_visitedFrame\", void 0);\n\n    _defineProperty(this, \"_selectedFrame\", void 0);\n\n    _defineProperty(this, \"_requestedFrame\", void 0);\n\n    _defineProperty(this, \"_priority\", void 0);\n\n    _defineProperty(this, \"_contentBoundingVolume\", void 0);\n\n    _defineProperty(this, \"_viewerRequestVolume\", void 0);\n\n    _defineProperty(this, \"_initialTransform\", void 0);\n\n    this.header = header;\n    this.tileset = tileset;\n    this.id = extendedId || header.id;\n    this.url = header.url;\n    this.parent = parentHeader;\n    this.refine = this._getRefine(header.refine);\n    this.type = header.type;\n    this.contentUrl = header.contentUrl;\n    this.lodMetricType = 'geometricError';\n    this.lodMetricValue = 0;\n    this.boundingVolume = null;\n    this.content = null;\n    this.contentState = TILE_CONTENT_STATE.UNLOADED;\n    this.gpuMemoryUsageInBytes = 0;\n    this.children = [];\n    this.hasEmptyContent = false;\n    this.hasTilesetContent = false;\n    this.depth = 0;\n    this.viewportIds = [];\n    this.userData = {};\n    this._priority = 0;\n    this._touchedFrame = 0;\n    this._visitedFrame = 0;\n    this._selectedFrame = 0;\n    this._requestedFrame = 0;\n    this._screenSpaceError = 0;\n    this._cacheNode = null;\n    this._frameNumber = null;\n    this._cacheNode = null;\n    this.traverser = new TilesetTraverser({});\n    this._shouldRefine = false;\n    this._distanceToCamera = 0;\n    this._centerZDepth = 0;\n    this._visible = undefined;\n    this._inRequestVolume = false;\n    this._stackLength = 0;\n    this._selectionDepth = 0;\n    this._initialTransform = new Matrix4();\n    this.transform = new Matrix4();\n\n    this._initializeLodMetric(header);\n\n    this._initializeTransforms(header);\n\n    this._initializeBoundingVolumes(header);\n\n    this._initializeContent(header);\n\n    this._initializeRenderingState(header);\n\n    this._lodJudge = null;\n    this._expireDate = null;\n    this._expiredContent = null;\n    Object.seal(this);\n  }\n\n  destroy() {\n    this.header = null;\n  }\n\n  isDestroyed() {\n    return this.header === null;\n  }\n\n  get selected() {\n    return this._selectedFrame === this.tileset._frameNumber;\n  }\n\n  get isVisible() {\n    return this._visible;\n  }\n\n  get isVisibleAndInRequestVolume() {\n    return this._visible && this._inRequestVolume;\n  }\n\n  get hasRenderContent() {\n    return !this.hasEmptyContent && !this.hasTilesetContent;\n  }\n\n  get hasChildren() {\n    return this.children.length > 0 || this.header.children && this.header.children.length > 0;\n  }\n\n  get contentReady() {\n    return this.contentState === TILE_CONTENT_STATE.READY || this.hasEmptyContent;\n  }\n\n  get contentAvailable() {\n    return Boolean(this.contentReady && this.hasRenderContent || this._expiredContent && !this.contentFailed);\n  }\n\n  get hasUnloadedContent() {\n    return this.hasRenderContent && this.contentUnloaded;\n  }\n\n  get contentUnloaded() {\n    return this.contentState === TILE_CONTENT_STATE.UNLOADED;\n  }\n\n  get contentExpired() {\n    return this.contentState === TILE_CONTENT_STATE.EXPIRED;\n  }\n\n  get contentFailed() {\n    return this.contentState === TILE_CONTENT_STATE.FAILED;\n  }\n\n  getScreenSpaceError(frameState, useParentLodMetric) {\n    switch (this.tileset.type) {\n      case TILESET_TYPE.I3S:\n        return getI3ScreenSize(this, frameState);\n\n      case TILESET_TYPE.TILES3D:\n        return getTiles3DScreenSpaceError(this, frameState, useParentLodMetric);\n\n      default:\n        throw new Error('Unsupported tileset type');\n    }\n  }\n\n  _getPriority() {\n    const traverser = this.tileset._traverser;\n    const {\n      skipLevelOfDetail\n    } = traverser.options;\n    const maySkipTile = this.refine === TILE_REFINEMENT.ADD || skipLevelOfDetail;\n\n    if (maySkipTile && !this.isVisible && this._visible !== undefined) {\n      return -1;\n    }\n\n    if (this.contentState === TILE_CONTENT_STATE.UNLOADED) {\n      return -1;\n    }\n\n    const parent = this.parent;\n    const useParentScreenSpaceError = parent && (!maySkipTile || this._screenSpaceError === 0.0 || parent.hasTilesetContent);\n    const screenSpaceError = useParentScreenSpaceError ? parent._screenSpaceError : this._screenSpaceError;\n    const rootScreenSpaceError = traverser.root ? traverser.root._screenSpaceError : 0.0;\n    return Math.max(rootScreenSpaceError - screenSpaceError, 0);\n  }\n\n  async loadContent() {\n    if (this.hasEmptyContent) {\n      return false;\n    }\n\n    if (this.content) {\n      return true;\n    }\n\n    const expired = this.contentExpired;\n\n    if (expired) {\n      this._expireDate = null;\n    }\n\n    this.contentState = TILE_CONTENT_STATE.LOADING;\n    const requestToken = await this.tileset._requestScheduler.scheduleRequest(this.id, this._getPriority.bind(this));\n\n    if (!requestToken) {\n      this.contentState = TILE_CONTENT_STATE.UNLOADED;\n      return false;\n    }\n\n    try {\n      const contentUrl = this.tileset.getTileUrl(this.contentUrl);\n      const loader = this.tileset.loader;\n      const options = { ...this.tileset.loadOptions,\n        [loader.id]: { ...this.tileset.loadOptions[loader.id],\n          isTileset: this.type === 'json',\n          ...this._getLoaderSpecificOptions(loader.id)\n        }\n      };\n      this.content = await load(contentUrl, loader, options);\n\n      if (this.tileset.options.contentLoader) {\n        await this.tileset.options.contentLoader(this);\n      }\n\n      if (this._isTileset()) {\n        this.tileset._initializeTileHeaders(this.content, this);\n      }\n\n      this.contentState = TILE_CONTENT_STATE.READY;\n\n      this._onContentLoaded();\n\n      return true;\n    } catch (error) {\n      this.contentState = TILE_CONTENT_STATE.FAILED;\n      throw error;\n    } finally {\n      requestToken.done();\n    }\n  }\n\n  unloadContent() {\n    if (this.content && this.content.destroy) {\n      this.content.destroy();\n    }\n\n    this.content = null;\n\n    if (this.header.content && this.header.content.destroy) {\n      this.header.content.destroy();\n    }\n\n    this.header.content = null;\n    this.contentState = TILE_CONTENT_STATE.UNLOADED;\n    return true;\n  }\n\n  updateVisibility(frameState, viewportIds) {\n    if (this._frameNumber === frameState.frameNumber) {\n      return;\n    }\n\n    const parent = this.parent;\n    const parentVisibilityPlaneMask = parent ? parent._visibilityPlaneMask : CullingVolume.MASK_INDETERMINATE;\n\n    if (this.tileset._traverser.options.updateTransforms) {\n      const parentTransform = parent ? parent.computedTransform : this.tileset.modelMatrix;\n\n      this._updateTransform(parentTransform);\n    }\n\n    this._distanceToCamera = this.distanceToTile(frameState);\n    this._screenSpaceError = this.getScreenSpaceError(frameState, false);\n    this._visibilityPlaneMask = this.visibility(frameState, parentVisibilityPlaneMask);\n    this._visible = this._visibilityPlaneMask !== CullingVolume.MASK_OUTSIDE;\n    this._inRequestVolume = this.insideViewerRequestVolume(frameState);\n    this._frameNumber = frameState.frameNumber;\n    this.viewportIds = viewportIds;\n  }\n\n  visibility(frameState, parentVisibilityPlaneMask) {\n    const {\n      cullingVolume\n    } = frameState;\n    const {\n      boundingVolume\n    } = this;\n    return cullingVolume.computeVisibilityWithPlaneMask(boundingVolume, parentVisibilityPlaneMask);\n  }\n\n  contentVisibility() {\n    return true;\n  }\n\n  distanceToTile(frameState) {\n    const boundingVolume = this.boundingVolume;\n    return Math.sqrt(Math.max(boundingVolume.distanceSquaredTo(frameState.camera.position), 0));\n  }\n\n  cameraSpaceZDepth({\n    camera\n  }) {\n    const boundingVolume = this.boundingVolume;\n    scratchVector.subVectors(boundingVolume.center, camera.position);\n    return camera.direction.dot(scratchVector);\n  }\n\n  insideViewerRequestVolume(frameState) {\n    const viewerRequestVolume = this._viewerRequestVolume;\n    return !viewerRequestVolume || viewerRequestVolume.distanceSquaredTo(frameState.camera.position) <= 0;\n  }\n\n  updateExpiration() {\n    if (defined(this._expireDate) && this.contentReady && !this.hasEmptyContent) {\n      const now = Date.now();\n\n      if (Date.lessThan(this._expireDate, now)) {\n        this.contentState = TILE_CONTENT_STATE.EXPIRED;\n        this._expiredContent = this.content;\n      }\n    }\n  }\n\n  get extras() {\n    return this.header.extras;\n  }\n\n  _initializeLodMetric(header) {\n    if ('lodMetricType' in header) {\n      this.lodMetricType = header.lodMetricType;\n    } else {\n      this.lodMetricType = this.parent && this.parent.lodMetricType || this.tileset.lodMetricType;\n      console.warn(\"3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType\");\n    }\n\n    if ('lodMetricValue' in header) {\n      this.lodMetricValue = header.lodMetricValue;\n    } else {\n      this.lodMetricValue = this.parent && this.parent.lodMetricValue || this.tileset.lodMetricValue;\n      console.warn('3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue');\n    }\n  }\n\n  _initializeTransforms(tileHeader) {\n    this.transform = tileHeader.transform ? new Matrix4(tileHeader.transform) : new Matrix4();\n    const parent = this.parent;\n    const tileset = this.tileset;\n    const parentTransform = parent && parent.computedTransform ? parent.computedTransform.clone() : tileset.modelMatrix.clone();\n    this.computedTransform = new Matrix4(parentTransform).multiplyRight(this.transform);\n    const parentInitialTransform = parent && parent._initialTransform ? parent._initialTransform.clone() : new Matrix4();\n    this._initialTransform = new Matrix4(parentInitialTransform).multiplyRight(this.transform);\n  }\n\n  _initializeBoundingVolumes(tileHeader) {\n    this._contentBoundingVolume = null;\n    this._viewerRequestVolume = null;\n\n    this._updateBoundingVolume(tileHeader);\n  }\n\n  _initializeContent(tileHeader) {\n    this.content = {\n      _tileset: this.tileset,\n      _tile: this\n    };\n    this.hasEmptyContent = true;\n    this.contentState = TILE_CONTENT_STATE.UNLOADED;\n    this.hasTilesetContent = false;\n\n    if (tileHeader.contentUrl) {\n      this.content = null;\n      this.hasEmptyContent = false;\n    }\n  }\n\n  _initializeRenderingState(header) {\n    this.depth = header.level || (this.parent ? this.parent.depth + 1 : 0);\n    this._shouldRefine = false;\n    this._distanceToCamera = 0;\n    this._centerZDepth = 0;\n    this._screenSpaceError = 0;\n    this._visibilityPlaneMask = CullingVolume.MASK_INDETERMINATE;\n    this._visible = undefined;\n    this._inRequestVolume = false;\n    this._stackLength = 0;\n    this._selectionDepth = 0;\n    this._frameNumber = 0;\n    this._touchedFrame = 0;\n    this._visitedFrame = 0;\n    this._selectedFrame = 0;\n    this._requestedFrame = 0;\n    this._priority = 0.0;\n  }\n\n  _getRefine(refine) {\n    return refine || this.parent && this.parent.refine || TILE_REFINEMENT.REPLACE;\n  }\n\n  _isTileset() {\n    return this.contentUrl.indexOf('.json') !== -1;\n  }\n\n  _onContentLoaded() {\n    switch (this.content && this.content.type) {\n      case 'vctr':\n      case 'geom':\n        this.tileset._traverser.disableSkipLevelOfDetail = true;\n        break;\n\n      default:\n    }\n\n    if (this._isTileset()) {\n      this.hasTilesetContent = true;\n    }\n  }\n\n  _updateBoundingVolume(header) {\n    this.boundingVolume = createBoundingVolume(header.boundingVolume, this.computedTransform, this.boundingVolume);\n    const content = header.content;\n\n    if (!content) {\n      return;\n    }\n\n    if (content.boundingVolume) {\n      this._contentBoundingVolume = createBoundingVolume(content.boundingVolume, this.computedTransform, this._contentBoundingVolume);\n    }\n\n    if (header.viewerRequestVolume) {\n      this._viewerRequestVolume = createBoundingVolume(header.viewerRequestVolume, this.computedTransform, this._viewerRequestVolume);\n    }\n  }\n\n  _updateTransform(parentTransform = new Matrix4()) {\n    const computedTransform = parentTransform.clone().multiplyRight(this.transform);\n    const didTransformChange = !computedTransform.equals(this.computedTransform);\n\n    if (!didTransformChange) {\n      return;\n    }\n\n    this.computedTransform = computedTransform;\n\n    this._updateBoundingVolume(this.header);\n  }\n\n  _getLoaderSpecificOptions(loaderId) {\n    switch (loaderId) {\n      case 'i3s':\n        return { ...this.tileset.options.i3s,\n          tile: this.header,\n          tileset: this.tileset.tileset,\n          isTileHeader: false\n        };\n\n      case '3d-tiles':\n      case 'cesium-ion':\n      default:\n        return get3dTilesOptions(this.tileset.tileset);\n    }\n  }\n\n}\n//# sourceMappingURL=tile-3d.js.map","export function get3dTilesOptions(tileset) {\n  return {\n    assetGltfUpAxis: tileset.asset && tileset.asset.gltfUpAxis || 'Y'\n  };\n}\n//# sourceMappingURL=3d-tiles-options.js.map","import { TILE3D_OPTIMIZATION_HINT, TILE_REFINEMENT } from '../../constants';\nimport TilesetTraverser from './tileset-traverser';\nexport default class Tileset3DTraverser extends TilesetTraverser {\n  compareDistanceToCamera(a, b) {\n    return b._distanceToCamera === 0 && a._distanceToCamera === 0 ? b._centerZDepth - a._centerZDepth : b._distanceToCamera - a._distanceToCamera;\n  }\n\n  updateTileVisibility(tile, frameState) {\n    super.updateTileVisibility(tile, frameState);\n\n    if (!tile.isVisibleAndInRequestVolume) {\n      return;\n    }\n\n    const hasChildren = tile.children.length > 0;\n\n    if (tile.hasTilesetContent && hasChildren) {\n      const firstChild = tile.children[0];\n      this.updateTileVisibility(firstChild, frameState);\n      tile._visible = firstChild._visible;\n      return;\n    }\n\n    if (this.meetsScreenSpaceErrorEarly(tile, frameState)) {\n      tile._visible = false;\n      return;\n    }\n\n    const replace = tile.refine === TILE_REFINEMENT.REPLACE;\n    const useOptimization = tile._optimChildrenWithinParent === TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;\n\n    if (replace && useOptimization && hasChildren) {\n      if (!this.anyChildrenVisible(tile, frameState)) {\n        tile._visible = false;\n        return;\n      }\n    }\n  }\n\n  meetsScreenSpaceErrorEarly(tile, frameState) {\n    const {\n      parent\n    } = tile;\n\n    if (!parent || parent.hasTilesetContent || parent.refine !== TILE_REFINEMENT.ADD) {\n      return false;\n    }\n\n    return !this.shouldRefine(tile, frameState, true);\n  }\n\n}\n//# sourceMappingURL=tileset-3d-traverser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\nexport default class I3STileManager {\n  constructor() {\n    _defineProperty(this, \"_statusMap\", void 0);\n\n    this._statusMap = {};\n  }\n\n  add(request, key, callback, frameState) {\n    if (!this._statusMap[key]) {\n      this._statusMap[key] = {\n        request,\n        callback,\n        key,\n        frameState,\n        status: STATUS.REQUESTED\n      };\n      request().then(data => {\n        this._statusMap[key].status = STATUS.COMPLETED;\n\n        this._statusMap[key].callback(data, frameState);\n      }).catch(error => {\n        this._statusMap[key].status = STATUS.ERROR;\n        callback(error);\n      });\n    }\n  }\n\n  update(key, frameState) {\n    if (this._statusMap[key]) {\n      this._statusMap[key].frameState = frameState;\n    }\n  }\n\n  find(key) {\n    return this._statusMap[key];\n  }\n\n}\n//# sourceMappingURL=i3s-tile-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { load } from '@loaders.gl/core';\nimport TilesetTraverser from './tileset-traverser';\nimport { lodJudge } from '../helpers/i3s-lod';\nimport TileHeader from '../tile-3d';\nimport I3STileManager from './i3s-tile-manager';\nexport default class I3STilesetTraverser extends TilesetTraverser {\n  constructor(options) {\n    super(options);\n\n    _defineProperty(this, \"_tileManager\", void 0);\n\n    this._tileManager = new I3STileManager();\n  }\n\n  shouldRefine(tile, frameState) {\n    tile._lodJudge = lodJudge(tile, frameState);\n    return tile._lodJudge === 'DIG';\n  }\n\n  updateChildTiles(tile, frameState) {\n    const children = tile.header.children || [];\n    const childTiles = tile.children;\n    const tileset = tile.tileset;\n\n    for (const child of children) {\n      const extendedId = \"\".concat(child.id, \"-\").concat(frameState.viewport.id);\n      const childTile = childTiles && childTiles.find(t => t.id === extendedId);\n\n      if (!childTile) {\n        let request = () => this._loadTile(child.id, tileset);\n\n        const cachedRequest = this._tileManager.find(extendedId);\n\n        if (!cachedRequest) {\n          if (tileset.tileset.nodePages) {\n            request = () => tileset.tileset.nodePagesTile.formTileFromNodePages(child.id);\n          }\n\n          this._tileManager.add(request, extendedId, header => this._onTileLoad(header, tile, extendedId), frameState);\n        } else {\n          this._tileManager.update(extendedId, frameState);\n        }\n      } else if (childTile) {\n        this.updateTile(childTile, frameState);\n      }\n    }\n\n    return false;\n  }\n\n  async _loadTile(nodeId, tileset) {\n    const {\n      loader\n    } = tileset;\n    const nodeUrl = tileset.getTileUrl(\"\".concat(tileset.url, \"/nodes/\").concat(nodeId));\n    const options = { ...tileset.loadOptions,\n      i3s: { ...tileset.loadOptions.i3s,\n        isTileHeader: true,\n        loadContent: false\n      }\n    };\n    return await load(nodeUrl, loader, options);\n  }\n\n  _onTileLoad(header, tile, extendedId) {\n    const childTile = new TileHeader(tile.tileset, header, tile, extendedId);\n    tile.children.push(childTile);\n\n    const frameState = this._tileManager.find(childTile.id).frameState;\n\n    this.updateTile(childTile, frameState);\n\n    if (this._frameNumber === frameState.frameNumber) {\n      this.executeTraversal(childTile, frameState);\n    }\n  }\n\n}\n//# sourceMappingURL=i3s-tileset-traverser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { Stats } from '@probe.gl/stats';\nimport { RequestScheduler, assert, path } from '@loaders.gl/loader-utils';\nimport TilesetCache from './tileset-cache';\nimport { calculateTransformProps } from './helpers/transform-utils';\nimport { getFrameState } from './helpers/frame-state';\nimport { getZoomFromBoundingVolume } from './helpers/zoom';\nimport Tile3D from './tile-3d';\nimport Tileset3DTraverser from './traversers/tileset-3d-traverser';\nimport TilesetTraverser from './traversers/tileset-traverser';\nimport I3SetTraverser from './traversers/i3s-tileset-traverser';\nimport { TILESET_TYPE } from '../constants';\nconst DEFAULT_PROPS = {\n  description: '',\n  ellipsoid: Ellipsoid.WGS84,\n  modelMatrix: new Matrix4(),\n  throttleRequests: true,\n  maxRequests: 64,\n  maximumMemoryUsage: 32,\n  onTileLoad: () => {},\n  onTileUnload: () => {},\n  onTileError: () => {},\n  contentLoader: undefined,\n  viewDistanceScale: 1.0,\n  maximumScreenSpaceError: 8,\n  loadTiles: true,\n  updateTransforms: true,\n  viewportTraversersMap: null,\n  loadOptions: {\n    fetch: {}\n  },\n  attributions: [],\n  basePath: '',\n  i3s: {}\n};\nconst TILES_TOTAL = 'Tiles In Tileset(s)';\nconst TILES_IN_MEMORY = 'Tiles In Memory';\nconst TILES_IN_VIEW = 'Tiles In View';\nconst TILES_RENDERABLE = 'Tiles To Render';\nconst TILES_LOADED = 'Tiles Loaded';\nconst TILES_LOADING = 'Tiles Loading';\nconst TILES_UNLOADED = 'Tiles Unloaded';\nconst TILES_LOAD_FAILED = 'Failed Tile Loads';\nconst POINTS_COUNT = 'Points';\nconst TILES_GPU_MEMORY = 'Tile Memory Use';\nexport default class Tileset3D {\n  constructor(json, options) {\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"loadOptions\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"tileset\", void 0);\n\n    _defineProperty(this, \"loader\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"basePath\", void 0);\n\n    _defineProperty(this, \"modelMatrix\", void 0);\n\n    _defineProperty(this, \"ellipsoid\", void 0);\n\n    _defineProperty(this, \"lodMetricType\", void 0);\n\n    _defineProperty(this, \"lodMetricValue\", void 0);\n\n    _defineProperty(this, \"refine\", void 0);\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"roots\", void 0);\n\n    _defineProperty(this, \"asset\", void 0);\n\n    _defineProperty(this, \"description\", void 0);\n\n    _defineProperty(this, \"properties\", void 0);\n\n    _defineProperty(this, \"extras\", void 0);\n\n    _defineProperty(this, \"attributions\", void 0);\n\n    _defineProperty(this, \"credits\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"traverseCounter\", void 0);\n\n    _defineProperty(this, \"geometricError\", void 0);\n\n    _defineProperty(this, \"selectedTiles\", void 0);\n\n    _defineProperty(this, \"cartographicCenter\", void 0);\n\n    _defineProperty(this, \"cartesianCenter\", void 0);\n\n    _defineProperty(this, \"zoom\", void 0);\n\n    _defineProperty(this, \"boundingVolume\", void 0);\n\n    _defineProperty(this, \"gpuMemoryUsageInBytes\", void 0);\n\n    _defineProperty(this, \"dynamicScreenSpaceErrorComputedDensity\", void 0);\n\n    _defineProperty(this, \"_traverser\", void 0);\n\n    _defineProperty(this, \"_cache\", void 0);\n\n    _defineProperty(this, \"_requestScheduler\", void 0);\n\n    _defineProperty(this, \"_frameNumber\", void 0);\n\n    _defineProperty(this, \"_queryParamsString\", void 0);\n\n    _defineProperty(this, \"_queryParams\", void 0);\n\n    _defineProperty(this, \"_extensionsUsed\", void 0);\n\n    _defineProperty(this, \"_tiles\", void 0);\n\n    _defineProperty(this, \"_pendingCount\", void 0);\n\n    _defineProperty(this, \"lastUpdatedVieports\", void 0);\n\n    _defineProperty(this, \"_requestedTiles\", void 0);\n\n    _defineProperty(this, \"_emptyTiles\", void 0);\n\n    _defineProperty(this, \"frameStateData\", void 0);\n\n    _defineProperty(this, \"maximumMemoryUsage\", void 0);\n\n    assert(json);\n    this.options = { ...DEFAULT_PROPS,\n      ...options\n    };\n    this.tileset = json;\n    this.loader = json.loader;\n    this.type = json.type;\n    this.url = json.url;\n    this.basePath = json.basePath || path.dirname(this.url);\n    this.modelMatrix = this.options.modelMatrix;\n    this.ellipsoid = this.options.ellipsoid;\n    this.lodMetricType = json.lodMetricType;\n    this.lodMetricValue = json.lodMetricValue;\n    this.refine = json.root.refine;\n    this.loadOptions = this.options.loadOptions || {};\n    this.root = null;\n    this.roots = {};\n    this.cartographicCenter = null;\n    this.cartesianCenter = null;\n    this.zoom = 1;\n    this.boundingVolume = null;\n    this.traverseCounter = 0;\n    this.geometricError = 0;\n    this._traverser = this._initializeTraverser();\n    this._cache = new TilesetCache();\n    this._requestScheduler = new RequestScheduler({\n      throttleRequests: this.options.throttleRequests,\n      maxRequests: this.options.maxRequests\n    });\n    this._frameNumber = 0;\n    this._pendingCount = 0;\n    this._tiles = {};\n    this.selectedTiles = [];\n    this._emptyTiles = [];\n    this._requestedTiles = [];\n    this.frameStateData = {};\n    this.lastUpdatedVieports = null;\n    this._queryParams = {};\n    this._queryParamsString = '';\n    this.maximumMemoryUsage = this.options.maximumMemoryUsage || 32;\n    this.gpuMemoryUsageInBytes = 0;\n    this.stats = new Stats({\n      id: this.url\n    });\n\n    this._initializeStats();\n\n    this._extensionsUsed = undefined;\n    this.dynamicScreenSpaceErrorComputedDensity = 0.0;\n    this.extras = null;\n    this.asset = {};\n    this.credits = {};\n    this.description = this.options.description || '';\n\n    this._initializeTileSet(json);\n  }\n\n  destroy() {\n    this._destroy();\n  }\n\n  isLoaded() {\n    return this._pendingCount === 0 && this._frameNumber !== 0;\n  }\n\n  get tiles() {\n    return Object.values(this._tiles);\n  }\n\n  get frameNumber() {\n    return this._frameNumber;\n  }\n\n  get queryParams() {\n    if (!this._queryParamsString) {\n      this._queryParamsString = getQueryParamString(this._queryParams);\n    }\n\n    return this._queryParamsString;\n  }\n\n  setProps(props) {\n    this.options = { ...this.options,\n      ...props\n    };\n  }\n\n  setOptions(options) {\n    this.options = { ...this.options,\n      ...options\n    };\n  }\n\n  getTileUrl(tilePath) {\n    const isDataUrl = tilePath.startsWith('data:');\n\n    if (isDataUrl) {\n      return tilePath;\n    }\n\n    return \"\".concat(tilePath).concat(this.queryParams);\n  }\n\n  hasExtension(extensionName) {\n    return Boolean(this._extensionsUsed && this._extensionsUsed.indexOf(extensionName) > -1);\n  }\n\n  update(viewports) {\n    if ('loadTiles' in this.options && !this.options.loadTiles) {\n      return;\n    }\n\n    if (this.traverseCounter > 0) {\n      return;\n    }\n\n    if (!viewports && this.lastUpdatedVieports) {\n      viewports = this.lastUpdatedVieports;\n    } else {\n      this.lastUpdatedVieports = viewports;\n    }\n\n    if (!(viewports instanceof Array)) {\n      viewports = [viewports];\n    }\n\n    this._cache.reset();\n\n    this._frameNumber++;\n    this.traverseCounter = viewports.length;\n    const viewportsToTraverse = [];\n\n    for (const viewport of viewports) {\n      const id = viewport.id;\n\n      if (this._needTraverse(id)) {\n        viewportsToTraverse.push(id);\n      } else {\n        this.traverseCounter--;\n      }\n    }\n\n    for (const viewport of viewports) {\n      const id = viewport.id;\n\n      if (!this.roots[id]) {\n        this.roots[id] = this._initializeTileHeaders(this.tileset, null);\n      }\n\n      if (!viewportsToTraverse.includes(id)) {\n        continue;\n      }\n\n      const frameState = getFrameState(viewport, this._frameNumber);\n\n      this._traverser.traverse(this.roots[id], frameState, this.options);\n    }\n  }\n\n  _needTraverse(viewportId) {\n    let traverserId = viewportId;\n\n    if (this.options.viewportTraversersMap) {\n      traverserId = this.options.viewportTraversersMap[viewportId];\n    }\n\n    if (traverserId !== viewportId) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _onTraversalEnd(frameState) {\n    const id = frameState.viewport.id;\n\n    if (!this.frameStateData[id]) {\n      this.frameStateData[id] = {\n        selectedTiles: [],\n        _requestedTiles: [],\n        _emptyTiles: []\n      };\n    }\n\n    const currentFrameStateData = this.frameStateData[id];\n    const selectedTiles = Object.values(this._traverser.selectedTiles);\n    currentFrameStateData.selectedTiles = selectedTiles;\n    currentFrameStateData._requestedTiles = Object.values(this._traverser.requestedTiles);\n    currentFrameStateData._emptyTiles = Object.values(this._traverser.emptyTiles);\n    this.traverseCounter--;\n\n    if (this.traverseCounter > 0) {\n      return;\n    }\n\n    this._updateTiles();\n  }\n\n  _updateTiles() {\n    this.selectedTiles = [];\n    this._requestedTiles = [];\n    this._emptyTiles = [];\n\n    for (const frameStateKey in this.frameStateData) {\n      const frameStateDataValue = this.frameStateData[frameStateKey];\n      this.selectedTiles = this.selectedTiles.concat(frameStateDataValue.selectedTiles);\n      this._requestedTiles = this._requestedTiles.concat(frameStateDataValue._requestedTiles);\n      this._emptyTiles = this._emptyTiles.concat(frameStateDataValue._emptyTiles);\n    }\n\n    for (const tile of this.selectedTiles) {\n      this._tiles[tile.id] = tile;\n    }\n\n    this._loadTiles();\n\n    this._unloadTiles();\n\n    this._updateStats();\n  }\n\n  _tilesChanged(oldSelectedTiles, selectedTiles) {\n    if (oldSelectedTiles.length !== selectedTiles.length) {\n      return true;\n    }\n\n    const set1 = new Set(oldSelectedTiles.map(t => t.id));\n    const set2 = new Set(selectedTiles.map(t => t.id));\n    let changed = oldSelectedTiles.filter(x => !set2.has(x.id)).length > 0;\n    changed = changed || selectedTiles.filter(x => !set1.has(x.id)).length > 0;\n    return changed;\n  }\n\n  _loadTiles() {\n    for (const tile of this._requestedTiles) {\n      if (tile.contentUnloaded) {\n        this._loadTile(tile);\n      }\n    }\n  }\n\n  _unloadTiles() {\n    this._cache.unloadTiles(this, (tileset, tile) => tileset._unloadTile(tile));\n  }\n\n  _updateStats() {\n    let tilesRenderable = 0;\n    let pointsRenderable = 0;\n\n    for (const tile of this.selectedTiles) {\n      if (tile.contentAvailable && tile.content) {\n        tilesRenderable++;\n\n        if (tile.content.pointCount) {\n          pointsRenderable += tile.content.pointCount;\n        }\n      }\n    }\n\n    this.stats.get(TILES_IN_VIEW).count = this.selectedTiles.length;\n    this.stats.get(TILES_RENDERABLE).count = tilesRenderable;\n    this.stats.get(POINTS_COUNT).count = pointsRenderable;\n  }\n\n  _initializeTileSet(tilesetJson) {\n    this.root = this._initializeTileHeaders(tilesetJson, null);\n\n    if (this.type === TILESET_TYPE.TILES3D) {\n      this._initializeCesiumTileset(tilesetJson);\n    }\n\n    if (this.type === TILESET_TYPE.I3S) {\n      this._initializeI3STileset();\n    }\n\n    this._calculateViewProps();\n  }\n\n  _calculateViewProps() {\n    const root = this.root;\n    assert(root);\n    const {\n      center\n    } = root.boundingVolume;\n\n    if (!center) {\n      console.warn('center was not pre-calculated for the root tile');\n      this.cartographicCenter = new Vector3();\n      this.zoom = 1;\n      return;\n    }\n\n    this.cartographicCenter = Ellipsoid.WGS84.cartesianToCartographic(center, new Vector3());\n    this.cartesianCenter = center;\n    this.zoom = getZoomFromBoundingVolume(root.boundingVolume);\n  }\n\n  _initializeStats() {\n    this.stats.get(TILES_TOTAL);\n    this.stats.get(TILES_LOADING);\n    this.stats.get(TILES_IN_MEMORY);\n    this.stats.get(TILES_IN_VIEW);\n    this.stats.get(TILES_RENDERABLE);\n    this.stats.get(TILES_LOADED);\n    this.stats.get(TILES_UNLOADED);\n    this.stats.get(TILES_LOAD_FAILED);\n    this.stats.get(POINTS_COUNT, 'memory');\n    this.stats.get(TILES_GPU_MEMORY, 'memory');\n  }\n\n  _initializeTileHeaders(tilesetJson, parentTileHeader) {\n    const rootTile = new Tile3D(this, tilesetJson.root, parentTileHeader);\n\n    if (parentTileHeader) {\n      parentTileHeader.children.push(rootTile);\n      rootTile.depth = parentTileHeader.depth + 1;\n    }\n\n    if (this.type === TILESET_TYPE.TILES3D) {\n      const stack = [];\n      stack.push(rootTile);\n\n      while (stack.length > 0) {\n        const tile = stack.pop();\n        this.stats.get(TILES_TOTAL).incrementCount();\n        const children = tile.header.children || [];\n\n        for (const childHeader of children) {\n          const childTile = new Tile3D(this, childHeader, tile);\n          tile.children.push(childTile);\n          childTile.depth = tile.depth + 1;\n          stack.push(childTile);\n        }\n      }\n    }\n\n    return rootTile;\n  }\n\n  _initializeTraverser() {\n    let TraverserClass;\n    const type = this.type;\n\n    switch (type) {\n      case TILESET_TYPE.TILES3D:\n        TraverserClass = Tileset3DTraverser;\n        break;\n\n      case TILESET_TYPE.I3S:\n        TraverserClass = I3SetTraverser;\n        break;\n\n      default:\n        TraverserClass = TilesetTraverser;\n    }\n\n    return new TraverserClass({\n      basePath: this.basePath,\n      onTraversalEnd: this._onTraversalEnd.bind(this)\n    });\n  }\n\n  _destroyTileHeaders(parentTile) {\n    this._destroySubtree(parentTile);\n  }\n\n  async _loadTile(tile) {\n    let loaded;\n\n    try {\n      this._onStartTileLoading();\n\n      loaded = await tile.loadContent();\n    } catch (error) {\n      this._onTileLoadError(tile, error);\n    } finally {\n      this._onEndTileLoading();\n\n      this._onTileLoad(tile, loaded);\n    }\n  }\n\n  _onTileLoadError(tile, error) {\n    this.stats.get(TILES_LOAD_FAILED).incrementCount();\n    const message = error.message || error.toString();\n    const url = tile.url;\n    console.error(\"A 3D tile failed to load: \".concat(tile.url, \" \").concat(message));\n    this.options.onTileError(tile, message, url);\n  }\n\n  _onTileLoad(tile, loaded) {\n    if (!loaded) {\n      return;\n    }\n\n    if (tile && tile.content) {\n      calculateTransformProps(tile, tile.content);\n    }\n\n    this._addTileToCache(tile);\n\n    this.options.onTileLoad(tile);\n  }\n\n  _onStartTileLoading() {\n    this._pendingCount++;\n    this.stats.get(TILES_LOADING).incrementCount();\n  }\n\n  _onEndTileLoading() {\n    this._pendingCount--;\n    this.stats.get(TILES_LOADING).decrementCount();\n  }\n\n  _addTileToCache(tile) {\n    this._cache.add(this, tile, tileset => tileset._updateCacheStats(tile));\n  }\n\n  _updateCacheStats(tile) {\n    this.stats.get(TILES_LOADED).incrementCount();\n    this.stats.get(TILES_IN_MEMORY).incrementCount();\n    this.gpuMemoryUsageInBytes += tile.content.byteLength || 0;\n    this.stats.get(TILES_GPU_MEMORY).count = this.gpuMemoryUsageInBytes;\n  }\n\n  _unloadTile(tile) {\n    this.gpuMemoryUsageInBytes -= tile.content && tile.content.byteLength || 0;\n    this.stats.get(TILES_IN_MEMORY).decrementCount();\n    this.stats.get(TILES_UNLOADED).incrementCount();\n    this.stats.get(TILES_GPU_MEMORY).count = this.gpuMemoryUsageInBytes;\n    this.options.onTileUnload(tile);\n    tile.unloadContent();\n  }\n\n  _destroy() {\n    const stack = [];\n\n    if (this.root) {\n      stack.push(this.root);\n    }\n\n    while (stack.length > 0) {\n      const tile = stack.pop();\n\n      for (const child of tile.children) {\n        stack.push(child);\n      }\n\n      this._destroyTile(tile);\n    }\n\n    this.root = null;\n  }\n\n  _destroySubtree(tile) {\n    const root = tile;\n    const stack = [];\n    stack.push(root);\n\n    while (stack.length > 0) {\n      tile = stack.pop();\n\n      for (const child of tile.children) {\n        stack.push(child);\n      }\n\n      if (tile !== root) {\n        this._destroyTile(tile);\n      }\n    }\n\n    root.children = [];\n  }\n\n  _destroyTile(tile) {\n    this._cache.unloadTile(this, tile);\n\n    this._unloadTile(tile);\n\n    tile.destroy();\n  }\n\n  _initializeCesiumTileset(tilesetJson) {\n    this.asset = tilesetJson.asset;\n\n    if (!this.asset) {\n      throw new Error('Tileset must have an asset property.');\n    }\n\n    if (this.asset.version !== '0.0' && this.asset.version !== '1.0') {\n      throw new Error('The tileset must be 3D Tiles version 0.0 or 1.0.');\n    }\n\n    if ('tilesetVersion' in this.asset) {\n      this._queryParams.v = this.asset.tilesetVersion;\n    }\n\n    this.credits = {\n      attributions: this.options.attributions || []\n    };\n    this.description = this.options.description || '';\n    this.properties = tilesetJson.properties;\n    this.geometricError = tilesetJson.geometricError;\n    this._extensionsUsed = tilesetJson.extensionsUsed;\n    this.extras = tilesetJson.extras;\n  }\n\n  _initializeI3STileset() {\n    if (this.loadOptions.i3s && 'token' in this.loadOptions.i3s) {\n      this._queryParams.token = this.loadOptions.i3s.token;\n    }\n  }\n\n}\n\nfunction getQueryParamString(queryParams) {\n  const queryParamStrings = [];\n\n  for (const key of Object.keys(queryParams)) {\n    queryParamStrings.push(\"\".concat(key, \"=\").concat(queryParams[key]));\n  }\n\n  switch (queryParamStrings.length) {\n    case 0:\n      return '';\n\n    case 1:\n      return \"?\".concat(queryParamStrings[0]);\n\n    default:\n      return \"?\".concat(queryParamStrings.join('&'));\n  }\n}\n//# sourceMappingURL=tileset-3d.js.map","import { Ellipsoid } from '@math.gl/geospatial';\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport { assert } from '@loaders.gl/loader-utils';\nexport function calculateTransformProps(tileHeader, tile) {\n  assert(tileHeader);\n  assert(tile);\n  const {\n    rtcCenter,\n    gltfUpAxis\n  } = tile;\n  const {\n    computedTransform,\n    boundingVolume: {\n      center\n    }\n  } = tileHeader;\n  let modelMatrix = new Matrix4(computedTransform);\n\n  if (rtcCenter) {\n    modelMatrix.translate(rtcCenter);\n  }\n\n  switch (gltfUpAxis) {\n    case 'Z':\n      break;\n\n    case 'Y':\n      const rotationY = new Matrix4().rotateX(Math.PI / 2);\n      modelMatrix = modelMatrix.multiplyRight(rotationY);\n      break;\n\n    case 'X':\n      const rotationX = new Matrix4().rotateY(-Math.PI / 2);\n      modelMatrix = modelMatrix.multiplyRight(rotationX);\n      break;\n\n    default:\n      break;\n  }\n\n  if (tile.isQuantized) {\n    modelMatrix.translate(tile.quantizedVolumeOffset).scale(tile.quantizedVolumeScale);\n  }\n\n  const cartesianOrigin = new Vector3(center);\n  tile.cartesianModelMatrix = modelMatrix;\n  tile.cartesianOrigin = cartesianOrigin;\n  const cartographicOrigin = Ellipsoid.WGS84.cartesianToCartographic(cartesianOrigin, new Vector3());\n  const fromFixedFrameMatrix = Ellipsoid.WGS84.eastNorthUpToFixedFrame(cartesianOrigin);\n  const toFixedFrameMatrix = fromFixedFrameMatrix.invert();\n  tile.cartographicModelMatrix = toFixedFrameMatrix.multiplyRight(modelMatrix);\n  tile.cartographicOrigin = cartographicOrigin;\n  tile.modelMatrix = tile.cartographicModelMatrix;\n}\n//# sourceMappingURL=transform-utils.js.map","export const VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : 'latest';\n//# sourceMappingURL=version.js.map","export const TILE3D_TYPE = {\n  COMPOSITE: 'cmpt',\n  POINT_CLOUD: 'pnts',\n  BATCHED_3D_MODEL: 'b3dm',\n  INSTANCED_3D_MODEL: 'i3dm',\n  GEOMETRY: 'geom',\n  VECTOR: 'vect'\n};\nexport const TILE3D_TYPES = Object.keys(TILE3D_TYPE);\nexport const MAGIC_ARRAY = {\n  BATCHED_MODEL: [98, 51, 100, 109],\n  INSTANCED_MODEL: [105, 51, 100, 109],\n  POINT_CLOUD: [112, 110, 116, 115],\n  COMPOSITE: [99, 109, 112, 116]\n};\nexport const TILE3D_OPTIMIZATION_HINT = {\n  NOT_COMPUTED: -1,\n  USE_OPTIMIZATION: 1,\n  SKIP_OPTIMIZATION: 0\n};\n//# sourceMappingURL=constants.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function getStringFromArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  assert(arrayBuffer instanceof ArrayBuffer);\n  const textDecoder = new TextDecoder('utf8');\n  const typedArray = new Uint8Array(arrayBuffer, byteOffset, byteLength);\n  const string = textDecoder.decode(typedArray);\n  return string;\n}\nexport function getStringFromTypedArray(typedArray) {\n  assert(ArrayBuffer.isView(typedArray));\n  const textDecoder = new TextDecoder('utf8');\n  const string = textDecoder.decode(typedArray);\n  return string;\n}\nexport function getMagicString(arrayBuffer, byteOffset = 0) {\n  const dataView = new DataView(arrayBuffer);\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n//# sourceMappingURL=parse-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../../utils/assert';\nexport default class Schema {\n  constructor(fields, metadata) {\n    _defineProperty(this, \"fields\", void 0);\n\n    _defineProperty(this, \"metadata\", void 0);\n\n    assert(Array.isArray(fields));\n    checkNames(fields);\n    this.fields = fields;\n    this.metadata = metadata || new Map();\n  }\n\n  compareTo(other) {\n    if (this.metadata !== other.metadata) {\n      return false;\n    }\n\n    if (this.fields.length !== other.fields.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.fields.length; ++i) {\n      if (!this.fields[i].compareTo(other.fields[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  select(...columnNames) {\n    const nameMap = Object.create(null);\n\n    for (const name of columnNames) {\n      nameMap[name] = true;\n    }\n\n    const selectedFields = this.fields.filter(field => nameMap[field.name]);\n    return new Schema(selectedFields, this.metadata);\n  }\n\n  selectAt(...columnIndices) {\n    const selectedFields = columnIndices.map(index => this.fields[index]).filter(Boolean);\n    return new Schema(selectedFields, this.metadata);\n  }\n\n  assign(schemaOrFields) {\n    let fields;\n    let metadata = this.metadata;\n\n    if (schemaOrFields instanceof Schema) {\n      const otherSchema = schemaOrFields;\n      fields = otherSchema.fields;\n      metadata = mergeMaps(mergeMaps(new Map(), this.metadata), otherSchema.metadata);\n    } else {\n      fields = schemaOrFields;\n    }\n\n    const fieldMap = Object.create(null);\n\n    for (const field of this.fields) {\n      fieldMap[field.name] = field;\n    }\n\n    for (const field of fields) {\n      fieldMap[field.name] = field;\n    }\n\n    const mergedFields = Object.values(fieldMap);\n    return new Schema(mergedFields, metadata);\n  }\n\n}\n\nfunction checkNames(fields) {\n  const usedNames = {};\n\n  for (const field of fields) {\n    if (usedNames[field.name]) {\n      console.warn('Schema: duplicated field name', field.name, field);\n    }\n\n    usedNames[field.name] = true;\n  }\n}\n\nfunction mergeMaps(m1, m2) {\n  return new Map([...(m1 || new Map()), ...(m2 || new Map())]);\n}\n//# sourceMappingURL=schema.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class Field {\n  constructor(name, type, nullable = false, metadata = new Map()) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"nullable\", void 0);\n\n    _defineProperty(this, \"metadata\", void 0);\n\n    this.name = name;\n    this.type = type;\n    this.nullable = nullable;\n    this.metadata = metadata;\n  }\n\n  get typeId() {\n    return this.type && this.type.typeId;\n  }\n\n  clone() {\n    return new Field(this.name, this.type, this.nullable, this.metadata);\n  }\n\n  compareTo(other) {\n    return this.name === other.name && this.type === other.type && this.nullable === other.nullable && this.metadata === other.metadata;\n  }\n\n  toString() {\n    return \"\".concat(this.type).concat(this.nullable ? ', nullable' : '').concat(this.metadata ? \", metadata: \".concat(this.metadata) : '');\n  }\n\n}\n//# sourceMappingURL=field.js.map","export let Type;\n\n(function (Type) {\n  Type[Type[\"NONE\"] = 0] = \"NONE\";\n  Type[Type[\"Null\"] = 1] = \"Null\";\n  Type[Type[\"Int\"] = 2] = \"Int\";\n  Type[Type[\"Float\"] = 3] = \"Float\";\n  Type[Type[\"Binary\"] = 4] = \"Binary\";\n  Type[Type[\"Utf8\"] = 5] = \"Utf8\";\n  Type[Type[\"Bool\"] = 6] = \"Bool\";\n  Type[Type[\"Decimal\"] = 7] = \"Decimal\";\n  Type[Type[\"Date\"] = 8] = \"Date\";\n  Type[Type[\"Time\"] = 9] = \"Time\";\n  Type[Type[\"Timestamp\"] = 10] = \"Timestamp\";\n  Type[Type[\"Interval\"] = 11] = \"Interval\";\n  Type[Type[\"List\"] = 12] = \"List\";\n  Type[Type[\"Struct\"] = 13] = \"Struct\";\n  Type[Type[\"Union\"] = 14] = \"Union\";\n  Type[Type[\"FixedSizeBinary\"] = 15] = \"FixedSizeBinary\";\n  Type[Type[\"FixedSizeList\"] = 16] = \"FixedSizeList\";\n  Type[Type[\"Map\"] = 17] = \"Map\";\n  Type[Type[\"Dictionary\"] = -1] = \"Dictionary\";\n  Type[Type[\"Int8\"] = -2] = \"Int8\";\n  Type[Type[\"Int16\"] = -3] = \"Int16\";\n  Type[Type[\"Int32\"] = -4] = \"Int32\";\n  Type[Type[\"Int64\"] = -5] = \"Int64\";\n  Type[Type[\"Uint8\"] = -6] = \"Uint8\";\n  Type[Type[\"Uint16\"] = -7] = \"Uint16\";\n  Type[Type[\"Uint32\"] = -8] = \"Uint32\";\n  Type[Type[\"Uint64\"] = -9] = \"Uint64\";\n  Type[Type[\"Float16\"] = -10] = \"Float16\";\n  Type[Type[\"Float32\"] = -11] = \"Float32\";\n  Type[Type[\"Float64\"] = -12] = \"Float64\";\n  Type[Type[\"DateDay\"] = -13] = \"DateDay\";\n  Type[Type[\"DateMillisecond\"] = -14] = \"DateMillisecond\";\n  Type[Type[\"TimestampSecond\"] = -15] = \"TimestampSecond\";\n  Type[Type[\"TimestampMillisecond\"] = -16] = \"TimestampMillisecond\";\n  Type[Type[\"TimestampMicrosecond\"] = -17] = \"TimestampMicrosecond\";\n  Type[Type[\"TimestampNanosecond\"] = -18] = \"TimestampNanosecond\";\n  Type[Type[\"TimeSecond\"] = -19] = \"TimeSecond\";\n  Type[Type[\"TimeMillisecond\"] = -20] = \"TimeMillisecond\";\n  Type[Type[\"TimeMicrosecond\"] = -21] = \"TimeMicrosecond\";\n  Type[Type[\"TimeNanosecond\"] = -22] = \"TimeNanosecond\";\n  Type[Type[\"DenseUnion\"] = -23] = \"DenseUnion\";\n  Type[Type[\"SparseUnion\"] = -24] = \"SparseUnion\";\n  Type[Type[\"IntervalDayTime\"] = -25] = \"IntervalDayTime\";\n  Type[Type[\"IntervalYearMonth\"] = -26] = \"IntervalYearMonth\";\n})(Type || (Type = {}));\n//# sourceMappingURL=enum.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nlet _Symbol$toStringTag, _Symbol$toStringTag2, _Symbol$toStringTag3, _Symbol$toStringTag4, _Symbol$toStringTag5, _Symbol$toStringTag6, _Symbol$toStringTag7;\n\nimport { Type } from './enum';\nexport { Type } from './enum';\nexport class DataType {\n  static isNull(x) {\n    return x && x.typeId === Type.Null;\n  }\n\n  static isInt(x) {\n    return x && x.typeId === Type.Int;\n  }\n\n  static isFloat(x) {\n    return x && x.typeId === Type.Float;\n  }\n\n  static isBinary(x) {\n    return x && x.typeId === Type.Binary;\n  }\n\n  static isUtf8(x) {\n    return x && x.typeId === Type.Utf8;\n  }\n\n  static isBool(x) {\n    return x && x.typeId === Type.Bool;\n  }\n\n  static isDecimal(x) {\n    return x && x.typeId === Type.Decimal;\n  }\n\n  static isDate(x) {\n    return x && x.typeId === Type.Date;\n  }\n\n  static isTime(x) {\n    return x && x.typeId === Type.Time;\n  }\n\n  static isTimestamp(x) {\n    return x && x.typeId === Type.Timestamp;\n  }\n\n  static isInterval(x) {\n    return x && x.typeId === Type.Interval;\n  }\n\n  static isList(x) {\n    return x && x.typeId === Type.List;\n  }\n\n  static isStruct(x) {\n    return x && x.typeId === Type.Struct;\n  }\n\n  static isUnion(x) {\n    return x && x.typeId === Type.Union;\n  }\n\n  static isFixedSizeBinary(x) {\n    return x && x.typeId === Type.FixedSizeBinary;\n  }\n\n  static isFixedSizeList(x) {\n    return x && x.typeId === Type.FixedSizeList;\n  }\n\n  static isMap(x) {\n    return x && x.typeId === Type.Map;\n  }\n\n  static isDictionary(x) {\n    return x && x.typeId === Type.Dictionary;\n  }\n\n  get typeId() {\n    return Type.NONE;\n  }\n\n  compareTo(other) {\n    return this === other;\n  }\n\n}\nexport class Null extends DataType {\n  get typeId() {\n    return Type.Null;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Null';\n  }\n\n  toString() {\n    return 'Null';\n  }\n\n}\nexport class Bool extends DataType {\n  get typeId() {\n    return Type.Bool;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Bool';\n  }\n\n  toString() {\n    return 'Bool';\n  }\n\n}\n_Symbol$toStringTag = Symbol.toStringTag;\nexport class Int extends DataType {\n  constructor(isSigned, bitWidth) {\n    super();\n\n    _defineProperty(this, \"isSigned\", void 0);\n\n    _defineProperty(this, \"bitWidth\", void 0);\n\n    this.isSigned = isSigned;\n    this.bitWidth = bitWidth;\n  }\n\n  get typeId() {\n    return Type.Int;\n  }\n\n  get [_Symbol$toStringTag]() {\n    return 'Int';\n  }\n\n  toString() {\n    return \"\".concat(this.isSigned ? 'I' : 'Ui', \"nt\").concat(this.bitWidth);\n  }\n\n}\nexport class Int8 extends Int {\n  constructor() {\n    super(true, 8);\n  }\n\n}\nexport class Int16 extends Int {\n  constructor() {\n    super(true, 16);\n  }\n\n}\nexport class Int32 extends Int {\n  constructor() {\n    super(true, 32);\n  }\n\n}\nexport class Int64 extends Int {\n  constructor() {\n    super(true, 64);\n  }\n\n}\nexport class Uint8 extends Int {\n  constructor() {\n    super(false, 8);\n  }\n\n}\nexport class Uint16 extends Int {\n  constructor() {\n    super(false, 16);\n  }\n\n}\nexport class Uint32 extends Int {\n  constructor() {\n    super(false, 32);\n  }\n\n}\nexport class Uint64 extends Int {\n  constructor() {\n    super(false, 64);\n  }\n\n}\nconst Precision = {\n  HALF: 16,\n  SINGLE: 32,\n  DOUBLE: 64\n};\n_Symbol$toStringTag2 = Symbol.toStringTag;\nexport class Float extends DataType {\n  constructor(precision) {\n    super();\n\n    _defineProperty(this, \"precision\", void 0);\n\n    this.precision = precision;\n  }\n\n  get typeId() {\n    return Type.Float;\n  }\n\n  get [_Symbol$toStringTag2]() {\n    return 'Float';\n  }\n\n  toString() {\n    return \"Float\".concat(this.precision);\n  }\n\n}\nexport class Float16 extends Float {\n  constructor() {\n    super(Precision.HALF);\n  }\n\n}\nexport class Float32 extends Float {\n  constructor() {\n    super(Precision.SINGLE);\n  }\n\n}\nexport class Float64 extends Float {\n  constructor() {\n    super(Precision.DOUBLE);\n  }\n\n}\nexport class Binary extends DataType {\n  constructor() {\n    super();\n  }\n\n  get typeId() {\n    return Type.Binary;\n  }\n\n  toString() {\n    return 'Binary';\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Binary';\n  }\n\n}\nexport class Utf8 extends DataType {\n  get typeId() {\n    return Type.Utf8;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Utf8';\n  }\n\n  toString() {\n    return 'Utf8';\n  }\n\n}\nconst DateUnit = {\n  DAY: 0,\n  MILLISECOND: 1\n};\n_Symbol$toStringTag3 = Symbol.toStringTag;\nexport class Date extends DataType {\n  constructor(unit) {\n    super();\n\n    _defineProperty(this, \"unit\", void 0);\n\n    this.unit = unit;\n  }\n\n  get typeId() {\n    return Type.Date;\n  }\n\n  get [_Symbol$toStringTag3]() {\n    return 'Date';\n  }\n\n  toString() {\n    return \"Date\".concat((this.unit + 1) * 32, \"<\").concat(DateUnit[this.unit], \">\");\n  }\n\n}\nexport class DateDay extends Date {\n  constructor() {\n    super(DateUnit.DAY);\n  }\n\n}\nexport class DateMillisecond extends Date {\n  constructor() {\n    super(DateUnit.MILLISECOND);\n  }\n\n}\nconst TimeUnit = {\n  SECOND: 1,\n  MILLISECOND: 1e3,\n  MICROSECOND: 1e6,\n  NANOSECOND: 1e9\n};\n_Symbol$toStringTag4 = Symbol.toStringTag;\nexport class Time extends DataType {\n  constructor(unit, bitWidth) {\n    super();\n\n    _defineProperty(this, \"unit\", void 0);\n\n    _defineProperty(this, \"bitWidth\", void 0);\n\n    this.unit = unit;\n    this.bitWidth = bitWidth;\n  }\n\n  get typeId() {\n    return Type.Time;\n  }\n\n  toString() {\n    return \"Time\".concat(this.bitWidth, \"<\").concat(TimeUnit[this.unit], \">\");\n  }\n\n  get [_Symbol$toStringTag4]() {\n    return 'Time';\n  }\n\n}\nexport class TimeSecond extends Time {\n  constructor() {\n    super(TimeUnit.SECOND, 32);\n  }\n\n}\nexport class TimeMillisecond extends Time {\n  constructor() {\n    super(TimeUnit.MILLISECOND, 32);\n  }\n\n}\n_Symbol$toStringTag5 = Symbol.toStringTag;\nexport class Timestamp extends DataType {\n  constructor(unit, timezone = null) {\n    super();\n\n    _defineProperty(this, \"unit\", void 0);\n\n    _defineProperty(this, \"timezone\", void 0);\n\n    this.unit = unit;\n    this.timezone = timezone;\n  }\n\n  get typeId() {\n    return Type.Timestamp;\n  }\n\n  get [_Symbol$toStringTag5]() {\n    return 'Timestamp';\n  }\n\n  toString() {\n    return \"Timestamp<\".concat(TimeUnit[this.unit]).concat(this.timezone ? \", \".concat(this.timezone) : '', \">\");\n  }\n\n}\nexport class TimestampSecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.SECOND, timezone);\n  }\n\n}\nexport class TimestampMillisecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.MILLISECOND, timezone);\n  }\n\n}\nexport class TimestampMicrosecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.MICROSECOND, timezone);\n  }\n\n}\nexport class TimestampNanosecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.NANOSECOND, timezone);\n  }\n\n}\nconst IntervalUnit = {\n  DAY_TIME: 0,\n  YEAR_MONTH: 1\n};\n_Symbol$toStringTag6 = Symbol.toStringTag;\nexport class Interval extends DataType {\n  constructor(unit) {\n    super();\n\n    _defineProperty(this, \"unit\", void 0);\n\n    this.unit = unit;\n  }\n\n  get typeId() {\n    return Type.Interval;\n  }\n\n  get [_Symbol$toStringTag6]() {\n    return 'Interval';\n  }\n\n  toString() {\n    return \"Interval<\".concat(IntervalUnit[this.unit], \">\");\n  }\n\n}\nexport class IntervalDayTime extends Interval {\n  constructor() {\n    super(IntervalUnit.DAY_TIME);\n  }\n\n}\nexport class IntervalYearMonth extends Interval {\n  constructor() {\n    super(IntervalUnit.YEAR_MONTH);\n  }\n\n}\n_Symbol$toStringTag7 = Symbol.toStringTag;\nexport class FixedSizeList extends DataType {\n  constructor(listSize, child) {\n    super();\n\n    _defineProperty(this, \"listSize\", void 0);\n\n    _defineProperty(this, \"children\", void 0);\n\n    this.listSize = listSize;\n    this.children = [child];\n  }\n\n  get typeId() {\n    return Type.FixedSizeList;\n  }\n\n  get valueType() {\n    return this.children[0].type;\n  }\n\n  get valueField() {\n    return this.children[0];\n  }\n\n  get [_Symbol$toStringTag7]() {\n    return 'FixedSizeList';\n  }\n\n  toString() {\n    return \"FixedSizeList[\".concat(this.listSize, \"]<\").concat(this.valueType, \">\");\n  }\n\n}\n//# sourceMappingURL=type.js.map","import { Schema, Field, FixedSizeList, getArrowTypeFromTypedArray } from '@loaders.gl/schema';\nexport function makeSchemaFromAttributes(attributes, loaderData, indices) {\n  const metadataMap = makeMetadata(loaderData.metadata);\n  const fields = [];\n  const namedLoaderDataAttributes = transformAttributesLoaderData(loaderData.attributes);\n\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName];\n    const field = getArrowFieldFromAttribute(attributeName, attribute, namedLoaderDataAttributes[attributeName]);\n    fields.push(field);\n  }\n\n  if (indices) {\n    const indicesField = getArrowFieldFromAttribute('indices', indices);\n    fields.push(indicesField);\n  }\n\n  return new Schema(fields, metadataMap);\n}\n\nfunction transformAttributesLoaderData(loaderData) {\n  const result = {};\n\n  for (const key in loaderData) {\n    const dracoAttribute = loaderData[key];\n    result[dracoAttribute.name || 'undefined'] = dracoAttribute;\n  }\n\n  return result;\n}\n\nfunction getArrowFieldFromAttribute(attributeName, attribute, loaderData) {\n  const metadataMap = loaderData ? makeMetadata(loaderData.metadata) : undefined;\n  const type = getArrowTypeFromTypedArray(attribute.value);\n  return new Field(attributeName, new FixedSizeList(attribute.size, new Field('value', type)), false, metadataMap);\n}\n\nfunction makeMetadata(metadata) {\n  const metadataMap = new Map();\n\n  for (const key in metadata) {\n    metadataMap.set(\"\".concat(key, \".string\"), JSON.stringify(metadata[key]));\n  }\n\n  return metadataMap;\n}\n//# sourceMappingURL=schema-attribute-utils.js.map","import { Float32, Float64, Int16, Int32, Int8, Uint16, Uint32, Uint8 } from '../schema/classes/type';\nexport function getArrowTypeFromTypedArray(array) {\n  switch (array.constructor) {\n    case Int8Array:\n      return new Int8();\n\n    case Uint8Array:\n      return new Uint8();\n\n    case Int16Array:\n      return new Int16();\n\n    case Uint16Array:\n      return new Uint16();\n\n    case Int32Array:\n      return new Int32();\n\n    case Uint32Array:\n      return new Uint32();\n\n    case Float32Array:\n      return new Float32();\n\n    case Float64Array:\n      return new Float64();\n\n    default:\n      throw new Error('array type not supported');\n  }\n}\n//# sourceMappingURL=type-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getMeshBoundingBox } from '@loaders.gl/loader-utils';\nimport { makeSchemaFromAttributes } from './utils/schema-attribute-utils';\nconst GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nconst DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nconst DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\nconst INDEX_ITEM_SIZE = 4;\nexport default class DracoParser {\n  constructor(draco) {\n    _defineProperty(this, \"draco\", void 0);\n\n    _defineProperty(this, \"decoder\", void 0);\n\n    _defineProperty(this, \"metadataQuerier\", void 0);\n\n    this.draco = draco;\n    this.decoder = new this.draco.Decoder();\n    this.metadataQuerier = new this.draco.MetadataQuerier();\n  }\n\n  destroy() {\n    this.draco.destroy(this.decoder);\n    this.draco.destroy(this.metadataQuerier);\n  }\n\n  parseSync(arrayBuffer, options = {}) {\n    const buffer = new this.draco.DecoderBuffer();\n    buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n\n    this._disableAttributeTransforms(options);\n\n    const geometry_type = this.decoder.GetEncodedGeometryType(buffer);\n    const dracoGeometry = geometry_type === this.draco.TRIANGULAR_MESH ? new this.draco.Mesh() : new this.draco.PointCloud();\n\n    try {\n      let dracoStatus;\n\n      switch (geometry_type) {\n        case this.draco.TRIANGULAR_MESH:\n          dracoStatus = this.decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n          break;\n\n        case this.draco.POINT_CLOUD:\n          dracoStatus = this.decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n          break;\n\n        default:\n          throw new Error('DRACO: Unknown geometry type.');\n      }\n\n      if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n        const message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n        throw new Error(message);\n      }\n\n      const loaderData = this._getDracoLoaderData(dracoGeometry, geometry_type, options);\n\n      const geometry = this._getMeshData(dracoGeometry, loaderData, options);\n\n      const boundingBox = getMeshBoundingBox(geometry.attributes);\n      const schema = makeSchemaFromAttributes(geometry.attributes, loaderData, geometry.indices);\n      const data = {\n        loader: 'draco',\n        loaderData,\n        header: {\n          vertexCount: dracoGeometry.num_points(),\n          boundingBox\n        },\n        ...geometry,\n        schema\n      };\n      return data;\n    } finally {\n      this.draco.destroy(buffer);\n\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry);\n      }\n    }\n  }\n\n  _getDracoLoaderData(dracoGeometry, geometry_type, options) {\n    const metadata = this._getTopLevelMetadata(dracoGeometry);\n\n    const attributes = this._getDracoAttributes(dracoGeometry, options);\n\n    return {\n      geometry_type,\n      num_attributes: dracoGeometry.num_attributes(),\n      num_points: dracoGeometry.num_points(),\n      num_faces: dracoGeometry instanceof this.draco.Mesh ? dracoGeometry.num_faces() : 0,\n      metadata,\n      attributes\n    };\n  }\n\n  _getDracoAttributes(dracoGeometry, options) {\n    const dracoAttributes = {};\n\n    for (let attributeId = 0; attributeId < dracoGeometry.num_attributes(); attributeId++) {\n      const dracoAttribute = this.decoder.GetAttribute(dracoGeometry, attributeId);\n\n      const metadata = this._getAttributeMetadata(dracoGeometry, attributeId);\n\n      dracoAttributes[dracoAttribute.unique_id()] = {\n        unique_id: dracoAttribute.unique_id(),\n        attribute_type: dracoAttribute.attribute_type(),\n        data_type: dracoAttribute.data_type(),\n        num_components: dracoAttribute.num_components(),\n        byte_offset: dracoAttribute.byte_offset(),\n        byte_stride: dracoAttribute.byte_stride(),\n        normalized: dracoAttribute.normalized(),\n        metadata\n      };\n\n      const quantization = this._getQuantizationTransform(dracoAttribute, options);\n\n      if (quantization) {\n        dracoAttributes[dracoAttribute.unique_id()].quantization_transform = quantization;\n      }\n\n      const octahedron = this._getOctahedronTransform(dracoAttribute, options);\n\n      if (octahedron) {\n        dracoAttributes[dracoAttribute.unique_id()].octahedron_transform = octahedron;\n      }\n    }\n\n    return dracoAttributes;\n  }\n\n  _getMeshData(dracoGeometry, loaderData, options) {\n    const attributes = this._getMeshAttributes(loaderData, dracoGeometry, options);\n\n    const positionAttribute = attributes.POSITION;\n\n    if (!positionAttribute) {\n      throw new Error('DRACO: No position attribute found.');\n    }\n\n    if (dracoGeometry instanceof this.draco.Mesh) {\n      switch (options.topology) {\n        case 'triangle-strip':\n          return {\n            topology: 'triangle-strip',\n            mode: 4,\n            attributes,\n            indices: {\n              value: this._getTriangleStripIndices(dracoGeometry),\n              size: 1\n            }\n          };\n\n        case 'triangle-list':\n        default:\n          return {\n            topology: 'triangle-list',\n            mode: 5,\n            attributes,\n            indices: {\n              value: this._getTriangleListIndices(dracoGeometry),\n              size: 1\n            }\n          };\n      }\n    }\n\n    return {\n      topology: 'point-list',\n      mode: 0,\n      attributes\n    };\n  }\n\n  _getMeshAttributes(loaderData, dracoGeometry, options) {\n    const attributes = {};\n\n    for (const loaderAttribute of Object.values(loaderData.attributes)) {\n      const attributeName = this._deduceAttributeName(loaderAttribute, options);\n\n      loaderAttribute.name = attributeName;\n\n      const {\n        value,\n        size\n      } = this._getAttributeValues(dracoGeometry, loaderAttribute);\n\n      attributes[attributeName] = {\n        value,\n        size,\n        byteOffset: loaderAttribute.byte_offset,\n        byteStride: loaderAttribute.byte_stride,\n        normalized: loaderAttribute.normalized\n      };\n    }\n\n    return attributes;\n  }\n\n  _getTriangleListIndices(dracoGeometry) {\n    const numFaces = dracoGeometry.num_faces();\n    const numIndices = numFaces * 3;\n    const byteLength = numIndices * INDEX_ITEM_SIZE;\n\n    const ptr = this.draco._malloc(byteLength);\n\n    try {\n      this.decoder.GetTrianglesUInt32Array(dracoGeometry, byteLength, ptr);\n      return new Uint32Array(this.draco.HEAPF32.buffer, ptr, numIndices).slice();\n    } finally {\n      this.draco._free(ptr);\n    }\n  }\n\n  _getTriangleStripIndices(dracoGeometry) {\n    const dracoArray = new this.draco.DracoInt32Array();\n\n    try {\n      this.decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      return getUint32Array(dracoArray);\n    } finally {\n      this.draco.destroy(dracoArray);\n    }\n  }\n\n  _getAttributeValues(dracoGeometry, attribute) {\n    const TypedArrayCtor = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[attribute.data_type];\n    const numComponents = attribute.num_components;\n    const numPoints = dracoGeometry.num_points();\n    const numValues = numPoints * numComponents;\n    const byteLength = numValues * TypedArrayCtor.BYTES_PER_ELEMENT;\n    const dataType = getDracoDataType(this.draco, TypedArrayCtor);\n    let value;\n\n    const ptr = this.draco._malloc(byteLength);\n\n    try {\n      const dracoAttribute = this.decoder.GetAttribute(dracoGeometry, attribute.unique_id);\n      this.decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, dracoAttribute, dataType, byteLength, ptr);\n      value = new TypedArrayCtor(this.draco.HEAPF32.buffer, ptr, numValues).slice();\n    } finally {\n      this.draco._free(ptr);\n    }\n\n    return {\n      value,\n      size: numComponents\n    };\n  }\n\n  _deduceAttributeName(attribute, options) {\n    const uniqueId = attribute.unique_id;\n\n    for (const [attributeName, attributeUniqueId] of Object.entries(options.extraAttributes || {})) {\n      if (attributeUniqueId === uniqueId) {\n        return attributeName;\n      }\n    }\n\n    const thisAttributeType = attribute.attribute_type;\n\n    for (const dracoAttributeConstant in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n      const attributeType = this.draco[dracoAttributeConstant];\n\n      if (attributeType === thisAttributeType) {\n        return DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[dracoAttributeConstant];\n      }\n    }\n\n    const entryName = options.attributeNameEntry || 'name';\n\n    if (attribute.metadata[entryName]) {\n      return attribute.metadata[entryName].string;\n    }\n\n    return \"CUSTOM_ATTRIBUTE_\".concat(uniqueId);\n  }\n\n  _getTopLevelMetadata(dracoGeometry) {\n    const dracoMetadata = this.decoder.GetMetadata(dracoGeometry);\n    return this._getDracoMetadata(dracoMetadata);\n  }\n\n  _getAttributeMetadata(dracoGeometry, attributeId) {\n    const dracoMetadata = this.decoder.GetAttributeMetadata(dracoGeometry, attributeId);\n    return this._getDracoMetadata(dracoMetadata);\n  }\n\n  _getDracoMetadata(dracoMetadata) {\n    if (!dracoMetadata || !dracoMetadata.ptr) {\n      return {};\n    }\n\n    const result = {};\n    const numEntries = this.metadataQuerier.NumEntries(dracoMetadata);\n\n    for (let entryIndex = 0; entryIndex < numEntries; entryIndex++) {\n      const entryName = this.metadataQuerier.GetEntryName(dracoMetadata, entryIndex);\n      result[entryName] = this._getDracoMetadataField(dracoMetadata, entryName);\n    }\n\n    return result;\n  }\n\n  _getDracoMetadataField(dracoMetadata, entryName) {\n    const dracoArray = new this.draco.DracoInt32Array();\n\n    try {\n      this.metadataQuerier.GetIntEntryArray(dracoMetadata, entryName, dracoArray);\n      const intArray = getInt32Array(dracoArray);\n      return {\n        int: this.metadataQuerier.GetIntEntry(dracoMetadata, entryName),\n        string: this.metadataQuerier.GetStringEntry(dracoMetadata, entryName),\n        double: this.metadataQuerier.GetDoubleEntry(dracoMetadata, entryName),\n        intArray\n      };\n    } finally {\n      this.draco.destroy(dracoArray);\n    }\n  }\n\n  _disableAttributeTransforms(options) {\n    const {\n      quantizedAttributes = [],\n      octahedronAttributes = []\n    } = options;\n    const skipAttributes = [...quantizedAttributes, ...octahedronAttributes];\n\n    for (const dracoAttributeName of skipAttributes) {\n      this.decoder.SkipAttributeTransform(this.draco[dracoAttributeName]);\n    }\n  }\n\n  _getQuantizationTransform(dracoAttribute, options) {\n    const {\n      quantizedAttributes = []\n    } = options;\n    const attribute_type = dracoAttribute.attribute_type();\n    const skip = quantizedAttributes.map(type => this.decoder[type]).includes(attribute_type);\n\n    if (skip) {\n      const transform = new this.draco.AttributeQuantizationTransform();\n\n      try {\n        if (transform.InitFromAttribute(dracoAttribute)) {\n          return {\n            quantization_bits: transform.quantization_bits(),\n            range: transform.range(),\n            min_values: new Float32Array([1, 2, 3]).map(i => transform.min_value(i))\n          };\n        }\n      } finally {\n        this.draco.destroy(transform);\n      }\n    }\n\n    return null;\n  }\n\n  _getOctahedronTransform(dracoAttribute, options) {\n    const {\n      octahedronAttributes = []\n    } = options;\n    const attribute_type = dracoAttribute.attribute_type();\n    const octahedron = octahedronAttributes.map(type => this.decoder[type]).includes(attribute_type);\n\n    if (octahedron) {\n      const transform = new this.draco.AttributeQuantizationTransform();\n\n      try {\n        if (transform.InitFromAttribute(dracoAttribute)) {\n          return {\n            quantization_bits: transform.quantization_bits()\n          };\n        }\n      } finally {\n        this.draco.destroy(transform);\n      }\n    }\n\n    return null;\n  }\n\n}\n\nfunction getDracoDataType(draco, attributeType) {\n  switch (attributeType) {\n    case Float32Array:\n      return draco.DT_FLOAT32;\n\n    case Int8Array:\n      return draco.DT_INT8;\n\n    case Int16Array:\n      return draco.DT_INT16;\n\n    case Int32Array:\n      return draco.DT_INT32;\n\n    case Uint8Array:\n      return draco.DT_UINT8;\n\n    case Uint16Array:\n      return draco.DT_UINT16;\n\n    case Uint32Array:\n      return draco.DT_UINT32;\n\n    default:\n      return draco.DT_INVALID;\n  }\n}\n\nfunction getInt32Array(dracoArray) {\n  const numValues = dracoArray.size();\n  const intArray = new Int32Array(numValues);\n\n  for (let i = 0; i < numValues; i++) {\n    intArray[i] = dracoArray.GetValue(i);\n  }\n\n  return intArray;\n}\n\nfunction getUint32Array(dracoArray) {\n  const numValues = dracoArray.size();\n  const intArray = new Int32Array(numValues);\n\n  for (let i = 0; i < numValues; i++) {\n    intArray[i] = dracoArray.GetValue(i);\n  }\n\n  return intArray;\n}\n//# sourceMappingURL=draco-parser.js.map","export function getMeshSize(attributes) {\n  let size = 0;\n\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName];\n\n    if (ArrayBuffer.isView(attribute)) {\n      size += attribute.byteLength * attribute.BYTES_PER_ELEMENT;\n    }\n  }\n\n  return size;\n}\nexport function getMeshBoundingBox(attributes) {\n  let minX = Infinity;\n  let minY = Infinity;\n  let minZ = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  let maxZ = -Infinity;\n  const positions = attributes.POSITION ? attributes.POSITION.value : [];\n  const len = positions && positions.length;\n\n  for (let i = 0; i < len; i += 3) {\n    const x = positions[i];\n    const y = positions[i + 1];\n    const z = positions[i + 2];\n    minX = x < minX ? x : minX;\n    minY = y < minY ? y : minY;\n    minZ = z < minZ ? z : minZ;\n    maxX = x > maxX ? x : maxX;\n    maxY = y > maxY ? y : maxY;\n    maxZ = z > maxZ ? z : maxZ;\n  }\n\n  return [[minX, minY, minZ], [maxX, maxY, maxZ]];\n}\n//# sourceMappingURL=mesh-utils.js.map","import { loadLibrary } from '@loaders.gl/worker-utils';\nconst DRACO_VERSION = '1.4.1';\nconst DRACO_JS_DECODER_URL = \"https://www.gstatic.com/draco/versioned/decoders/\".concat(DRACO_VERSION, \"/draco_decoder.js\");\nconst DRACO_WASM_WRAPPER_URL = \"https://www.gstatic.com/draco/versioned/decoders/\".concat(DRACO_VERSION, \"/draco_wasm_wrapper.js\");\nconst DRACO_WASM_DECODER_URL = \"https://www.gstatic.com/draco/versioned/decoders/\".concat(DRACO_VERSION, \"/draco_decoder.wasm\");\nconst DRACO_ENCODER_URL = \"https://raw.githubusercontent.com/google/draco/\".concat(DRACO_VERSION, \"/javascript/draco_encoder.js\");\nlet loadDecoderPromise;\nlet loadEncoderPromise;\nexport async function loadDracoDecoderModule(options) {\n  const modules = options.modules || {};\n\n  if (modules.draco3d) {\n    loadDecoderPromise = loadDecoderPromise || modules.draco3d.createDecoderModule({}).then(draco => {\n      return {\n        draco\n      };\n    });\n  } else {\n    loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n  }\n\n  return await loadDecoderPromise;\n}\nexport async function loadDracoEncoderModule(options) {\n  const modules = options.modules || {};\n\n  if (modules.draco3d) {\n    loadEncoderPromise = loadEncoderPromise || modules.draco3d.createEncoderModule({}).then(draco => {\n      return {\n        draco\n      };\n    });\n  } else {\n    loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n  }\n\n  return await loadEncoderPromise;\n}\n\nasync function loadDracoDecoder(options) {\n  let DracoDecoderModule;\n  let wasmBinary;\n\n  switch (options.draco && options.draco.decoderType) {\n    case 'js':\n      DracoDecoderModule = await loadLibrary(DRACO_JS_DECODER_URL, 'draco', options);\n      break;\n\n    case 'wasm':\n    default:\n      [DracoDecoderModule, wasmBinary] = await Promise.all([await loadLibrary(DRACO_WASM_WRAPPER_URL, 'draco', options), await loadLibrary(DRACO_WASM_DECODER_URL, 'draco', options)]);\n  }\n\n  DracoDecoderModule = DracoDecoderModule || globalThis.DracoDecoderModule;\n  return await initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  const options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(resolve => {\n    DracoDecoderModule({ ...options,\n      onModuleLoaded: draco => resolve({\n        draco\n      })\n    });\n  });\n}\n\nasync function loadDracoEncoder(options) {\n  let DracoEncoderModule = await loadLibrary(DRACO_ENCODER_URL, 'draco', options);\n  DracoEncoderModule = DracoEncoderModule || globalThis.DracoEncoderModule;\n  return new Promise(resolve => {\n    DracoEncoderModule({\n      onModuleLoaded: draco => resolve({\n        draco\n      })\n    });\n  });\n}\n//# sourceMappingURL=draco-module-loader.js.map","export const VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : 'latest';\n//# sourceMappingURL=version.js.map","import DracoParser from './lib/draco-parser';\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport { VERSION } from './lib/utils/version';\nconst DEFAULT_DRACO_OPTIONS = {\n  draco: {\n    decoderType: typeof WebAssembly === 'object' ? 'wasm' : 'js',\n    libraryPath: 'libs/',\n    extraAttributes: {},\n    attributeNameEntry: undefined\n  }\n};\nexport const DracoWorkerLoader = {\n  name: 'Draco',\n  id: 'draco',\n  module: 'draco',\n  version: VERSION,\n  worker: true,\n  extensions: ['drc'],\n  mimeTypes: ['application/octet-stream'],\n  binary: true,\n  tests: ['DRACO'],\n  options: DEFAULT_DRACO_OPTIONS\n};\nexport const DracoLoader = { ...DracoWorkerLoader,\n  parse\n};\n\nasync function parse(arrayBuffer, options) {\n  const {\n    draco\n  } = await loadDracoDecoderModule(options);\n  const dracoParser = new DracoParser(draco);\n\n  try {\n    return dracoParser.parseSync(arrayBuffer, options === null || options === void 0 ? void 0 : options.draco);\n  } finally {\n    dracoParser.destroy();\n  }\n}\n\nexport const _TypecheckDracoWorkerLoader = DracoWorkerLoader;\nexport const _TypecheckDracoLoader = DracoLoader;\n//# sourceMappingURL=draco-loader.js.map","export const GL_PRIMITIVE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  TRIANGLES: 0x0004\n};\nexport const GL_PRIMITIVE_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport const GL_TYPE = {\n  BYTE: 5120,\n  UNSIGNED_BYTE: 5121,\n  SHORT: 5122,\n  UNSIGNED_SHORT: 5123,\n  INT: 5124,\n  UNSIGNED_INT: 5125,\n  FLOAT: 5126,\n  DOUBLE: 5130\n};\nexport const GL = { ...GL_PRIMITIVE_MODE,\n  ...GL_TYPE\n};\n//# sourceMappingURL=constants.js.map","import { GL_TYPE as GL } from '../constants';\nconst GL_TYPE_TO_ARRAY_TYPE = {\n  [GL.DOUBLE]: Float64Array,\n  [GL.FLOAT]: Float32Array,\n  [GL.UNSIGNED_SHORT]: Uint16Array,\n  [GL.UNSIGNED_INT]: Uint32Array,\n  [GL.UNSIGNED_BYTE]: Uint8Array,\n  [GL.BYTE]: Int8Array,\n  [GL.SHORT]: Int16Array,\n  [GL.INT]: Int32Array\n};\nconst NAME_TO_GL_TYPE = {\n  DOUBLE: GL.DOUBLE,\n  FLOAT: GL.FLOAT,\n  UNSIGNED_SHORT: GL.UNSIGNED_SHORT,\n  UNSIGNED_INT: GL.UNSIGNED_INT,\n  UNSIGNED_BYTE: GL.UNSIGNED_BYTE,\n  BYTE: GL.BYTE,\n  SHORT: GL.SHORT,\n  INT: GL.INT\n};\nconst ERR_TYPE_CONVERSION = 'Failed to convert GL type';\nexport default class GLType {\n  static fromTypedArray(arrayOrType) {\n    arrayOrType = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n    for (const glType in GL_TYPE_TO_ARRAY_TYPE) {\n      const ArrayType = GL_TYPE_TO_ARRAY_TYPE[glType];\n\n      if (ArrayType === arrayOrType) {\n        return glType;\n      }\n    }\n\n    throw new Error(ERR_TYPE_CONVERSION);\n  }\n\n  static fromName(name) {\n    const glType = NAME_TO_GL_TYPE[name];\n\n    if (!glType) {\n      throw new Error(ERR_TYPE_CONVERSION);\n    }\n\n    return glType;\n  }\n\n  static getArrayType(glType, clamped = false) {\n    switch (glType) {\n      case GL.UNSIGNED_SHORT_5_6_5:\n      case GL.UNSIGNED_SHORT_4_4_4_4:\n      case GL.UNSIGNED_SHORT_5_5_5_1:\n        return Uint16Array;\n\n      default:\n        const ArrayType = GL_TYPE_TO_ARRAY_TYPE[glType];\n\n        if (!ArrayType) {\n          throw new Error(ERR_TYPE_CONVERSION);\n        }\n\n        return ArrayType;\n    }\n  }\n\n  static getByteSize(glType) {\n    const ArrayType = GLType.getArrayType(glType);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static validate(glType) {\n    return Boolean(GLType.getArrayType(glType));\n  }\n\n  static createTypedArray(glType, buffer, byteOffset = 0, length) {\n    if (length === undefined) {\n      length = (buffer.byteLength - byteOffset) / GLType.getByteSize(glType);\n    }\n\n    const ArrayType = GLType.getArrayType(glType);\n    return new ArrayType(buffer, byteOffset, length);\n  }\n\n}\n//# sourceMappingURL=gl-type.js.map","export function decodeRGB565(rgb565, target = [0, 0, 0]) {\n  const r5 = rgb565 >> 11 & 31;\n  const g6 = rgb565 >> 5 & 63;\n  const b5 = rgb565 & 31;\n  target[0] = r5 << 3;\n  target[1] = g6 << 2;\n  target[2] = b5 << 3;\n  return target;\n}\nexport function encodeRGB565(rgb) {\n  const r5 = Math.floor(rgb[0] / 8) + 4;\n  const g6 = Math.floor(rgb[1] / 4) + 2;\n  const b5 = Math.floor(rgb[2] / 8) + 4;\n  return r5 + (g6 << 5) + (b5 << 11);\n}\n//# sourceMappingURL=rgb565.js.map","import { Vector2, Vector3, clamp, _MathUtils } from '@math.gl/core';\nimport { assert } from '../utils/assert';\nconst RIGHT_SHIFT = 1.0 / 256.0;\nconst LEFT_SHIFT = 256.0;\nconst scratchVector2 = new Vector2();\nconst scratchVector3 = new Vector3();\nconst scratchEncodeVector2 = new Vector2();\nconst octEncodeScratch = new Vector2();\nconst uint8ForceArray = new Uint8Array(1);\n\nfunction forceUint8(value) {\n  uint8ForceArray[0] = value;\n  return uint8ForceArray[0];\n}\n\nfunction fromSNorm(value, rangeMaximum = 255) {\n  return clamp(value, 0.0, rangeMaximum) / rangeMaximum * 2.0 - 1.0;\n}\n\nfunction toSNorm(value, rangeMaximum = 255) {\n  return Math.round((clamp(value, -1.0, 1.0) * 0.5 + 0.5) * rangeMaximum);\n}\n\nfunction signNotZero(value) {\n  return value < 0.0 ? -1.0 : 1.0;\n}\n\nexport function octEncodeInRange(vector, rangeMax, result) {\n  assert(vector);\n  assert(result);\n  const vector3 = scratchVector3.from(vector);\n  assert(Math.abs(vector3.magnitudeSquared() - 1.0) <= _MathUtils.EPSILON6);\n  result.x = vector.x / (Math.abs(vector.x) + Math.abs(vector.y) + Math.abs(vector.z));\n  result.y = vector.y / (Math.abs(vector.x) + Math.abs(vector.y) + Math.abs(vector.z));\n\n  if (vector.z < 0) {\n    const x = result.x;\n    const y = result.y;\n    result.x = (1.0 - Math.abs(y)) * signNotZero(x);\n    result.y = (1.0 - Math.abs(x)) * signNotZero(y);\n  }\n\n  result.x = toSNorm(result.x, rangeMax);\n  result.y = toSNorm(result.y, rangeMax);\n  return result;\n}\nexport function octEncode(vector, result) {\n  return octEncodeInRange(vector, 255, result);\n}\nexport function octEncodeToVector4(vector, result) {\n  octEncodeInRange(vector, 65535, octEncodeScratch);\n  result.x = forceUint8(octEncodeScratch.x * RIGHT_SHIFT);\n  result.y = forceUint8(octEncodeScratch.x);\n  result.z = forceUint8(octEncodeScratch.y * RIGHT_SHIFT);\n  result.w = forceUint8(octEncodeScratch.y);\n  return result;\n}\nexport function octDecodeInRange(x, y, rangeMax, result) {\n  assert(result);\n\n  if (x < 0 || x > rangeMax || y < 0 || y > rangeMax) {\n    throw new Error(\"x and y must be unsigned normalized integers between 0 and \".concat(rangeMax));\n  }\n\n  result.x = fromSNorm(x, rangeMax);\n  result.y = fromSNorm(y, rangeMax);\n  result.z = 1.0 - (Math.abs(result.x) + Math.abs(result.y));\n\n  if (result.z < 0.0) {\n    const oldVX = result.x;\n    result.x = (1.0 - Math.abs(result.y)) * signNotZero(oldVX);\n    result.y = (1.0 - Math.abs(oldVX)) * signNotZero(result.y);\n  }\n\n  return result.normalize();\n}\nexport function octDecode(x, y, result) {\n  return octDecodeInRange(x, y, 255, result);\n}\nexport function octDecodeFromVector4(encoded, result) {\n  assert(encoded);\n  assert(result);\n  const x = encoded.x;\n  const y = encoded.y;\n  const z = encoded.z;\n  const w = encoded.w;\n\n  if (x < 0 || x > 255 || y < 0 || y > 255 || z < 0 || z > 255 || w < 0 || w > 255) {\n    throw new Error('x, y, z, and w must be unsigned normalized integers between 0 and 255');\n  }\n\n  const xOct16 = x * LEFT_SHIFT + y;\n  const yOct16 = z * LEFT_SHIFT + w;\n  return octDecodeInRange(xOct16, yOct16, 65535, result);\n}\nexport function octPackFloat(encoded) {\n  const vector2 = scratchVector2.from(encoded);\n  return 256.0 * vector2.x + vector2.y;\n}\nexport function octEncodeFloat(vector) {\n  octEncode(vector, scratchEncodeVector2);\n  return octPackFloat(scratchEncodeVector2);\n}\nexport function octDecodeFloat(value, result) {\n  assert(Number.isFinite(value));\n  const temp = value / 256.0;\n  const x = Math.floor(temp);\n  const y = (temp - x) * 256.0;\n  return octDecode(x, y, result);\n}\nexport function octPack(v1, v2, v3, result) {\n  assert(v1);\n  assert(v2);\n  assert(v3);\n  assert(result);\n  const encoded1 = octEncodeFloat(v1);\n  const encoded2 = octEncodeFloat(v2);\n  const encoded3 = octEncode(v3, scratchEncodeVector2);\n  result.x = 65536.0 * encoded3.x + encoded1;\n  result.y = 65536.0 * encoded3.y + encoded2;\n  return result;\n}\nexport function octUnpack(packed, v1, v2, v3) {\n  let temp = packed.x / 65536.0;\n  const x = Math.floor(temp);\n  const encodedFloat1 = (temp - x) * 65536.0;\n  temp = packed.y / 65536.0;\n  const y = Math.floor(temp);\n  const encodedFloat2 = (temp - y) * 65536.0;\n  octDecodeFloat(encodedFloat1, v1);\n  octDecodeFloat(encodedFloat2, v2);\n  octDecode(x, y, v3);\n}\nexport function compressTextureCoordinates(textureCoordinates) {\n  const x = textureCoordinates.x * 4095.0 | 0;\n  const y = textureCoordinates.y * 4095.0 | 0;\n  return 4096.0 * x + y;\n}\nexport function decompressTextureCoordinates(compressed, result) {\n  const temp = compressed / 4096.0;\n  const xZeroTo4095 = Math.floor(temp);\n  result.x = xZeroTo4095 / 4095.0;\n  result.y = (compressed - xZeroTo4095 * 4096) / 4095;\n  return result;\n}\nexport function zigZagDeltaDecode(uBuffer, vBuffer, heightBuffer) {\n  assert(uBuffer);\n  assert(vBuffer);\n  assert(uBuffer.length === vBuffer.length);\n\n  if (heightBuffer) {\n    assert(uBuffer.length === heightBuffer.length);\n  }\n\n  function zigZagDecode(value) {\n    return value >> 1 ^ -(value & 1);\n  }\n\n  let u = 0;\n  let v = 0;\n  let height = 0;\n\n  for (let i = 0; i < uBuffer.length; ++i) {\n    u += zigZagDecode(uBuffer[i]);\n    v += zigZagDecode(vBuffer[i]);\n    uBuffer[i] = u;\n    vBuffer[i] = v;\n\n    if (heightBuffer) {\n      height += zigZagDecode(heightBuffer[i]);\n      heightBuffer[i] = height;\n    }\n  }\n}\n//# sourceMappingURL=attribute-compression.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion failed. \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import { GL, GLType } from '@loaders.gl/math';\nexport default class Tile3DFeatureTable {\n  constructor(featureTableJson, featureTableBinary) {\n    this.json = featureTableJson;\n    this.buffer = featureTableBinary;\n    this.featuresLength = 0;\n    this._cachedTypedArrays = {};\n  }\n\n  getExtension(extensionName) {\n    return this.json.extensions && this.json.extensions[extensionName];\n  }\n\n  hasProperty(propertyName) {\n    return Boolean(this.json[propertyName]);\n  }\n\n  getGlobalProperty(propertyName, componentType = GL.UNSIGNED_INT, componentLength = 1) {\n    const jsonValue = this.json[propertyName];\n\n    if (jsonValue && Number.isFinite(jsonValue.byteOffset)) {\n      return this._getTypedArrayFromBinary(propertyName, componentType, componentLength, 1, jsonValue.byteOffset);\n    }\n\n    return jsonValue;\n  }\n\n  getPropertyArray(propertyName, componentType, componentLength) {\n    const jsonValue = this.json[propertyName];\n\n    if (jsonValue && Number.isFinite(jsonValue.byteOffset)) {\n      if ('componentType' in jsonValue) {\n        componentType = GLType.fromName(jsonValue.componentType);\n      }\n\n      return this._getTypedArrayFromBinary(propertyName, componentType, componentLength, this.featuresLength, jsonValue.byteOffset);\n    }\n\n    return this._getTypedArrayFromArray(propertyName, componentType, jsonValue);\n  }\n\n  getProperty(propertyName, componentType, componentLength, featureId, result) {\n    const jsonValue = this.json[propertyName];\n\n    if (!jsonValue) {\n      return jsonValue;\n    }\n\n    const typedArray = this.getPropertyArray(propertyName, componentType, componentLength);\n\n    if (componentLength === 1) {\n      return typedArray[featureId];\n    }\n\n    for (let i = 0; i < componentLength; ++i) {\n      result[i] = typedArray[componentLength * featureId + i];\n    }\n\n    return result;\n  }\n\n  _getTypedArrayFromBinary(propertyName, componentType, componentLength, count, byteOffset) {\n    const cachedTypedArrays = this._cachedTypedArrays;\n    let typedArray = cachedTypedArrays[propertyName];\n\n    if (!typedArray) {\n      typedArray = GLType.createTypedArray(componentType, this.buffer.buffer, this.buffer.byteOffset + byteOffset, count * componentLength);\n      cachedTypedArrays[propertyName] = typedArray;\n    }\n\n    return typedArray;\n  }\n\n  _getTypedArrayFromArray(propertyName, componentType, array) {\n    const cachedTypedArrays = this._cachedTypedArrays;\n    let typedArray = cachedTypedArrays[propertyName];\n\n    if (!typedArray) {\n      typedArray = GLType.createTypedArray(componentType, array);\n      cachedTypedArrays[propertyName] = typedArray;\n    }\n\n    return typedArray;\n  }\n\n}\n//# sourceMappingURL=tile-3d-feature-table.js.map","import { GLType } from '@loaders.gl/math';\nimport { assert } from '@loaders.gl/loader-utils';\nconst COMPONENTS_PER_ATTRIBUTE = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nconst UNPACKER = {\n  SCALAR: (values, i) => values[i],\n  VEC2: (values, i) => [values[2 * i + 0], values[2 * i + 1]],\n  VEC3: (values, i) => [values[3 * i + 0], values[3 * i + 1], values[3 * i + 2]],\n  VEC4: (values, i) => [values[4 * i + 0], values[4 * i + 1], values[4 * i + 2], values[4 * i + 3]],\n  MAT2: (values, i) => [values[4 * i + 0], values[4 * i + 1], values[4 * i + 2], values[4 * i + 3]],\n  MAT3: (values, i) => [values[9 * i + 0], values[9 * i + 1], values[9 * i + 2], values[9 * i + 3], values[9 * i + 4], values[9 * i + 5], values[9 * i + 6], values[9 * i + 7], values[9 * i + 8]],\n  MAT4: (values, i) => [values[16 * i + 0], values[16 * i + 1], values[16 * i + 2], values[16 * i + 3], values[16 * i + 4], values[16 * i + 5], values[16 * i + 6], values[16 * i + 7], values[16 * i + 8], values[16 * i + 9], values[16 * i + 10], values[16 * i + 11], values[16 * i + 12], values[16 * i + 13], values[16 * i + 14], values[16 * i + 15]]\n};\nconst PACKER = {\n  SCALAR: (x, values, i) => {\n    values[i] = x;\n  },\n  VEC2: (x, values, i) => {\n    values[2 * i + 0] = x[0];\n    values[2 * i + 1] = x[1];\n  },\n  VEC3: (x, values, i) => {\n    values[3 * i + 0] = x[0];\n    values[3 * i + 1] = x[1];\n    values[3 * i + 2] = x[2];\n  },\n  VEC4: (x, values, i) => {\n    values[4 * i + 0] = x[0];\n    values[4 * i + 1] = x[1];\n    values[4 * i + 2] = x[2];\n    values[4 * i + 3] = x[3];\n  },\n  MAT2: (x, values, i) => {\n    values[4 * i + 0] = x[0];\n    values[4 * i + 1] = x[1];\n    values[4 * i + 2] = x[2];\n    values[4 * i + 3] = x[3];\n  },\n  MAT3: (x, values, i) => {\n    values[9 * i + 0] = x[0];\n    values[9 * i + 1] = x[1];\n    values[9 * i + 2] = x[2];\n    values[9 * i + 3] = x[3];\n    values[9 * i + 4] = x[4];\n    values[9 * i + 5] = x[5];\n    values[9 * i + 6] = x[6];\n    values[9 * i + 7] = x[7];\n    values[9 * i + 8] = x[8];\n    values[9 * i + 9] = x[9];\n  },\n  MAT4: (x, values, i) => {\n    values[16 * i + 0] = x[0];\n    values[16 * i + 1] = x[1];\n    values[16 * i + 2] = x[2];\n    values[16 * i + 3] = x[3];\n    values[16 * i + 4] = x[4];\n    values[16 * i + 5] = x[5];\n    values[16 * i + 6] = x[6];\n    values[16 * i + 7] = x[7];\n    values[16 * i + 8] = x[8];\n    values[16 * i + 9] = x[9];\n    values[16 * i + 10] = x[10];\n    values[16 * i + 11] = x[11];\n    values[16 * i + 12] = x[12];\n    values[16 * i + 13] = x[13];\n    values[16 * i + 14] = x[14];\n    values[16 * i + 15] = x[15];\n  }\n};\nexport function createTypedArrayFromAccessor(tile3DAccessor, buffer, byteOffset, length) {\n  const {\n    componentType\n  } = tile3DAccessor;\n  assert(tile3DAccessor.componentType);\n  const type = typeof componentType === 'string' ? GLType.fromName(componentType) : componentType;\n  const size = COMPONENTS_PER_ATTRIBUTE[tile3DAccessor.type];\n  const unpacker = UNPACKER[tile3DAccessor.type];\n  const packer = PACKER[tile3DAccessor.type];\n  byteOffset += tile3DAccessor.byteOffset;\n  const values = GLType.createTypedArray(type, buffer, byteOffset, size * length);\n  return {\n    values,\n    type,\n    size,\n    unpacker,\n    packer\n  };\n}\n//# sourceMappingURL=tile-3d-accessor-utils.js.map","const defined = x => x !== undefined;\n\nexport function initializeHierarchy(batchTable, jsonHeader, binaryBody) {\n  if (!jsonHeader) {\n    return null;\n  }\n\n  let hierarchy = batchTable.getExtension('3DTILES_batch_table_hierarchy');\n  const legacyHierarchy = jsonHeader.HIERARCHY;\n\n  if (legacyHierarchy) {\n    console.warn('3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy.');\n    jsonHeader.extensions = jsonHeader.extensions || {};\n    jsonHeader.extensions['3DTILES_batch_table_hierarchy'] = legacyHierarchy;\n    hierarchy = legacyHierarchy;\n  }\n\n  if (!hierarchy) {\n    return null;\n  }\n\n  return initializeHierarchyValues(hierarchy, binaryBody);\n}\n\nfunction initializeHierarchyValues(hierarchyJson, binaryBody) {\n  let i;\n  let classId;\n  let binaryAccessor;\n  const instancesLength = hierarchyJson.instancesLength;\n  const classes = hierarchyJson.classes;\n  const classIds = hierarchyJson.classIds;\n  const parentCounts = hierarchyJson.parentCounts;\n  const parentIds = hierarchyJson.parentIds;\n  const parentIdsLength = instancesLength;\n\n  if (defined(classIds.byteOffset)) {\n    classIds.componentType = defaultValue(classIds.componentType, GL.UNSIGNED_SHORT);\n    classIds.type = AttributeType.SCALAR;\n    binaryAccessor = getBinaryAccessor(classIds);\n    classIds = binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + classIds.byteOffset, instancesLength);\n  }\n\n  let parentIndexes;\n\n  if (defined(parentCounts)) {\n    if (defined(parentCounts.byteOffset)) {\n      parentCounts.componentType = defaultValue(parentCounts.componentType, GL.UNSIGNED_SHORT);\n      parentCounts.type = AttributeType.SCALAR;\n      binaryAccessor = getBinaryAccessor(parentCounts);\n      parentCounts = binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + parentCounts.byteOffset, instancesLength);\n    }\n\n    parentIndexes = new Uint16Array(instancesLength);\n    parentIdsLength = 0;\n\n    for (i = 0; i < instancesLength; ++i) {\n      parentIndexes[i] = parentIdsLength;\n      parentIdsLength += parentCounts[i];\n    }\n  }\n\n  if (defined(parentIds) && defined(parentIds.byteOffset)) {\n    parentIds.componentType = defaultValue(parentIds.componentType, GL.UNSIGNED_SHORT);\n    parentIds.type = AttributeType.SCALAR;\n    binaryAccessor = getBinaryAccessor(parentIds);\n    parentIds = binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + parentIds.byteOffset, parentIdsLength);\n  }\n\n  const classesLength = classes.length;\n\n  for (i = 0; i < classesLength; ++i) {\n    const classInstancesLength = classes[i].length;\n    const properties = classes[i].instances;\n    const binaryProperties = getBinaryProperties(classInstancesLength, properties, binaryBody);\n    classes[i].instances = combine(binaryProperties, properties);\n  }\n\n  const classCounts = new Array(classesLength).fill(0);\n  const classIndexes = new Uint16Array(instancesLength);\n\n  for (i = 0; i < instancesLength; ++i) {\n    classId = classIds[i];\n    classIndexes[i] = classCounts[classId];\n    ++classCounts[classId];\n  }\n\n  const hierarchy = {\n    classes,\n    classIds,\n    classIndexes,\n    parentCounts,\n    parentIndexes,\n    parentIds\n  };\n  validateHierarchy(hierarchy);\n  return hierarchy;\n}\n\nexport function traverseHierarchy(hierarchy, instanceIndex, endConditionCallback) {\n  if (!hierarchy) {\n    return;\n  }\n\n  const parentCounts = hierarchy.parentCounts;\n  const parentIds = hierarchy.parentIds;\n\n  if (parentIds) {\n    return endConditionCallback(hierarchy, instanceIndex);\n  }\n\n  if (parentCounts > 0) {\n    return traverseHierarchyMultipleParents(hierarchy, instanceIndex, endConditionCallback);\n  }\n\n  return traverseHierarchySingleParent(hierarchy, instanceIndex, endConditionCallback);\n}\n\nfunction traverseHierarchyMultipleParents(hierarchy, instanceIndex, endConditionCallback) {\n  const classIds = hierarchy.classIds;\n  const parentCounts = hierarchy.parentCounts;\n  const parentIds = hierarchy.parentIds;\n  const parentIndexes = hierarchy.parentIndexes;\n  const instancesLength = classIds.length;\n  const visited = scratchVisited;\n  visited.length = Math.max(visited.length, instancesLength);\n  const visitedMarker = ++marker;\n  const stack = scratchStack;\n  stack.length = 0;\n  stack.push(instanceIndex);\n\n  while (stack.length > 0) {\n    instanceIndex = stack.pop();\n\n    if (visited[instanceIndex] === visitedMarker) {\n      continue;\n    }\n\n    visited[instanceIndex] = visitedMarker;\n    const result = endConditionCallback(hierarchy, instanceIndex);\n\n    if (defined(result)) {\n      return result;\n    }\n\n    const parentCount = parentCounts[instanceIndex];\n    const parentIndex = parentIndexes[instanceIndex];\n\n    for (let i = 0; i < parentCount; ++i) {\n      const parentId = parentIds[parentIndex + i];\n\n      if (parentId !== instanceIndex) {\n        stack.push(parentId);\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction traverseHierarchySingleParent(hierarchy, instanceIndex, endConditionCallback) {\n  let hasParent = true;\n\n  while (hasParent) {\n    const result = endConditionCallback(hierarchy, instanceIndex);\n\n    if (defined(result)) {\n      return result;\n    }\n\n    const parentId = hierarchy.parentIds[instanceIndex];\n    hasParent = parentId !== instanceIndex;\n    instanceIndex = parentId;\n  }\n\n  throw new Error('traverseHierarchySingleParent');\n}\n\nfunction validateHierarchy(hierarchy) {\n  const scratchValidateStack = [];\n  const classIds = hierarchy.classIds;\n  const instancesLength = classIds.length;\n\n  for (let i = 0; i < instancesLength; ++i) {\n    validateInstance(hierarchy, i, stack);\n  }\n}\n\nfunction validateInstance(hierarchy, instanceIndex, stack) {\n  const parentCounts = hierarchy.parentCounts;\n  const parentIds = hierarchy.parentIds;\n  const parentIndexes = hierarchy.parentIndexes;\n  const classIds = hierarchy.classIds;\n  const instancesLength = classIds.length;\n\n  if (!defined(parentIds)) {\n    return;\n  }\n\n  assert(instanceIndex < instancesLength, \"Parent index \".concat(instanceIndex, \" exceeds the total number of instances: \").concat(instancesLength));\n  assert(stack.indexOf(instanceIndex) === -1, 'Circular dependency detected in the batch table hierarchy.');\n  stack.push(instanceIndex);\n  const parentCount = defined(parentCounts) ? parentCounts[instanceIndex] : 1;\n  const parentIndex = defined(parentCounts) ? parentIndexes[instanceIndex] : instanceIndex;\n\n  for (let i = 0; i < parentCount; ++i) {\n    const parentId = parentIds[parentIndex + i];\n\n    if (parentId !== instanceIndex) {\n      validateInstance(hierarchy, parentId, stack);\n    }\n  }\n\n  stack.pop(instanceIndex);\n}\n//# sourceMappingURL=tile-3d-batch-table-hierarchy.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { createTypedArrayFromAccessor } from './helpers/tile-3d-accessor-utils';\nimport { initializeHierarchy, traverseHierarchy } from './tile-3d-batch-table-hierarchy';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nconst clone = (x, y) => x;\n\nconst IGNORED_PROPERTY_FIELDS = {\n  HIERARCHY: true,\n  extensions: true,\n  extras: true\n};\nexport default class Tile3DBatchTableParser {\n  constructor(json, binary, featureCount, options = {}) {\n    var _this$json;\n\n    assert(featureCount >= 0);\n    this.json = json || {};\n    this.binary = binary;\n    this.featureCount = featureCount;\n    this._extensions = ((_this$json = this.json) === null || _this$json === void 0 ? void 0 : _this$json.extensions) || {};\n    this._properties = {};\n\n    for (const propertyName in this.json) {\n      if (!IGNORED_PROPERTY_FIELDS[propertyName]) {\n        this._properties[propertyName] = this.json[propertyName];\n      }\n    }\n\n    this._binaryProperties = this._initializeBinaryProperties();\n\n    if (options['3DTILES_batch_table_hierarchy']) {\n      this._hierarchy = initializeHierarchy(this, this.json, this.binary);\n    }\n  }\n\n  getExtension(extensionName) {\n    return this.json && this.json.extensions && this.json.extensions[extensionName];\n  }\n\n  memorySizeInBytes() {\n    return 0;\n  }\n\n  isClass(batchId, className) {\n    this._checkBatchId(batchId);\n\n    assert(typeof className === 'string', className);\n\n    if (this._hierarchy) {\n      const result = traverseHierarchy(this._hierarchy, batchId, (hierarchy, instanceIndex) => {\n        const classId = hierarchy.classIds[instanceIndex];\n        const instanceClass = hierarchy.classes[classId];\n        return instanceClass.name === className;\n      });\n      return defined(result);\n    }\n\n    return false;\n  }\n\n  isExactClass(batchId, className) {\n    assert(typeof className === 'string', className);\n    return this.getExactClassName(batchId) === className;\n  }\n\n  getExactClassName(batchId) {\n    this._checkBatchId(batchId);\n\n    if (this._hierarchy) {\n      const classId = this._hierarchy.classIds[batchId];\n      const instanceClass = this._hierarchy.classes[classId];\n      return instanceClass.name;\n    }\n\n    return undefined;\n  }\n\n  hasProperty(batchId, name) {\n    this._checkBatchId(batchId);\n\n    assert(typeof name === 'string', name);\n    return defined(this._properties[name]) || this._hasPropertyInHierarchy(batchId, name);\n  }\n\n  getPropertyNames(batchId, results) {\n    this._checkBatchId(batchId);\n\n    results = defined(results) ? results : [];\n    results.length = 0;\n    const propertyNames = Object.keys(this._properties);\n    results.push(...propertyNames);\n\n    if (this._hierarchy) {\n      this._getPropertyNamesInHierarchy(batchId, results);\n    }\n\n    return results;\n  }\n\n  getProperty(batchId, name) {\n    this._checkBatchId(batchId);\n\n    assert(typeof name === 'string', name);\n\n    if (this._binaryProperties) {\n      const binaryProperty = this._binaryProperties[name];\n\n      if (defined(binaryProperty)) {\n        return this._getBinaryProperty(binaryProperty, batchId);\n      }\n    }\n\n    const propertyValues = this._properties[name];\n\n    if (defined(propertyValues)) {\n      return clone(propertyValues[batchId], true);\n    }\n\n    if (this._hierarchy) {\n      const hierarchyProperty = this._getHierarchyProperty(batchId, name);\n\n      if (defined(hierarchyProperty)) {\n        return hierarchyProperty;\n      }\n    }\n\n    return undefined;\n  }\n\n  setProperty(batchId, name, value) {\n    const featureCount = this.featureCount;\n\n    this._checkBatchId(batchId);\n\n    assert(typeof name === 'string', name);\n\n    if (this._binaryProperties) {\n      const binaryProperty = this._binaryProperties[name];\n\n      if (binaryProperty) {\n        this._setBinaryProperty(binaryProperty, batchId, value);\n\n        return;\n      }\n    }\n\n    if (this._hierarchy) {\n      if (this._setHierarchyProperty(this, batchId, name, value)) {\n        return;\n      }\n    }\n\n    let propertyValues = this._properties[name];\n\n    if (!defined(propertyValues)) {\n      this._properties[name] = new Array(featureCount);\n      propertyValues = this._properties[name];\n    }\n\n    propertyValues[batchId] = clone(value, true);\n  }\n\n  _checkBatchId(batchId) {\n    const valid = batchId >= 0 && batchId < this.featureCount;\n\n    if (!valid) {\n      throw new Error(\"batchId not in range [0, featureCount - 1].\");\n    }\n  }\n\n  _getBinaryProperty(binaryProperty, index) {\n    return binaryProperty.unpack(binaryProperty.typedArray, index);\n  }\n\n  _setBinaryProperty(binaryProperty, index, value) {\n    binaryProperty.pack(value, binaryProperty.typedArray, index);\n  }\n\n  _initializeBinaryProperties() {\n    let binaryProperties = null;\n\n    for (const name in this._properties) {\n      const property = this._properties[name];\n\n      const binaryProperty = this._initializeBinaryProperty(name, property);\n\n      if (binaryProperty) {\n        binaryProperties = binaryProperties || {};\n        binaryProperties[name] = binaryProperty;\n      }\n    }\n\n    return binaryProperties;\n  }\n\n  _initializeBinaryProperty(name, property) {\n    if ('byteOffset' in property) {\n      const tile3DAccessor = property;\n      assert(this.binary, \"Property \".concat(name, \" requires a batch table binary.\"));\n      assert(tile3DAccessor.type, \"Property \".concat(name, \" requires a type.\"));\n      const accessor = createTypedArrayFromAccessor(tile3DAccessor, this.binary.buffer, this.binary.byteOffset | 0, this.featureCount);\n      return {\n        typedArray: accessor.values,\n        componentCount: accessor.size,\n        unpack: accessor.unpacker,\n        pack: accessor.packer\n      };\n    }\n\n    return null;\n  }\n\n  _hasPropertyInHierarchy(batchId, name) {\n    if (!this._hierarchy) {\n      return false;\n    }\n\n    const result = traverseHierarchy(this._hierarchy, batchId, (hierarchy, instanceIndex) => {\n      const classId = hierarchy.classIds[instanceIndex];\n      const instances = hierarchy.classes[classId].instances;\n      return defined(instances[name]);\n    });\n    return defined(result);\n  }\n\n  _getPropertyNamesInHierarchy(batchId, results) {\n    traverseHierarchy(this._hierarchy, batchId, (hierarchy, instanceIndex) => {\n      const classId = hierarchy.classIds[instanceIndex];\n      const instances = hierarchy.classes[classId].instances;\n\n      for (const name in instances) {\n        if (instances.hasOwnProperty(name)) {\n          if (results.indexOf(name) === -1) {\n            results.push(name);\n          }\n        }\n      }\n    });\n  }\n\n  _getHierarchyProperty(batchId, name) {\n    return traverseHierarchy(this._hierarchy, batchId, (hierarchy, instanceIndex) => {\n      const classId = hierarchy.classIds[instanceIndex];\n      const instanceClass = hierarchy.classes[classId];\n      const indexInClass = hierarchy.classIndexes[instanceIndex];\n      const propertyValues = instanceClass.instances[name];\n\n      if (defined(propertyValues)) {\n        if (defined(propertyValues.typedArray)) {\n          return this._getBinaryProperty(propertyValues, indexInClass);\n        }\n\n        return clone(propertyValues[indexInClass], true);\n      }\n\n      return null;\n    });\n  }\n\n  _setHierarchyProperty(batchTable, batchId, name, value) {\n    const result = traverseHierarchy(this._hierarchy, batchId, (hierarchy, instanceIndex) => {\n      const classId = hierarchy.classIds[instanceIndex];\n      const instanceClass = hierarchy.classes[classId];\n      const indexInClass = hierarchy.classIndexes[instanceIndex];\n      const propertyValues = instanceClass.instances[name];\n\n      if (defined(propertyValues)) {\n        assert(instanceIndex === batchId, \"Inherited property \\\"\".concat(name, \"\\\" is read-only.\"));\n\n        if (defined(propertyValues.typedArray)) {\n          this._setBinaryProperty(propertyValues, indexInClass, value);\n        } else {\n          propertyValues[indexInClass] = clone(value, true);\n        }\n\n        return true;\n      }\n\n      return false;\n    });\n    return defined(result);\n  }\n\n}\n//# sourceMappingURL=tile-3d-batch-table.js.map","const SIZEOF_UINT32 = 4;\nexport function parse3DTileHeaderSync(tile, arrayBuffer, byteOffset = 0) {\n  const view = new DataView(arrayBuffer);\n  tile.magic = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.version = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.byteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  if (tile.version !== 1) {\n    throw new Error(\"3D Tile Version \".concat(tile.version, \" not supported\"));\n  }\n\n  return byteOffset;\n}\n//# sourceMappingURL=parse-3d-tile-header.js.map","import { getStringFromArrayBuffer } from './parse-utils';\nconst SIZEOF_UINT32 = 4;\nconst DEPRECATION_WARNING = \"b3dm tile in legacy format.\";\nexport function parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset) {\n  const view = new DataView(arrayBuffer);\n  let batchLength;\n  tile.header = tile.header || {};\n  let featureTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  let featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  let batchTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  let batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  if (batchTableJsonByteLength >= 570425344) {\n    byteOffset -= SIZEOF_UINT32 * 2;\n    batchLength = featureTableJsonByteLength;\n    batchTableJsonByteLength = featureTableBinaryByteLength;\n    batchTableBinaryByteLength = 0;\n    featureTableJsonByteLength = 0;\n    featureTableBinaryByteLength = 0;\n    console.warn(DEPRECATION_WARNING);\n  } else if (batchTableBinaryByteLength >= 570425344) {\n    byteOffset -= SIZEOF_UINT32;\n    batchLength = batchTableJsonByteLength;\n    batchTableJsonByteLength = featureTableJsonByteLength;\n    batchTableBinaryByteLength = featureTableBinaryByteLength;\n    featureTableJsonByteLength = 0;\n    featureTableBinaryByteLength = 0;\n    console.warn(DEPRECATION_WARNING);\n  }\n\n  tile.header.featureTableJsonByteLength = featureTableJsonByteLength;\n  tile.header.featureTableBinaryByteLength = featureTableBinaryByteLength;\n  tile.header.batchTableJsonByteLength = batchTableJsonByteLength;\n  tile.header.batchTableBinaryByteLength = batchTableBinaryByteLength;\n  tile.header.batchLength = batchLength;\n  return byteOffset;\n}\nexport function parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options) {\n  byteOffset = parse3DTileFeatureTable(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileBatchTable(tile, arrayBuffer, byteOffset, options);\n  return byteOffset;\n}\n\nfunction parse3DTileFeatureTable(tile, arrayBuffer, byteOffset, options) {\n  const {\n    featureTableJsonByteLength,\n    featureTableBinaryByteLength,\n    batchLength\n  } = tile.header;\n  tile.featureTableJson = {\n    BATCH_LENGTH: batchLength || 0\n  };\n\n  if (featureTableJsonByteLength > 0) {\n    const featureTableString = getStringFromArrayBuffer(arrayBuffer, byteOffset, featureTableJsonByteLength);\n    tile.featureTableJson = JSON.parse(featureTableString);\n  }\n\n  byteOffset += featureTableJsonByteLength;\n  tile.featureTableBinary = new Uint8Array(arrayBuffer, byteOffset, featureTableBinaryByteLength);\n  byteOffset += featureTableBinaryByteLength;\n  return byteOffset;\n}\n\nfunction parse3DTileBatchTable(tile, arrayBuffer, byteOffset, options) {\n  const {\n    batchTableJsonByteLength,\n    batchTableBinaryByteLength\n  } = tile.header;\n\n  if (batchTableJsonByteLength > 0) {\n    const batchTableString = getStringFromArrayBuffer(arrayBuffer, byteOffset, batchTableJsonByteLength);\n    tile.batchTableJson = JSON.parse(batchTableString);\n    byteOffset += batchTableJsonByteLength;\n\n    if (batchTableBinaryByteLength > 0) {\n      tile.batchTableBinary = new Uint8Array(arrayBuffer, byteOffset, batchTableBinaryByteLength);\n      tile.batchTableBinary = new Uint8Array(tile.batchTableBinary);\n      byteOffset += batchTableBinaryByteLength;\n    }\n  }\n\n  return byteOffset;\n}\n//# sourceMappingURL=parse-3d-tile-tables.js.map","import { decodeRGB565, GL } from '@loaders.gl/math';\nexport function normalize3DTileColorAttribute(tile, colors, batchTable) {\n  if (!colors && (!tile || !tile.batchIds || !batchTable)) {\n    return null;\n  }\n\n  const {\n    batchIds,\n    isRGB565,\n    pointCount\n  } = tile;\n\n  if (batchIds && batchTable) {\n    const colorArray = new Uint8ClampedArray(pointCount * 3);\n\n    for (let i = 0; i < pointCount; i++) {\n      const batchId = batchIds[i];\n      const dimensions = batchTable.getProperty(batchId, 'dimensions');\n      const color = dimensions.map(d => d * 255);\n      colorArray[i * 3] = color[0];\n      colorArray[i * 3 + 1] = color[1];\n      colorArray[i * 3 + 2] = color[2];\n    }\n\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: colorArray,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  if (isRGB565) {\n    const colorArray = new Uint8ClampedArray(pointCount * 3);\n\n    for (let i = 0; i < pointCount; i++) {\n      const color = decodeRGB565(colors[i]);\n      colorArray[i * 3] = color[0];\n      colorArray[i * 3 + 1] = color[1];\n      colorArray[i * 3 + 2] = color[2];\n    }\n\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: colorArray,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  if (colors && colors.length === pointCount * 3) {\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: colors,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  return {\n    type: GL.UNSIGNED_BYTE,\n    value: colors,\n    size: 4,\n    normalized: true\n  };\n}\n//# sourceMappingURL=normalize-3d-tile-colors.js.map","import { Vector3 } from '@math.gl/core';\nimport { GL, octDecode } from '@loaders.gl/math';\nconst scratchNormal = new Vector3();\nexport function normalize3DTileNormalAttribute(tile, normals) {\n  if (!normals) {\n    return null;\n  }\n\n  if (tile.isOctEncoded16P) {\n    const decodedArray = new Float32Array(tile.pointsLength * 3);\n\n    for (let i = 0; i < tile.pointsLength; i++) {\n      octDecode(normals[i * 2], normals[i * 2 + 1], scratchNormal);\n      scratchNormal.toArray(decodedArray, i * 3);\n    }\n\n    return {\n      type: GL.FLOAT,\n      size: 2,\n      value: decodedArray\n    };\n  }\n\n  return {\n    type: GL.FLOAT,\n    size: 2,\n    value: normals\n  };\n}\n//# sourceMappingURL=normalize-3d-tile-normals.js.map","import { Vector3 } from '@math.gl/core';\nimport { GL } from '@loaders.gl/math';\nexport function normalize3DTilePositionAttribute(tile, positions, options) {\n  if (!tile.isQuantized) {\n    return positions;\n  }\n\n  if (options['3d-tiles'] && options['3d-tiles'].decodeQuantizedPositions) {\n    tile.isQuantized = false;\n    return decodeQuantizedPositions(tile, positions);\n  }\n\n  return {\n    type: GL.UNSIGNED_SHORT,\n    value: positions,\n    size: 3,\n    normalized: true\n  };\n}\n\nfunction decodeQuantizedPositions(tile, positions) {\n  const scratchPosition = new Vector3();\n  const decodedArray = new Float32Array(tile.pointCount * 3);\n\n  for (let i = 0; i < tile.pointCount; i++) {\n    scratchPosition.set(positions[i * 3], positions[i * 3 + 1], positions[i * 3 + 2]).scale(1 / tile.quantizedRange).multiply(tile.quantizedVolumeScale).add(tile.quantizedVolumeOffset).toArray(decodedArray, i * 3);\n  }\n\n  return decodedArray;\n}\n//# sourceMappingURL=normalize-3d-tile-positions.js.map","import { DracoLoader } from '@loaders.gl/draco';\nimport { GL } from '@loaders.gl/math';\nimport { Vector3 } from '@math.gl/core';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport Tile3DBatchTable from '../classes/tile-3d-batch-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { normalize3DTileColorAttribute } from './helpers/normalize-3d-tile-colors';\nimport { normalize3DTileNormalAttribute } from './helpers/normalize-3d-tile-normals';\nimport { normalize3DTilePositionAttribute } from './helpers/normalize-3d-tile-positions';\nexport async function parsePointCloud3DTile(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n  initializeTile(tile);\n  const {\n    featureTable,\n    batchTable\n  } = parsePointCloudTables(tile);\n  await parseDraco(tile, featureTable, batchTable, options, context);\n  parsePositions(tile, featureTable, options);\n  parseColors(tile, featureTable, batchTable);\n  parseNormals(tile, featureTable);\n  return byteOffset;\n}\n\nfunction initializeTile(tile) {\n  tile.attributes = {\n    positions: null,\n    colors: null,\n    normals: null,\n    batchIds: null\n  };\n  tile.isQuantized = false;\n  tile.isTranslucent = false;\n  tile.isRGB565 = false;\n  tile.isOctEncoded16P = false;\n}\n\nfunction parsePointCloudTables(tile) {\n  const featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  const pointsLength = featureTable.getGlobalProperty('POINTS_LENGTH');\n\n  if (!Number.isFinite(pointsLength)) {\n    throw new Error('POINTS_LENGTH must be defined');\n  }\n\n  featureTable.featuresLength = pointsLength;\n  tile.featuresLength = pointsLength;\n  tile.pointsLength = pointsLength;\n  tile.pointCount = pointsLength;\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  const batchTable = parseBatchIds(tile, featureTable);\n  return {\n    featureTable,\n    batchTable\n  };\n}\n\nfunction parsePositions(tile, featureTable, options) {\n  if (!tile.attributes.positions) {\n    if (featureTable.hasProperty('POSITION')) {\n      tile.attributes.positions = featureTable.getPropertyArray('POSITION', GL.FLOAT, 3);\n    } else if (featureTable.hasProperty('POSITION_QUANTIZED')) {\n      const positions = featureTable.getPropertyArray('POSITION_QUANTIZED', GL.UNSIGNED_SHORT, 3);\n      tile.isQuantized = true;\n      tile.quantizedRange = (1 << 16) - 1;\n      tile.quantizedVolumeScale = featureTable.getGlobalProperty('QUANTIZED_VOLUME_SCALE', GL.FLOAT, 3);\n\n      if (!tile.quantizedVolumeScale) {\n        throw new Error('QUANTIZED_VOLUME_SCALE must be defined for quantized positions.');\n      }\n\n      tile.quantizedVolumeOffset = featureTable.getGlobalProperty('QUANTIZED_VOLUME_OFFSET', GL.FLOAT, 3);\n\n      if (!tile.quantizedVolumeOffset) {\n        throw new Error('QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.');\n      }\n\n      tile.attributes.positions = normalize3DTilePositionAttribute(tile, positions, options);\n    }\n  }\n\n  if (!tile.attributes.positions) {\n    throw new Error('Either POSITION or POSITION_QUANTIZED must be defined.');\n  }\n}\n\nfunction parseColors(tile, featureTable, batchTable) {\n  if (!tile.attributes.colors) {\n    let colors = null;\n\n    if (featureTable.hasProperty('RGBA')) {\n      colors = featureTable.getPropertyArray('RGBA', GL.UNSIGNED_BYTE, 4);\n      tile.isTranslucent = true;\n    } else if (featureTable.hasProperty('RGB')) {\n      colors = featureTable.getPropertyArray('RGB', GL.UNSIGNED_BYTE, 3);\n    } else if (featureTable.hasProperty('RGB565')) {\n      colors = featureTable.getPropertyArray('RGB565', GL.UNSIGNED_SHORT, 1);\n      tile.isRGB565 = true;\n    }\n\n    tile.attributes.colors = normalize3DTileColorAttribute(tile, colors, batchTable);\n  }\n\n  if (featureTable.hasProperty('CONSTANT_RGBA')) {\n    tile.constantRGBA = featureTable.getGlobalProperty('CONSTANT_RGBA', GL.UNSIGNED_BYTE, 4);\n  }\n}\n\nfunction parseNormals(tile, featureTable) {\n  if (!tile.attributes.normals) {\n    let normals = null;\n\n    if (featureTable.hasProperty('NORMAL')) {\n      normals = featureTable.getPropertyArray('NORMAL', GL.FLOAT, 3);\n    } else if (featureTable.hasProperty('NORMAL_OCT16P')) {\n      normals = featureTable.getPropertyArray('NORMAL_OCT16P', GL.UNSIGNED_BYTE, 2);\n      tile.isOctEncoded16P = true;\n    }\n\n    tile.attributes.normals = normalize3DTileNormalAttribute(tile, normals);\n  }\n}\n\nfunction parseBatchIds(tile, featureTable) {\n  let batchTable = null;\n\n  if (!tile.batchIds && featureTable.hasProperty('BATCH_ID')) {\n    tile.batchIds = featureTable.getPropertyArray('BATCH_ID', GL.UNSIGNED_SHORT, 1);\n\n    if (tile.batchIds) {\n      const batchFeatureLength = featureTable.getGlobalProperty('BATCH_LENGTH');\n\n      if (!batchFeatureLength) {\n        throw new Error('Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.');\n      }\n\n      const {\n        batchTableJson,\n        batchTableBinary\n      } = tile;\n      batchTable = new Tile3DBatchTable(batchTableJson, batchTableBinary, batchFeatureLength);\n    }\n  }\n\n  return batchTable;\n}\n\nasync function parseDraco(tile, featureTable, batchTable, options, context) {\n  let dracoBuffer;\n  let dracoFeatureTableProperties;\n  let dracoBatchTableProperties;\n  const batchTableDraco = tile.batchTableJson && tile.batchTableJson.extensions && tile.batchTableJson.extensions['3DTILES_draco_point_compression'];\n\n  if (batchTableDraco) {\n    dracoBatchTableProperties = batchTableDraco.properties;\n  }\n\n  const featureTableDraco = featureTable.getExtension('3DTILES_draco_point_compression');\n\n  if (featureTableDraco) {\n    dracoFeatureTableProperties = featureTableDraco.properties;\n    const dracoByteOffset = featureTableDraco.byteOffset;\n    const dracoByteLength = featureTableDraco.byteLength;\n\n    if (!dracoFeatureTableProperties || !Number.isFinite(dracoByteOffset) || !dracoByteLength) {\n      throw new Error('Draco properties, byteOffset, and byteLength must be defined');\n    }\n\n    dracoBuffer = tile.featureTableBinary.slice(dracoByteOffset, dracoByteOffset + dracoByteLength);\n    tile.hasPositions = Number.isFinite(dracoFeatureTableProperties.POSITION);\n    tile.hasColors = Number.isFinite(dracoFeatureTableProperties.RGB) || Number.isFinite(dracoFeatureTableProperties.RGBA);\n    tile.hasNormals = Number.isFinite(dracoFeatureTableProperties.NORMAL);\n    tile.hasBatchIds = Number.isFinite(dracoFeatureTableProperties.BATCH_ID);\n    tile.isTranslucent = Number.isFinite(dracoFeatureTableProperties.RGBA);\n  }\n\n  if (!dracoBuffer) {\n    return true;\n  }\n\n  const dracoData = {\n    buffer: dracoBuffer,\n    properties: { ...dracoFeatureTableProperties,\n      ...dracoBatchTableProperties\n    },\n    featureTableProperties: dracoFeatureTableProperties,\n    batchTableProperties: dracoBatchTableProperties,\n    dequantizeInShader: false\n  };\n  return await loadDraco(tile, dracoData, options, context);\n}\n\nexport async function loadDraco(tile, dracoData, options, context) {\n  const {\n    parse\n  } = context;\n  const dracoOptions = { ...options,\n    draco: { ...options.draco,\n      extraAttributes: dracoData.batchTableProperties || {}\n    }\n  };\n  delete dracoOptions['3d-tiles'];\n  const data = await parse(dracoData.buffer, DracoLoader, dracoOptions);\n  const decodedPositions = data.attributes.POSITION && data.attributes.POSITION.value;\n  const decodedColors = data.attributes.COLOR_0 && data.attributes.COLOR_0.value;\n  const decodedNormals = data.attributes.NORMAL && data.attributes.NORMAL.value;\n  const decodedBatchIds = data.attributes.BATCH_ID && data.attributes.BATCH_ID.value;\n  const isQuantizedDraco = decodedPositions && data.attributes.POSITION.value.quantization;\n  const isOctEncodedDraco = decodedNormals && data.attributes.NORMAL.value.quantization;\n\n  if (isQuantizedDraco) {\n    const quantization = data.POSITION.data.quantization;\n    const range = quantization.range;\n    tile.quantizedVolumeScale = new Vector3(range, range, range);\n    tile.quantizedVolumeOffset = new Vector3(quantization.minValues);\n    tile.quantizedRange = (1 << quantization.quantizationBits) - 1.0;\n    tile.isQuantizedDraco = true;\n  }\n\n  if (isOctEncodedDraco) {\n    tile.octEncodedRange = (1 << data.NORMAL.data.quantization.quantizationBits) - 1.0;\n    tile.isOctEncodedDraco = true;\n  }\n\n  const batchTableAttributes = {};\n\n  if (dracoData.batchTableProperties) {\n    for (const attributeName of Object.keys(dracoData.batchTableProperties)) {\n      if (data.attributes[attributeName] && data.attributes[attributeName].value) {\n        batchTableAttributes[attributeName.toLowerCase()] = data.attributes[attributeName].value;\n      }\n    }\n  }\n\n  tile.attributes = {\n    positions: decodedPositions,\n    colors: normalize3DTileColorAttribute(tile, decodedColors),\n    normals: decodedNormals,\n    batchIds: decodedBatchIds,\n    ...batchTableAttributes\n  };\n}\n//# sourceMappingURL=parse-3d-tile-point-cloud.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { global, isBrowser } from '../utils/globals';\nconst {\n  _parseImageNode\n} = global;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    const xmlText = textDecoder.decode(arrayBuffer);\n    const src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","export const VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : 'latest';\n//# sourceMappingURL=version.js.map","import { assert } from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { global } from '../utils/globals';\nimport { assert } from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const {\n    _parseImageNode\n  } = global;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}\n//# sourceMappingURL=assert.js.map","export function resolveUrl(url, options) {\n  const absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  const baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}\n//# sourceMappingURL=resolve-url.js.map","import { assert } from '../utils/assert';\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nconst ARRAY_CONSTRUCTOR_TO_WEBGL_CONSTANT = [[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126], [Float64Array, 5130]];\nconst ARRAY_TO_COMPONENT_TYPE = new Map(ARRAY_CONSTRUCTOR_TO_WEBGL_CONSTANT);\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nconst ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nconst ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  const componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType,\n    length,\n    byteLength\n  };\n}\n//# sourceMappingURL=gltf-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getBinaryImageMetadata } from '@loaders.gl/images';\nimport { padToNBytes, copyToArray } from '@loaders.gl/loader-utils';\nimport { assert } from '../utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from '../gltf-utils/gltf-utils';\nconst DEFAULT_GLTF_JSON = {\n  asset: {\n    version: '2.0',\n    generator: 'loaders.gl'\n  },\n  buffers: []\n};\nexport default class GLTFScenegraph {\n  constructor(gltf) {\n    _defineProperty(this, \"gltf\", void 0);\n\n    _defineProperty(this, \"sourceBuffers\", void 0);\n\n    _defineProperty(this, \"byteLength\", void 0);\n\n    this.gltf = gltf || {\n      json: { ...DEFAULT_GLTF_JSON\n      },\n      buffers: []\n    };\n    this.sourceBuffers = [];\n    this.byteLength = 0;\n\n    if (this.gltf.buffers && this.gltf.buffers[0]) {\n      this.byteLength = this.gltf.buffers[0].byteLength;\n      this.sourceBuffers = [this.gltf.buffers[0]];\n    }\n  }\n\n  get json() {\n    return this.gltf.json;\n  }\n\n  getApplicationData(key) {\n    const data = this.json[key];\n    return data;\n  }\n\n  getExtraData(key) {\n    const extras = this.json.extras || {};\n    return extras[key];\n  }\n\n  getExtension(extensionName) {\n    const isExtension = this.getUsedExtensions().find(name => name === extensionName);\n    const extensions = this.json.extensions || {};\n    return isExtension ? extensions[extensionName] || true : null;\n  }\n\n  getRequiredExtension(extensionName) {\n    const isRequired = this.getRequiredExtensions().find(name => name === extensionName);\n    return isRequired ? this.getExtension(extensionName) : null;\n  }\n\n  getRequiredExtensions() {\n    return this.json.extensionsRequired || [];\n  }\n\n  getUsedExtensions() {\n    return this.json.extensionsUsed || [];\n  }\n\n  getObjectExtension(object, extensionName) {\n    const extensions = object.extensions || {};\n    return extensions[extensionName];\n  }\n\n  getScene(index) {\n    return this.getObject('scenes', index);\n  }\n\n  getNode(index) {\n    return this.getObject('nodes', index);\n  }\n\n  getSkin(index) {\n    return this.getObject('skins', index);\n  }\n\n  getMesh(index) {\n    return this.getObject('meshes', index);\n  }\n\n  getMaterial(index) {\n    return this.getObject('materials', index);\n  }\n\n  getAccessor(index) {\n    return this.getObject('accessors', index);\n  }\n\n  getTexture(index) {\n    return this.getObject('textures', index);\n  }\n\n  getSampler(index) {\n    return this.getObject('samplers', index);\n  }\n\n  getImage(index) {\n    return this.getObject('images', index);\n  }\n\n  getBufferView(index) {\n    return this.getObject('bufferViews', index);\n  }\n\n  getBuffer(index) {\n    return this.getObject('buffers', index);\n  }\n\n  getObject(array, index) {\n    if (typeof index === 'object') {\n      return index;\n    }\n\n    const object = this.json[array] && this.json[array][index];\n\n    if (!object) {\n      throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n    }\n\n    return object;\n  }\n\n  getTypedArrayForBufferView(bufferView) {\n    bufferView = this.getBufferView(bufferView);\n    const bufferIndex = bufferView.buffer;\n    const binChunk = this.gltf.buffers[bufferIndex];\n    assert(binChunk);\n    const byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n    return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n  }\n\n  getTypedArrayForAccessor(accessor) {\n    accessor = this.getAccessor(accessor);\n    const bufferView = this.getBufferView(accessor.bufferView);\n    const buffer = this.getBuffer(bufferView.buffer);\n    const arrayBuffer = buffer.data;\n    const {\n      ArrayType,\n      length\n    } = getAccessorArrayTypeAndLength(accessor, bufferView);\n    const byteOffset = bufferView.byteOffset + accessor.byteOffset;\n    return new ArrayType(arrayBuffer, byteOffset, length);\n  }\n\n  getTypedArrayForImageData(image) {\n    image = this.getAccessor(image);\n    const bufferView = this.getBufferView(image.bufferView);\n    const buffer = this.getBuffer(bufferView.buffer);\n    const arrayBuffer = buffer.data;\n    const byteOffset = bufferView.byteOffset || 0;\n    return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n  }\n\n  addApplicationData(key, data) {\n    this.json[key] = data;\n    return this;\n  }\n\n  addExtraData(key, data) {\n    this.json.extras = this.json.extras || {};\n    this.json.extras[key] = data;\n    return this;\n  }\n\n  addObjectExtension(object, extensionName, data) {\n    object.extensions = object.extensions || {};\n    object.extensions[extensionName] = data;\n    this.registerUsedExtension(extensionName);\n    return this;\n  }\n\n  setObjectExtension(object, extensionName, data) {\n    const extensions = object.extensions || {};\n    extensions[extensionName] = data;\n  }\n\n  removeObjectExtension(object, extensionName) {\n    const extensions = object.extensions || {};\n    const extension = extensions[extensionName];\n    delete extensions[extensionName];\n    return extension;\n  }\n\n  addExtension(extensionName, extensionData = {}) {\n    assert(extensionData);\n    this.json.extensions = this.json.extensions || {};\n    this.json.extensions[extensionName] = extensionData;\n    this.registerUsedExtension(extensionName);\n    return extensionData;\n  }\n\n  addRequiredExtension(extensionName, extensionData = {}) {\n    assert(extensionData);\n    this.addExtension(extensionName, extensionData);\n    this.registerRequiredExtension(extensionName);\n    return extensionData;\n  }\n\n  registerUsedExtension(extensionName) {\n    this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n    if (!this.json.extensionsUsed.find(ext => ext === extensionName)) {\n      this.json.extensionsUsed.push(extensionName);\n    }\n  }\n\n  registerRequiredExtension(extensionName) {\n    this.registerUsedExtension(extensionName);\n    this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n    if (!this.json.extensionsRequired.find(ext => ext === extensionName)) {\n      this.json.extensionsRequired.push(extensionName);\n    }\n  }\n\n  removeExtension(extensionName) {\n    if (this.json.extensionsRequired) {\n      this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n    }\n\n    if (this.json.extensionsUsed) {\n      this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n    }\n\n    if (this.json.extensions) {\n      delete this.json.extensions[extensionName];\n    }\n  }\n\n  setDefaultScene(sceneIndex) {\n    this.json.scene = sceneIndex;\n  }\n\n  addScene(scene) {\n    const {\n      nodeIndices\n    } = scene;\n    this.json.scenes = this.json.scenes || [];\n    this.json.scenes.push({\n      nodes: nodeIndices\n    });\n    return this.json.scenes.length - 1;\n  }\n\n  addNode(node) {\n    const {\n      meshIndex,\n      matrix\n    } = node;\n    this.json.nodes = this.json.nodes || [];\n    const nodeData = {\n      mesh: meshIndex\n    };\n\n    if (matrix) {\n      nodeData.matrix = matrix;\n    }\n\n    this.json.nodes.push(nodeData);\n    return this.json.nodes.length - 1;\n  }\n\n  addMesh(mesh) {\n    const {\n      attributes,\n      indices,\n      material,\n      mode = 4\n    } = mesh;\n\n    const accessors = this._addAttributes(attributes);\n\n    const glTFMesh = {\n      primitives: [{\n        attributes: accessors,\n        mode\n      }]\n    };\n\n    if (indices) {\n      const indicesAccessor = this._addIndices(indices);\n\n      glTFMesh.primitives[0].indices = indicesAccessor;\n    }\n\n    if (Number.isFinite(material)) {\n      glTFMesh.primitives[0].material = material;\n    }\n\n    this.json.meshes = this.json.meshes || [];\n    this.json.meshes.push(glTFMesh);\n    return this.json.meshes.length - 1;\n  }\n\n  addPointCloud(attributes) {\n    const accessorIndices = this._addAttributes(attributes);\n\n    const glTFMesh = {\n      primitives: [{\n        attributes: accessorIndices,\n        mode: 0\n      }]\n    };\n    this.json.meshes = this.json.meshes || [];\n    this.json.meshes.push(glTFMesh);\n    return this.json.meshes.length - 1;\n  }\n\n  addImage(imageData, mimeTypeOpt) {\n    const metadata = getBinaryImageMetadata(imageData);\n    const mimeType = mimeTypeOpt || (metadata === null || metadata === void 0 ? void 0 : metadata.mimeType);\n    const bufferViewIndex = this.addBufferView(imageData);\n    const glTFImage = {\n      bufferView: bufferViewIndex,\n      mimeType\n    };\n    this.json.images = this.json.images || [];\n    this.json.images.push(glTFImage);\n    return this.json.images.length - 1;\n  }\n\n  addBufferView(buffer) {\n    const byteLength = buffer.byteLength;\n    assert(Number.isFinite(byteLength));\n    this.sourceBuffers = this.sourceBuffers || [];\n    this.sourceBuffers.push(buffer);\n    const glTFBufferView = {\n      buffer: 0,\n      byteOffset: this.byteLength,\n      byteLength\n    };\n    this.byteLength += padToNBytes(byteLength, 4);\n    this.json.bufferViews = this.json.bufferViews || [];\n    this.json.bufferViews.push(glTFBufferView);\n    return this.json.bufferViews.length - 1;\n  }\n\n  addAccessor(bufferViewIndex, accessor) {\n    const glTFAccessor = {\n      bufferView: bufferViewIndex,\n      type: getAccessorTypeFromSize(accessor.size),\n      componentType: accessor.componentType,\n      count: accessor.count,\n      max: accessor.max,\n      min: accessor.min\n    };\n    this.json.accessors = this.json.accessors || [];\n    this.json.accessors.push(glTFAccessor);\n    return this.json.accessors.length - 1;\n  }\n\n  addBinaryBuffer(sourceBuffer, accessor = {\n    size: 3\n  }) {\n    const bufferViewIndex = this.addBufferView(sourceBuffer);\n    let minMax = {\n      min: accessor.min,\n      max: accessor.max\n    };\n\n    if (!minMax.min || !minMax.max) {\n      minMax = this._getAccessorMinMax(sourceBuffer, accessor.size);\n    }\n\n    const accessorDefaults = {\n      size: accessor.size,\n      componentType: getComponentTypeFromArray(sourceBuffer),\n      count: Math.round(sourceBuffer.length / accessor.size),\n      min: minMax.min,\n      max: minMax.max\n    };\n    return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n  }\n\n  addTexture(texture) {\n    const {\n      imageIndex\n    } = texture;\n    const glTFTexture = {\n      source: imageIndex\n    };\n    this.json.textures = this.json.textures || [];\n    this.json.textures.push(glTFTexture);\n    return this.json.textures.length - 1;\n  }\n\n  addMaterial(pbrMaterialInfo) {\n    this.json.materials = this.json.materials || [];\n    this.json.materials.push(pbrMaterialInfo);\n    return this.json.materials.length - 1;\n  }\n\n  createBinaryChunk() {\n    var _this$json, _this$json$buffers;\n\n    this.gltf.buffers = [];\n    const totalByteLength = this.byteLength;\n    const arrayBuffer = new ArrayBuffer(totalByteLength);\n    const targetArray = new Uint8Array(arrayBuffer);\n    let dstByteOffset = 0;\n\n    for (const sourceBuffer of this.sourceBuffers || []) {\n      dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n    }\n\n    if ((_this$json = this.json) !== null && _this$json !== void 0 && (_this$json$buffers = _this$json.buffers) !== null && _this$json$buffers !== void 0 && _this$json$buffers[0]) {\n      this.json.buffers[0].byteLength = totalByteLength;\n    } else {\n      this.json.buffers = [{\n        byteLength: totalByteLength\n      }];\n    }\n\n    this.gltf.binary = arrayBuffer;\n    this.sourceBuffers = [arrayBuffer];\n  }\n\n  _removeStringFromArray(array, string) {\n    let found = true;\n\n    while (found) {\n      const index = array.indexOf(string);\n\n      if (index > -1) {\n        array.splice(index, 1);\n      } else {\n        found = false;\n      }\n    }\n  }\n\n  _addAttributes(attributes = {}) {\n    const result = {};\n\n    for (const attributeKey in attributes) {\n      const attributeData = attributes[attributeKey];\n\n      const attrName = this._getGltfAttributeName(attributeKey);\n\n      const accessor = this.addBinaryBuffer(attributeData.value, attributeData);\n      result[attrName] = accessor;\n    }\n\n    return result;\n  }\n\n  _addIndices(indices) {\n    return this.addBinaryBuffer(indices, {\n      size: 1\n    });\n  }\n\n  _getGltfAttributeName(attributeName) {\n    switch (attributeName.toLowerCase()) {\n      case 'position':\n      case 'positions':\n      case 'vertices':\n        return 'POSITION';\n\n      case 'normal':\n      case 'normals':\n        return 'NORMAL';\n\n      case 'color':\n      case 'colors':\n        return 'COLOR_0';\n\n      case 'texcoord':\n      case 'texcoords':\n        return 'TEXCOORD_0';\n\n      default:\n        return attributeName;\n    }\n  }\n\n  _getAccessorMinMax(buffer, size) {\n    const result = {\n      min: null,\n      max: null\n    };\n\n    if (buffer.length < size) {\n      return result;\n    }\n\n    result.min = [];\n    result.max = [];\n    const initValues = buffer.subarray(0, size);\n\n    for (const value of initValues) {\n      result.min.push(value);\n      result.max.push(value);\n    }\n\n    for (let index = size; index < buffer.length; index += size) {\n      for (let componentIndex = 0; componentIndex < size; componentIndex++) {\n        result.min[0 + componentIndex] = Math.min(result.min[0 + componentIndex], buffer[index + componentIndex]);\n        result.max[0 + componentIndex] = Math.max(result.max[0 + componentIndex], buffer[index + componentIndex]);\n      }\n    }\n\n    return result;\n  }\n\n}\n//# sourceMappingURL=gltf-scenegraph.js.map","import { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  const accessors = {};\n\n  for (const name in attributes) {\n    const attribute = attributes[name];\n\n    if (name !== 'indices') {\n      const glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute) {\n  const {\n    buffer,\n    size,\n    count\n  } = getAccessorData(attribute);\n  const glTFAccessor = {\n    value: buffer,\n    size,\n    byteOffset: 0,\n    count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\n\nfunction getAccessorData(attribute) {\n  let buffer = attribute;\n  let size = 1;\n  let count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer,\n    size,\n    count\n  };\n}\n\nfunction toTypedArray(array, ArrayType, convertTypedArrays = false) {\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}\n//# sourceMappingURL=gltf-attribute-utils.js.map","import { DracoLoader } from '@loaders.gl/draco';\nimport { sliceArrayBuffer } from '@loaders.gl/loader-utils';\nimport { default as Scenegraph } from '../api/gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-utils/gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport async function decode(gltfData, options, context) {\n  var _options$gltf;\n\n  if (!(options !== null && options !== void 0 && (_options$gltf = options.gltf) !== null && _options$gltf !== void 0 && _options$gltf.decompressMeshes)) {\n    return;\n  }\n\n  const scenegraph = new Scenegraph(gltfData);\n  const promises = [];\n\n  for (const primitive of makeMeshPrimitiveIterator(scenegraph)) {\n    if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n      promises.push(decompressPrimitive(scenegraph, primitive, options, context));\n    }\n  }\n\n  await Promise.all(promises);\n  scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n}\nexport function encode(gltfData, options = {}) {\n  const scenegraph = new Scenegraph(gltfData);\n\n  for (const mesh of scenegraph.json.meshes || []) {\n    compressMesh(mesh, options);\n    scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n  }\n}\n\nasync function decompressPrimitive(scenegraph, primitive, options, context) {\n  const dracoExtension = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n\n  if (!dracoExtension) {\n    return;\n  }\n\n  const buffer = scenegraph.getTypedArrayForBufferView(dracoExtension.bufferView);\n  const bufferCopy = sliceArrayBuffer(buffer.buffer, buffer.byteOffset);\n  const {\n    parse\n  } = context;\n  const dracoOptions = { ...options\n  };\n  delete dracoOptions['3d-tiles'];\n  const decodedData = await parse(bufferCopy, DracoLoader, dracoOptions, context);\n  const decodedAttributes = getGLTFAccessors(decodedData.attributes);\n\n  for (const [attributeName, decodedAttribute] of Object.entries(decodedAttributes)) {\n    if (attributeName in primitive.attributes) {\n      const accessorIndex = primitive.attributes[attributeName];\n      const accessor = scenegraph.getAccessor(accessorIndex);\n\n      if (accessor !== null && accessor !== void 0 && accessor.min && accessor !== null && accessor !== void 0 && accessor.max) {\n        decodedAttribute.min = accessor.min;\n        decodedAttribute.max = accessor.max;\n      }\n    }\n  }\n\n  primitive.attributes = decodedAttributes;\n\n  if (decodedData.indices) {\n    primitive.indices = getGLTFAccessor(decodedData.indices);\n  }\n\n  checkPrimitive(primitive);\n}\n\nfunction compressMesh(attributes, indices, mode = 4, options, context) {\n  if (!options.DracoWriter) {\n    throw new Error('options.gltf.DracoWriter not provided');\n  }\n\n  const compressedData = options.DracoWriter.encodeSync({\n    attributes\n  });\n  const {\n    parseSync\n  } = context;\n  const decodedData = parseSync({\n    attributes\n  });\n\n  const fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  const bufferViewIndex = options.addBufferView(compressedData);\n  const glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode,\n      extensions: {\n        [KHR_DRACO_MESH_COMPRESSION]: {\n          bufferView: bufferViewIndex,\n          attributes: fauxAccessors\n        }\n      }\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('glTF: Empty primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction* makeMeshPrimitiveIterator(scenegraph) {\n  for (const mesh of scenegraph.json.meshes || []) {\n    for (const primitive of mesh.primitives) {\n      yield primitive;\n    }\n  }\n}\n//# sourceMappingURL=KHR_draco_mesh_compression.js.map","export const KHR_BINARY_GLTF = 'KHR_binary_glTF';\nexport const KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport const KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport const KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nexport const KHR_TECHNIQUES_WEBGL = 'KHR_techniques_webgl';\nexport const EXT_MESHOPT_COMPRESSION = 'EXT_meshopt_compression';\nconst COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nconst BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  const GL_TEXTURE_MAG_FILTER = 0x2800;\n  const GL_TEXTURE_MIN_FILTER = 0x2801;\n  const GL_TEXTURE_WRAP_S = 0x2802;\n  const GL_TEXTURE_WRAP_T = 0x2803;\n  const PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}\n//# sourceMappingURL=gltf-constants.js.map","import GLTFScenegraph from '../api/gltf-scenegraph';\nimport { KHR_TECHNIQUES_WEBGL } from '../gltf-utils/gltf-constants';\nexport async function decode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n  const extension = gltfScenegraph.getExtension(KHR_TECHNIQUES_WEBGL);\n\n  if (extension) {\n    const techniques = resolveTechniques(extension, gltfScenegraph);\n\n    for (const material of json.materials || []) {\n      const materialExtension = gltfScenegraph.getObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n\n      if (materialExtension) {\n        material.technique = Object.assign({}, materialExtension, techniques[materialExtension.technique]);\n        material.technique.values = resolveValues(material.technique, gltfScenegraph);\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n    }\n\n    gltfScenegraph.removeExtension(KHR_TECHNIQUES_WEBGL);\n  }\n}\nexport async function encode(gltfData, options) {}\n\nfunction resolveTechniques(techniquesExtension, gltfScenegraph) {\n  const {\n    programs = [],\n    shaders = [],\n    techniques = []\n  } = techniquesExtension;\n  const textDecoder = new TextDecoder();\n  shaders.forEach(shader => {\n    if (Number.isFinite(shader.bufferView)) {\n      shader.code = textDecoder.decode(gltfScenegraph.getTypedArrayForBufferView(shader.bufferView));\n    } else {\n      throw new Error('KHR_techniques_webgl: no shader code');\n    }\n  });\n  programs.forEach(program => {\n    program.fragmentShader = shaders[program.fragmentShader];\n    program.vertexShader = shaders[program.vertexShader];\n  });\n  techniques.forEach(technique => {\n    technique.program = programs[technique.program];\n  });\n  return techniques;\n}\n\nfunction resolveValues(technique, gltfScenegraph) {\n  const values = Object.assign({}, technique.values);\n  Object.keys(technique.uniforms || {}).forEach(uniform => {\n    if (technique.uniforms[uniform].value && !(uniform in values)) {\n      values[uniform] = technique.uniforms[uniform].value;\n    }\n  });\n  Object.keys(values).forEach(uniform => {\n    if (typeof values[uniform] === 'object' && values[uniform].index !== undefined) {\n      values[uniform].texture = gltfScenegraph.getTexture(values[uniform].index);\n    }\n  });\n  return values;\n}\n//# sourceMappingURL=KHR_techniques_webgl.js.map","import * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_techniques_webgl from './KHR_techniques_webgl';\nexport const EXTENSIONS = {\n  KHR_draco_mesh_compression,\n  KHR_materials_unlit,\n  KHR_lights_punctual,\n  KHR_techniques_webgl\n};\nexport async function decodeExtensions(gltf, options = {}, context) {\n  for (const extensionName in EXTENSIONS) {\n    var _options$gltf;\n\n    const excludes = (options === null || options === void 0 ? void 0 : (_options$gltf = options.gltf) === null || _options$gltf === void 0 ? void 0 : _options$gltf.excludeExtensions) || {};\n    const exclude = extensionName in excludes && !excludes[extensionName];\n\n    if (!exclude) {\n      const extension = EXTENSIONS[extensionName];\n      await extension.decode(gltf, options, context);\n    }\n  }\n}\n//# sourceMappingURL=gltf-extensions.js.map","import GLTFScenegraph from '../api/gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-utils/gltf-constants';\nexport async function decode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n\n  for (const material of json.materials || []) {\n    const extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n    if (extension) {\n      material.unlit = true;\n    }\n\n    gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n  }\n}\nexport function encode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n\n  if (gltfScenegraph.materials) {\n    for (const material of json.materials || []) {\n      if (material.unlit) {\n        delete material.unlit;\n        gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT, {});\n        gltfScenegraph.addExtension(KHR_MATERIALS_UNLIT);\n      }\n    }\n  }\n}\n//# sourceMappingURL=KHR_materials_unlit.js.map","import { assert } from '../utils/assert';\nimport GLTFScenegraph from '../api/gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-utils/gltf-constants';\nexport async function decode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n  const extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  for (const node of json.nodes || []) {\n    const nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n    if (nodeExtension) {\n      node.light = nodeExtension.light;\n    }\n\n    gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n  }\n}\nexport async function encode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n\n  if (json.lights) {\n    const extension = gltfScenegraph.addExtension(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    for (const light of gltfScenegraph.json.lights) {\n      const node = light.node;\n      gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}\n//# sourceMappingURL=KHR_lights_punctual.js.map","import * as KHR_binary_glTF from '../extensions/KHR_binary_gltf';\nconst GLTF_ARRAYS = {\n  accessors: 'accessor',\n  animations: 'animation',\n  buffers: 'buffer',\n  bufferViews: 'bufferView',\n  images: 'image',\n  materials: 'material',\n  meshes: 'mesh',\n  nodes: 'node',\n  samplers: 'sampler',\n  scenes: 'scene',\n  skins: 'skin',\n  textures: 'texture'\n};\nconst GLTF_KEYS = {\n  accessor: 'accessors',\n  animations: 'animation',\n  buffer: 'buffers',\n  bufferView: 'bufferViews',\n  image: 'images',\n  material: 'materials',\n  mesh: 'meshes',\n  node: 'nodes',\n  sampler: 'samplers',\n  scene: 'scenes',\n  skin: 'skins',\n  texture: 'textures'\n};\n\nclass GLTFV1Normalizer {\n  constructor(gltf) {\n    this.idToIndexMap = {\n      animations: {},\n      accessors: {},\n      buffers: {},\n      bufferViews: {},\n      images: {},\n      materials: {},\n      meshes: {},\n      nodes: {},\n      samplers: {},\n      scenes: {},\n      skins: {},\n      textures: {}\n    };\n  }\n\n  normalize(gltf, options) {\n    this.json = gltf.json;\n    const json = gltf.json;\n\n    switch (json.asset && json.asset.version) {\n      case '2.0':\n        return;\n\n      case undefined:\n      case '1.0':\n        break;\n\n      default:\n        console.warn(\"glTF: Unknown version \".concat(json.asset.version));\n        return;\n    }\n\n    if (!options.normalize) {\n      throw new Error('glTF v1 is not supported.');\n    }\n\n    console.warn('Converting glTF v1 to glTF v2 format. This is experimental and may fail.');\n\n    this._addAsset(json);\n\n    this._convertTopLevelObjectsToArrays(json);\n\n    KHR_binary_glTF.decode(gltf);\n\n    this._convertObjectIdsToArrayIndices(json);\n\n    this._updateObjects(json);\n\n    this._updateMaterial(json);\n  }\n\n  _addAsset(json) {\n    json.asset = json.asset || {};\n    json.asset.version = '2.0';\n    json.asset.generator = json.asset.generator || 'Normalized to glTF 2.0 by loaders.gl';\n  }\n\n  _convertTopLevelObjectsToArrays(json) {\n    for (const arrayName in GLTF_ARRAYS) {\n      this._convertTopLevelObjectToArray(json, arrayName);\n    }\n  }\n\n  _convertTopLevelObjectToArray(json, mapName) {\n    const objectMap = json[mapName];\n\n    if (!objectMap || Array.isArray(objectMap)) {\n      return;\n    }\n\n    json[mapName] = [];\n\n    for (const id in objectMap) {\n      const object = objectMap[id];\n      object.id = object.id || id;\n      const index = json[mapName].length;\n      json[mapName].push(object);\n      this.idToIndexMap[mapName][id] = index;\n    }\n  }\n\n  _convertObjectIdsToArrayIndices(json) {\n    for (const arrayName in GLTF_ARRAYS) {\n      this._convertIdsToIndices(json, arrayName);\n    }\n\n    if ('scene' in json) {\n      json.scene = this._convertIdToIndex(json.scene, 'scene');\n    }\n\n    for (const texture of json.textures) {\n      this._convertTextureIds(texture);\n    }\n\n    for (const mesh of json.meshes) {\n      this._convertMeshIds(mesh);\n    }\n\n    for (const node of json.nodes) {\n      this._convertNodeIds(node);\n    }\n\n    for (const node of json.scenes) {\n      this._convertSceneIds(node);\n    }\n  }\n\n  _convertTextureIds(texture) {\n    if (texture.source) {\n      texture.source = this._convertIdToIndex(texture.source, 'image');\n    }\n  }\n\n  _convertMeshIds(mesh) {\n    for (const primitive of mesh.primitives) {\n      const {\n        attributes,\n        indices,\n        material\n      } = primitive;\n\n      for (const attributeName in attributes) {\n        attributes[attributeName] = this._convertIdToIndex(attributes[attributeName], 'accessor');\n      }\n\n      if (indices) {\n        primitive.indices = this._convertIdToIndex(indices, 'accessor');\n      }\n\n      if (material) {\n        primitive.material = this._convertIdToIndex(material, 'material');\n      }\n    }\n  }\n\n  _convertNodeIds(node) {\n    if (node.children) {\n      node.children = node.children.map(child => this._convertIdToIndex(child, 'node'));\n    }\n\n    if (node.meshes) {\n      node.meshes = node.meshes.map(mesh => this._convertIdToIndex(mesh, 'mesh'));\n    }\n  }\n\n  _convertSceneIds(scene) {\n    if (scene.nodes) {\n      scene.nodes = scene.nodes.map(node => this._convertIdToIndex(node, 'node'));\n    }\n  }\n\n  _convertIdsToIndices(json, topLevelArrayName) {\n    if (!json[topLevelArrayName]) {\n      console.warn(\"gltf v1: json doesn't contain attribute \".concat(topLevelArrayName));\n      json[topLevelArrayName] = [];\n    }\n\n    for (const object of json[topLevelArrayName]) {\n      for (const key in object) {\n        const id = object[key];\n\n        const index = this._convertIdToIndex(id, key);\n\n        object[key] = index;\n      }\n    }\n  }\n\n  _convertIdToIndex(id, key) {\n    const arrayName = GLTF_KEYS[key];\n\n    if (arrayName in this.idToIndexMap) {\n      const index = this.idToIndexMap[arrayName][id];\n\n      if (!Number.isFinite(index)) {\n        throw new Error(\"gltf v1: failed to resolve \".concat(key, \" with id \").concat(id));\n      }\n\n      return index;\n    }\n\n    return id;\n  }\n\n  _updateObjects(json) {\n    for (const buffer of this.json.buffers) {\n      delete buffer.type;\n    }\n  }\n\n  _updateMaterial(json) {\n    for (const material of json.materials) {\n      material.pbrMetallicRoughness = {\n        baseColorFactor: [1, 1, 1, 1],\n        metallicFactor: 1,\n        roughnessFactor: 1\n      };\n      const textureId = material.values && material.values.tex;\n      const textureIndex = json.textures.findIndex(texture => texture.id === textureId);\n\n      if (textureIndex !== -1) {\n        material.pbrMetallicRoughness.baseColorTexture = {\n          index: textureIndex\n        };\n      }\n    }\n  }\n\n}\n\nexport function normalizeGLTFV1(gltf, options = {}) {\n  return new GLTFV1Normalizer().normalize(gltf, options);\n}\n//# sourceMappingURL=normalize-gltf-v1.js.map","import GLTFScenegraph from '../api/gltf-scenegraph';\nimport { KHR_BINARY_GLTF } from '../gltf-utils/gltf-constants';\nexport function decode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {\n    json\n  } = gltfScenegraph;\n\n  for (const node of json.images || []) {\n    const extension = gltfScenegraph.removeObjectExtension(node, KHR_BINARY_GLTF);\n\n    if (extension) {\n      Object.assign(node, extension);\n    }\n  }\n\n  if (json.buffers && json.buffers[0]) {\n    delete json.buffers[0].uri;\n  }\n\n  gltfScenegraph.removeExtension(KHR_BINARY_GLTF);\n}\nexport function encode() {\n  throw new Error(KHR_BINARY_GLTF);\n}\n//# sourceMappingURL=KHR_binary_gltf.js.map","import { assert } from '../utils/assert';\nimport { getAccessorArrayTypeAndLength } from '../gltf-utils/gltf-utils';\nconst COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nconst BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nconst GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nconst SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nconst DEFAULT_SAMPLER = {\n  [GL_SAMPLER.TEXTURE_MAG_FILTER]: GL_SAMPLER.LINEAR,\n  [GL_SAMPLER.TEXTURE_MIN_FILTER]: GL_SAMPLER.NEAREST_MIPMAP_LINEAR,\n  [GL_SAMPLER.TEXTURE_WRAP_S]: GL_SAMPLER.REPEAT,\n  [GL_SAMPLER.TEXTURE_WRAP_]: GL_SAMPLER.REPEAT\n};\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nclass GLTFPostProcessor {\n  postProcess(gltf, options = {}) {\n    const {\n      json,\n      buffers = [],\n      images = [],\n      baseUri = ''\n    } = gltf;\n    assert(json);\n    this.baseUri = baseUri;\n    this.json = json;\n    this.buffers = buffers;\n    this.images = images;\n\n    this._resolveTree(this.json, options);\n\n    return this.json;\n  }\n\n  _resolveTree(json, options = {}) {\n    if (json.bufferViews) {\n      json.bufferViews = json.bufferViews.map((bufView, i) => this._resolveBufferView(bufView, i));\n    }\n\n    if (json.images) {\n      json.images = json.images.map((image, i) => this._resolveImage(image, i));\n    }\n\n    if (json.samplers) {\n      json.samplers = json.samplers.map((sampler, i) => this._resolveSampler(sampler, i));\n    }\n\n    if (json.textures) {\n      json.textures = json.textures.map((texture, i) => this._resolveTexture(texture, i));\n    }\n\n    if (json.accessors) {\n      json.accessors = json.accessors.map((accessor, i) => this._resolveAccessor(accessor, i));\n    }\n\n    if (json.materials) {\n      json.materials = json.materials.map((material, i) => this._resolveMaterial(material, i));\n    }\n\n    if (json.meshes) {\n      json.meshes = json.meshes.map((mesh, i) => this._resolveMesh(mesh, i));\n    }\n\n    if (json.nodes) {\n      json.nodes = json.nodes.map((node, i) => this._resolveNode(node, i));\n    }\n\n    if (json.skins) {\n      json.skins = json.skins.map((skin, i) => this._resolveSkin(skin, i));\n    }\n\n    if (json.scenes) {\n      json.scenes = json.scenes.map((scene, i) => this._resolveScene(scene, i));\n    }\n\n    if (json.scene !== undefined) {\n      json.scene = json.scenes[this.json.scene];\n    }\n  }\n\n  getScene(index) {\n    return this._get('scenes', index);\n  }\n\n  getNode(index) {\n    return this._get('nodes', index);\n  }\n\n  getSkin(index) {\n    return this._get('skins', index);\n  }\n\n  getMesh(index) {\n    return this._get('meshes', index);\n  }\n\n  getMaterial(index) {\n    return this._get('materials', index);\n  }\n\n  getAccessor(index) {\n    return this._get('accessors', index);\n  }\n\n  getCamera(index) {\n    return null;\n  }\n\n  getTexture(index) {\n    return this._get('textures', index);\n  }\n\n  getSampler(index) {\n    return this._get('samplers', index);\n  }\n\n  getImage(index) {\n    return this._get('images', index);\n  }\n\n  getBufferView(index) {\n    return this._get('bufferViews', index);\n  }\n\n  getBuffer(index) {\n    return this._get('buffers', index);\n  }\n\n  _get(array, index) {\n    if (typeof index === 'object') {\n      return index;\n    }\n\n    const object = this.json[array] && this.json[array][index];\n\n    if (!object) {\n      console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n    }\n\n    return object;\n  }\n\n  _resolveScene(scene, index) {\n    scene.id = scene.id || \"scene-\".concat(index);\n    scene.nodes = (scene.nodes || []).map(node => this.getNode(node));\n    return scene;\n  }\n\n  _resolveNode(node, index) {\n    node.id = node.id || \"node-\".concat(index);\n\n    if (node.children) {\n      node.children = node.children.map(child => this.getNode(child));\n    }\n\n    if (node.mesh !== undefined) {\n      node.mesh = this.getMesh(node.mesh);\n    } else if (node.meshes !== undefined && node.meshes.length) {\n      node.mesh = node.meshes.reduce((accum, meshIndex) => {\n        const mesh = this.getMesh(meshIndex);\n        accum.id = mesh.id;\n        accum.primitives = accum.primitives.concat(mesh.primitives);\n        return accum;\n      }, {\n        primitives: []\n      });\n    }\n\n    if (node.camera !== undefined) {\n      node.camera = this.getCamera(node.camera);\n    }\n\n    if (node.skin !== undefined) {\n      node.skin = this.getSkin(node.skin);\n    }\n\n    return node;\n  }\n\n  _resolveSkin(skin, index) {\n    skin.id = skin.id || \"skin-\".concat(index);\n    skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n    return skin;\n  }\n\n  _resolveMesh(mesh, index) {\n    mesh.id = mesh.id || \"mesh-\".concat(index);\n\n    if (mesh.primitives) {\n      mesh.primitives = mesh.primitives.map(primitive => {\n        primitive = { ...primitive\n        };\n        const attributes = primitive.attributes;\n        primitive.attributes = {};\n\n        for (const attribute in attributes) {\n          primitive.attributes[attribute] = this.getAccessor(attributes[attribute]);\n        }\n\n        if (primitive.indices !== undefined) {\n          primitive.indices = this.getAccessor(primitive.indices);\n        }\n\n        if (primitive.material !== undefined) {\n          primitive.material = this.getMaterial(primitive.material);\n        }\n\n        return primitive;\n      });\n    }\n\n    return mesh;\n  }\n\n  _resolveMaterial(material, index) {\n    material.id = material.id || \"material-\".concat(index);\n\n    if (material.normalTexture) {\n      material.normalTexture = { ...material.normalTexture\n      };\n      material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n    }\n\n    if (material.occlusionTexture) {\n      material.occlustionTexture = { ...material.occlustionTexture\n      };\n      material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n    }\n\n    if (material.emissiveTexture) {\n      material.emmisiveTexture = { ...material.emmisiveTexture\n      };\n      material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n    }\n\n    if (!material.emissiveFactor) {\n      material.emissiveFactor = material.emmisiveTexture ? [1, 1, 1] : [0, 0, 0];\n    }\n\n    if (material.pbrMetallicRoughness) {\n      material.pbrMetallicRoughness = { ...material.pbrMetallicRoughness\n      };\n      const mr = material.pbrMetallicRoughness;\n\n      if (mr.baseColorTexture) {\n        mr.baseColorTexture = { ...mr.baseColorTexture\n        };\n        mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n      }\n\n      if (mr.metallicRoughnessTexture) {\n        mr.metallicRoughnessTexture = { ...mr.metallicRoughnessTexture\n        };\n        mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n      }\n    }\n\n    return material;\n  }\n\n  _resolveAccessor(accessor, index) {\n    accessor.id = accessor.id || \"accessor-\".concat(index);\n\n    if (accessor.bufferView !== undefined) {\n      accessor.bufferView = this.getBufferView(accessor.bufferView);\n    }\n\n    accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n    accessor.components = getSizeFromAccessorType(accessor.type);\n    accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n    if (accessor.bufferView) {\n      const buffer = accessor.bufferView.buffer;\n      const {\n        ArrayType,\n        byteLength\n      } = getAccessorArrayTypeAndLength(accessor, accessor.bufferView);\n      const byteOffset = (accessor.bufferView.byteOffset || 0) + (accessor.byteOffset || 0) + buffer.byteOffset;\n      const cutBufffer = buffer.arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n      accessor.value = new ArrayType(cutBufffer);\n    }\n\n    return accessor;\n  }\n\n  _resolveTexture(texture, index) {\n    texture.id = texture.id || \"texture-\".concat(index);\n    texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n    texture.source = this.getImage(texture.source);\n    return texture;\n  }\n\n  _resolveSampler(sampler, index) {\n    sampler.id = sampler.id || \"sampler-\".concat(index);\n    sampler.parameters = {};\n\n    for (const key in sampler) {\n      const glEnum = this._enumSamplerParameter(key);\n\n      if (glEnum !== undefined) {\n        sampler.parameters[glEnum] = sampler[key];\n      }\n    }\n\n    return sampler;\n  }\n\n  _enumSamplerParameter(key) {\n    return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n  }\n\n  _resolveImage(image, index) {\n    image.id = image.id || \"image-\".concat(index);\n\n    if (image.bufferView !== undefined) {\n      image.bufferView = this.getBufferView(image.bufferView);\n    }\n\n    const preloadedImage = this.images[index];\n\n    if (preloadedImage) {\n      image.image = preloadedImage;\n    }\n\n    return image;\n  }\n\n  _resolveBufferView(bufferView, index) {\n    bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n    const bufferIndex = bufferView.buffer;\n    bufferView.buffer = this.buffers[bufferIndex];\n    const arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n    let byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n    if ('byteOffset' in bufferView) {\n      byteOffset += bufferView.byteOffset;\n    }\n\n    bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    return bufferView;\n  }\n\n  _resolveCamera(camera, index) {\n    camera.id = camera.id || \"camera-\".concat(index);\n\n    if (camera.perspective) {}\n\n    if (camera.orthographic) {}\n\n    return camera;\n  }\n\n}\n\nexport function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}\n//# sourceMappingURL=post-process-gltf.js.map","import { padToNBytes, assert } from '@loaders.gl/loader-utils';\nconst MAGIC_glTF = 0x676c5446;\nconst GLB_FILE_HEADER_SIZE = 12;\nconst GLB_CHUNK_HEADER_SIZE = 8;\nconst GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nconst GLB_CHUNK_TYPE_BIN = 0x004e4942;\nconst GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nconst GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nconst GLB_V1_CONTENT_FORMAT_JSON = 0x0;\nconst LE = true;\n\nfunction getMagicString(dataView, byteOffset = 0) {\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer, byteOffset = 0, options = {}) {\n  const dataView = new DataView(arrayBuffer);\n  const {\n    magic = MAGIC_glTF\n  } = options;\n  const magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer, byteOffset = 0, options = {}) {\n  const dataView = new DataView(arrayBuffer);\n  const type = getMagicString(dataView, byteOffset + 0);\n  const version = dataView.getUint32(byteOffset + 4, LE);\n  const byteLength = dataView.getUint32(byteOffset + 8, LE);\n  Object.assign(glb, {\n    header: {\n      byteOffset,\n      byteLength,\n      hasBinChunk: false\n    },\n    type,\n    version,\n    json: {},\n    binChunks: []\n  });\n  byteOffset += GLB_FILE_HEADER_SIZE;\n\n  switch (glb.version) {\n    case 1:\n      return parseGLBV1(glb, dataView, byteOffset);\n\n    case 2:\n      return parseGLBV2(glb, dataView, byteOffset, options = {});\n\n    default:\n      throw new Error(\"Invalid GLB version \".concat(glb.version, \". Only supports v1 and v2.\"));\n  }\n}\n\nfunction parseGLBV1(glb, dataView, byteOffset) {\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  const contentLength = dataView.getUint32(byteOffset + 0, LE);\n  const contentFormat = dataView.getUint32(byteOffset + 4, LE);\n  byteOffset += GLB_CHUNK_HEADER_SIZE;\n  assert(contentFormat === GLB_V1_CONTENT_FORMAT_JSON);\n  parseJSONChunk(glb, dataView, byteOffset, contentLength);\n  byteOffset += contentLength;\n  byteOffset += parseBINChunk(glb, dataView, byteOffset, glb.header.byteLength);\n  return byteOffset;\n}\n\nfunction parseGLBV2(glb, dataView, byteOffset, options) {\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  parseGLBChunksSync(glb, dataView, byteOffset, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    const chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    const chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padToNBytes(chunkLength, 4);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength) {\n  const jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  const textDecoder = new TextDecoder('utf8');\n  const jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n  return padToNBytes(chunkLength, 4);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n  return padToNBytes(chunkLength, 4);\n}\n//# sourceMappingURL=parse-glb.js.map","import { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, sliceArrayBuffer } from '@loaders.gl/loader-utils';\nimport { assert } from '../utils/assert';\nimport { resolveUrl } from '../gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from '../gltf-utils/get-typed-array';\nimport { decodeExtensions } from '../extensions/gltf-extensions';\nimport { normalizeGLTFV1 } from '../api/normalize-gltf-v1';\nimport { postProcessGLTF } from '../api/post-process-gltf';\nimport parseGLBSync, { isGLB } from './parse-glb';\nexport function isGLTF(arrayBuffer, options) {\n  const byteOffset = 0;\n  return isGLB(arrayBuffer, byteOffset, options);\n}\nexport async function parseGLTF(gltf, arrayBufferOrString, byteOffset = 0, options, context) {\n  var _options$gltf, _options$gltf2, _options$gltf3, _options$gltf4;\n\n  parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n  normalizeGLTFV1(gltf, {\n    normalize: options === null || options === void 0 ? void 0 : (_options$gltf = options.gltf) === null || _options$gltf === void 0 ? void 0 : _options$gltf.normalize\n  });\n  const promises = [];\n\n  if (options !== null && options !== void 0 && (_options$gltf2 = options.gltf) !== null && _options$gltf2 !== void 0 && _options$gltf2.loadBuffers && gltf.json.buffers) {\n    await loadBuffers(gltf, options, context);\n  }\n\n  if (options !== null && options !== void 0 && (_options$gltf3 = options.gltf) !== null && _options$gltf3 !== void 0 && _options$gltf3.loadImages) {\n    const promise = loadImages(gltf, options, context);\n    promises.push(promise);\n  }\n\n  const promise = decodeExtensions(gltf, options, context);\n  promises.push(promise);\n  await Promise.all(promises);\n  return options !== null && options !== void 0 && (_options$gltf4 = options.gltf) !== null && _options$gltf4 !== void 0 && _options$gltf4.postProcess ? postProcessGLTF(gltf, options) : gltf;\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    const textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    const glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options.glb);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, 'GLTF: must be ArrayBuffer or string');\n  }\n\n  const buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    const {\n      binChunks\n    } = gltf._glb;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  const images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nasync function loadBuffers(gltf, options, context) {\n  for (let i = 0; i < gltf.json.buffers.length; ++i) {\n    const buffer = gltf.json.buffers[i];\n\n    if (buffer.uri) {\n      const {\n        fetch\n      } = context;\n      assert(fetch);\n      const uri = resolveUrl(buffer.uri, options);\n      const response = await fetch(uri);\n      const arrayBuffer = await response.arrayBuffer();\n      gltf.buffers[i] = {\n        arrayBuffer,\n        byteOffset: 0,\n        byteLength: arrayBuffer.byteLength\n      };\n      delete buffer.uri;\n    }\n  }\n}\n\nasync function loadImages(gltf, options, context) {\n  const images = gltf.json.images || [];\n  const promises = [];\n\n  for (let i = 0; i < images.length; ++i) {\n    promises.push(loadImage(gltf, images[i], i, options, context));\n  }\n\n  return await Promise.all(promises);\n}\n\nasync function loadImage(gltf, image, i, options, context) {\n  const {\n    fetch,\n    parse\n  } = context;\n  let arrayBuffer;\n\n  if (image.uri) {\n    const uri = resolveUrl(image.uri, options);\n    const response = await fetch(uri);\n    arrayBuffer = await response.arrayBuffer();\n  }\n\n  if (Number.isFinite(image.bufferView)) {\n    const array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n    arrayBuffer = sliceArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n  }\n\n  assert(arrayBuffer, 'glTF image has no data');\n  const parsedImage = await parse(arrayBuffer, ImageLoader, {}, context);\n  gltf.images[i] = parsedImage;\n}\n//# sourceMappingURL=parse-gltf.js.map","import { assert } from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  const bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  const bufferIndex = bufferView.buffer;\n  const binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  const byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  const image = json.images[imageIndex];\n  const bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}\n//# sourceMappingURL=get-typed-array.js.map","import { VERSION } from './lib/utils/version';\nimport { parseGLTF } from './lib/parsers/parse-gltf';\nexport const GLTFLoader = {\n  name: 'glTF',\n  id: 'gltf',\n  module: 'gltf',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeTypes: ['model/gltf+json', 'model/gltf-binary'],\n  text: true,\n  binary: true,\n  tests: ['glTF'],\n  parse,\n  options: {\n    gltf: {\n      normalize: true,\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    log: console\n  },\n  deprecatedOptions: {\n    fetchImages: 'gltf.loadImages',\n    createImages: 'gltf.loadImages',\n    decompress: 'gltf.decompressMeshes',\n    postProcess: 'gltf.postProcess',\n    gltf: {\n      decompress: 'gltf.decompressMeshes'\n    }\n  }\n};\nexport async function parse(arrayBuffer, options = {}, context) {\n  options = { ...GLTFLoader.options,\n    ...options\n  };\n  options.gltf = { ...GLTFLoader.options.gltf,\n    ...options.gltf\n  };\n  const {\n    byteOffset = 0\n  } = options;\n  const gltf = {};\n  return await parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n}\n//# sourceMappingURL=gltf-loader.js.map","export const VERSION = typeof \"3.0.0-beta.5\" !== 'undefined' ? \"3.0.0-beta.5\" : 'latest';\n//# sourceMappingURL=version.js.map","import { GLTFLoader } from '@loaders.gl/gltf';\nimport { sliceArrayBuffer } from '@loaders.gl/loader-utils';\nexport const GLTF_FORMAT = {\n  URI: 0,\n  EMBEDDED: 1\n};\nexport function parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset, options) {\n  tile.rotateYtoZ = true;\n  const gltfByteLength = tile.byteOffset + tile.byteLength - byteOffset;\n\n  if (gltfByteLength === 0) {\n    throw new Error('glTF byte length must be greater than 0.');\n  }\n\n  tile.gltfUpAxis = options['3d-tiles'] && options['3d-tiles'].assetGltfUpAxis ? options['3d-tiles'].assetGltfUpAxis : 'Y';\n  tile.gltfArrayBuffer = sliceArrayBuffer(arrayBuffer, byteOffset, gltfByteLength);\n  tile.gltfByteOffset = 0;\n  tile.gltfByteLength = gltfByteLength;\n\n  if (byteOffset % 4 === 0) {} else {\n    console.warn(\"\".concat(tile.type, \": embedded glb is not aligned to a 4-byte boundary.\"));\n  }\n\n  return tile.byteOffset + tile.byteLength;\n}\nexport async function extractGLTF(tile, gltfFormat, options, context) {\n  const tile3DOptions = options['3d-tiles'] || {};\n  extractGLTFBufferOrURL(tile, gltfFormat, options);\n\n  if (tile3DOptions.loadGLTF) {\n    const {\n      parse,\n      fetch\n    } = context;\n\n    if (tile.gltfUrl) {\n      tile.gltfArrayBuffer = await fetch(tile.gltfUrl, options);\n      tile.gltfByteOffset = 0;\n    }\n\n    if (tile.gltfArrayBuffer) {\n      tile.gltf = await parse(tile.gltfArrayBuffer, GLTFLoader, options, context);\n      delete tile.gltfArrayBuffer;\n      delete tile.gltfByteOffset;\n      delete tile.gltfByteLength;\n    }\n  }\n}\n\nfunction extractGLTFBufferOrURL(tile, gltfFormat, options) {\n  switch (gltfFormat) {\n    case GLTF_FORMAT.URI:\n      const gltfUrlBytes = new Uint8Array(tile.gltfArrayBuffer, tile.gltfByteOffset);\n      const textDecoder = new TextDecoder();\n      const gltfUrl = textDecoder.decode(gltfUrlBytes);\n      tile.gltfUrl = gltfUrl.replace(/[\\s\\0]+$/, '');\n      delete tile.gltfArrayBuffer;\n      delete tile.gltfByteOffset;\n      delete tile.gltfByteLength;\n      break;\n\n    case GLTF_FORMAT.EMBEDDED:\n      break;\n\n    default:\n      throw new Error(\"b3dm: Illegal glTF format field\");\n  }\n}\n//# sourceMappingURL=parse-3d-tile-gltf-view.js.map","import { GL } from '@loaders.gl/math';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { parse3DTileGLTFViewSync, extractGLTF, GLTF_FORMAT } from './helpers/parse-3d-tile-gltf-view';\nexport async function parseBatchedModel3DTile(tile, arrayBuffer, byteOffset, options, context) {\n  var _tile$gltf;\n\n  byteOffset = parseBatchedModel(tile, arrayBuffer, byteOffset, options, context);\n  await extractGLTF(tile, GLTF_FORMAT.EMBEDDED, options, context);\n  const extensions = tile === null || tile === void 0 ? void 0 : (_tile$gltf = tile.gltf) === null || _tile$gltf === void 0 ? void 0 : _tile$gltf.extension;\n\n  if (extensions && extensions.CESIUM_RTC) {\n    tile.rtcCenter = extensions.CESIUM_RTC.center;\n  }\n\n  return byteOffset;\n}\n\nfunction parseBatchedModel(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset, options);\n  const featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  return byteOffset;\n}\n//# sourceMappingURL=parse-3d-tile-batched-model.js.map","import { Vector3, Matrix3, Matrix4, Quaternion } from '@math.gl/core';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { GL } from '@loaders.gl/math';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport Tile3DBatchTable from '../classes/tile-3d-batch-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { parse3DTileGLTFViewSync, extractGLTF } from './helpers/parse-3d-tile-gltf-view';\nexport async function parseInstancedModel3DTile(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parseInstancedModel(tile, arrayBuffer, byteOffset, options, context);\n  await extractGLTF(tile, tile.gltfFormat, options, context);\n  return byteOffset;\n}\n\nfunction parseInstancedModel(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n\n  if (tile.version !== 1) {\n    throw new Error(\"Instanced 3D Model version \".concat(tile.version, \" is not supported\"));\n  }\n\n  byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n  const view = new DataView(arrayBuffer);\n  tile.gltfFormat = view.getUint32(byteOffset, true);\n  byteOffset += 4;\n  byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset, options);\n\n  if (tile.featureTableJsonByteLength === 0) {\n    throw new Error('i3dm parser: featureTableJsonByteLength is zero.');\n  }\n\n  const featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  const instancesLength = featureTable.getGlobalProperty('INSTANCES_LENGTH');\n  featureTable.featuresLength = instancesLength;\n\n  if (!Number.isFinite(instancesLength)) {\n    throw new Error('i3dm parser: INSTANCES_LENGTH must be defined');\n  }\n\n  tile.eastNorthUp = featureTable.getGlobalProperty('EAST_NORTH_UP');\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  const batchTable = new Tile3DBatchTable(tile.batchTableJson, tile.batchTableBinary, instancesLength);\n  extractInstancedAttributes(tile, featureTable, batchTable, instancesLength);\n  return byteOffset;\n}\n\nfunction extractInstancedAttributes(tile, featureTable, batchTable, instancesLength) {\n  const collectionOptions = {\n    instances: new Array(instancesLength),\n    batchTable: tile._batchTable,\n    cull: false,\n    url: undefined,\n    gltf: undefined,\n    basePath: undefined,\n    incrementallyLoadTextures: false,\n    forwardAxis: [1, 0, 0]\n  };\n  const instances = collectionOptions.instances;\n  const instancePosition = new Vector3();\n  const instanceNormalRight = new Vector3();\n  const instanceNormalUp = new Vector3();\n  const instanceNormalForward = new Vector3();\n  const instanceRotation = new Matrix3();\n  const instanceQuaternion = new Quaternion();\n  const instanceScale = new Vector3();\n  const instanceTranslationRotationScale = {};\n  const instanceTransform = new Matrix4();\n  const scratch1 = [];\n  const scratch2 = [];\n  const scratchVector1 = new Vector3();\n  const scratchVector2 = new Vector3();\n\n  for (let i = 0; i < instancesLength; i++) {\n    let position;\n\n    if (featureTable.hasProperty('POSITION')) {\n      position = featureTable.getProperty('POSITION', GL.FLOAT, 3, i, instancePosition);\n    } else if (featureTable.hasProperty('POSITION_QUANTIZED')) {\n      position = featureTable.getProperty('POSITION_QUANTIZED', GL.UNSIGNED_SHORT, 3, i, instancePosition);\n      const quantizedVolumeOffset = featureTable.getGlobalProperty('QUANTIZED_VOLUME_OFFSET', GL.FLOAT, 3, scratchVector1);\n\n      if (!quantizedVolumeOffset) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.');\n      }\n\n      const quantizedVolumeScale = featureTable.getGlobalProperty('QUANTIZED_VOLUME_SCALE', GL.FLOAT, 3, scratchVector2);\n\n      if (!quantizedVolumeScale) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.');\n      }\n\n      const MAX_UNSIGNED_SHORT = 65535.0;\n\n      for (let j = 0; j < 3; j++) {\n        position[j] = position[j] / MAX_UNSIGNED_SHORT * quantizedVolumeScale[j] + quantizedVolumeOffset[j];\n      }\n    }\n\n    if (!position) {\n      throw new Error('i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.');\n    }\n\n    instancePosition.copy(position);\n    instanceTranslationRotationScale.translation = instancePosition;\n    tile.normalUp = featureTable.getProperty('NORMAL_UP', GL.FLOAT, 3, i, scratch1);\n    tile.normalRight = featureTable.getProperty('NORMAL_RIGHT', GL.FLOAT, 3, i, scratch2);\n    const hasCustomOrientation = false;\n\n    if (tile.normalUp) {\n      if (!tile.normalRight) {\n        throw new Error('i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.');\n      }\n\n      tile.hasCustomOrientation = true;\n    } else {\n      tile.octNormalUp = featureTable.getProperty('NORMAL_UP_OCT32P', GL.UNSIGNED_SHORT, 2, scratch1);\n      tile.octNormalRight = featureTable.getProperty('NORMAL_RIGHT_OCT32P', GL.UNSIGNED_SHORT, 2, scratch2);\n\n      if (tile.octNormalUp) {\n        if (!tile.octNormalRight) {\n          throw new Error('i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P');\n        }\n\n        throw new Error('i3dm: oct-encoded orientation not implemented');\n      } else if (tile.eastNorthUp) {\n        Ellipsoid.WGS84.eastNorthUpToFixedFrame(instancePosition, instanceTransform);\n        instanceTransform.getRotationMatrix3(instanceRotation);\n      } else {\n        instanceRotation.identity();\n      }\n    }\n\n    if (hasCustomOrientation) {\n      instanceNormalForward.copy(instanceNormalRight).cross(instanceNormalUp).normalize();\n      instanceRotation.setColumn(0, instanceNormalRight);\n      instanceRotation.setColumn(1, instanceNormalUp);\n      instanceRotation.setColumn(2, instanceNormalForward);\n    }\n\n    instanceQuaternion.fromMatrix3(instanceRotation);\n    instanceTranslationRotationScale.rotation = instanceQuaternion;\n    instanceScale.set(1.0, 1.0, 1.0);\n    const scale = featureTable.getProperty('SCALE', GL.FLOAT, 1, i);\n\n    if (Number.isFinite(scale)) {\n      instanceScale.multiplyByScalar(scale);\n    }\n\n    const nonUniformScale = featureTable.getProperty('SCALE_NON_UNIFORM', GL.FLOAT, 3, i, scratch1);\n\n    if (nonUniformScale) {\n      instanceScale.scale(nonUniformScale);\n    }\n\n    instanceTranslationRotationScale.scale = instanceScale;\n    let batchId = featureTable.getProperty('BATCH_ID', GL.UNSIGNED_SHORT, 1, i);\n\n    if (batchId === undefined) {\n      batchId = i;\n    }\n\n    const rotationMatrix = new Matrix4().fromQuaternion(instanceTranslationRotationScale.rotation);\n    instanceTransform.identity();\n    instanceTransform.translate(instanceTranslationRotationScale.translation);\n    instanceTransform.multiplyRight(rotationMatrix);\n    instanceTransform.scale(instanceTranslationRotationScale.scale);\n    const modelMatrix = instanceTransform.clone();\n    instances[i] = {\n      modelMatrix,\n      batchId\n    };\n  }\n\n  tile.instances = instances;\n}\n//# sourceMappingURL=parse-3d-tile-instanced-model.js.map","import { TILE3D_TYPE } from '../constants';\nimport { getMagicString } from './helpers/parse-utils';\nimport { parsePointCloud3DTile } from './parse-3d-tile-point-cloud';\nimport { parseBatchedModel3DTile } from './parse-3d-tile-batched-model';\nimport { parseInstancedModel3DTile } from './parse-3d-tile-instanced-model';\nimport { parseComposite3DTile } from './parse-3d-tile-composite';\nexport async function parse3DTile(arrayBuffer, byteOffset = 0, options, context, tile = {}) {\n  tile.byteOffset = byteOffset;\n  tile.type = getMagicString(arrayBuffer, byteOffset);\n\n  switch (tile.type) {\n    case TILE3D_TYPE.COMPOSITE:\n      return await parseComposite3DTile(tile, arrayBuffer, byteOffset, options, context, parse3DTile);\n\n    case TILE3D_TYPE.BATCHED_3D_MODEL:\n      return await parseBatchedModel3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n    case TILE3D_TYPE.INSTANCED_3D_MODEL:\n      return await parseInstancedModel3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n    case TILE3D_TYPE.POINT_CLOUD:\n      return await parsePointCloud3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n    default:\n      throw new Error(\"3DTileLoader: unknown type \".concat(tile.type));\n  }\n}\n//# sourceMappingURL=parse-3d-tile.js.map","import { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nexport async function parseComposite3DTile(tile, arrayBuffer, byteOffset, options, context, parse3DTile) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n  const view = new DataView(arrayBuffer);\n  tile.tilesLength = view.getUint32(byteOffset, true);\n  byteOffset += 4;\n  tile.tiles = [];\n\n  while (tile.tiles.length < tile.tilesLength && tile.byteLength - byteOffset > 12) {\n    const subtile = {};\n    tile.tiles.push(subtile);\n    byteOffset = await parse3DTile(arrayBuffer, byteOffset, options, context, subtile);\n  }\n\n  return byteOffset;\n}\n//# sourceMappingURL=parse-3d-tile-composite.js.map","import { LOD_METRIC_TYPE, TILE_REFINEMENT, TILE_TYPE } from '@loaders.gl/tiles';\n\nfunction getTileType(tile) {\n  if (!tile.contentUrl) {\n    return TILE_TYPE.EMPTY;\n  }\n\n  const contentUrl = tile.contentUrl;\n  const fileExtension = contentUrl.split('.').pop();\n\n  switch (fileExtension) {\n    case 'pnts':\n      return TILE_TYPE.POINTCLOUD;\n\n    case 'i3dm':\n    case 'b3dm':\n      return TILE_TYPE.SCENEGRAPH;\n\n    default:\n      return fileExtension;\n  }\n}\n\nfunction getRefine(refine) {\n  switch (refine) {\n    case 'REPLACE':\n    case 'replace':\n      return TILE_REFINEMENT.REPLACE;\n\n    case 'ADD':\n    case 'add':\n      return TILE_REFINEMENT.ADD;\n\n    default:\n      return refine;\n  }\n}\n\nexport function normalizeTileData(tile, options) {\n  if (tile.content) {\n    const contentUri = tile.content.uri || tile.content.url;\n    tile.contentUrl = \"\".concat(options.basePath, \"/\").concat(contentUri);\n  }\n\n  tile.id = tile.contentUrl;\n  tile.lodMetricType = LOD_METRIC_TYPE.GEOMETRIC_ERROR;\n  tile.lodMetricValue = tile.geometricError;\n  tile.transformMatrix = tile.transform;\n  tile.type = getTileType(tile);\n  tile.refine = getRefine(tile.refine);\n  return tile;\n}\nexport function normalizeTileHeaders(tileset) {\n  const basePath = tileset.basePath;\n  const root = normalizeTileData(tileset.root, tileset);\n  const stack = [];\n  stack.push(root);\n\n  while (stack.length > 0) {\n    const tile = stack.pop();\n    const children = tile.children || [];\n\n    for (const childHeader of children) {\n      normalizeTileData(childHeader, {\n        basePath\n      });\n      stack.push(childHeader);\n    }\n  }\n\n  return root;\n}\n//# sourceMappingURL=parse-3d-tile-header.js.map","import { path } from '@loaders.gl/loader-utils';\nimport { TILESET_TYPE, LOD_METRIC_TYPE } from '@loaders.gl/tiles';\nimport { VERSION } from './lib/utils/version';\nimport { parse3DTile } from './lib/parsers/parse-3d-tile';\nimport { normalizeTileHeaders } from './lib/parsers/parse-3d-tile-header';\nexport const Tiles3DLoader = {\n  id: '3d-tiles',\n  name: '3D Tiles',\n  module: '3d-tiles',\n  version: VERSION,\n  extensions: ['cmpt', 'pnts', 'b3dm', 'i3dm'],\n  mimeTypes: ['application/octet-stream'],\n  tests: ['cmpt', 'pnts', 'b3dm', 'i3dm'],\n  parse,\n  options: {\n    '3d-tiles': {\n      loadGLTF: true,\n      decodeQuantizedPositions: false,\n      isTileset: 'auto',\n      assetGltfUpAxis: null\n    }\n  }\n};\n\nfunction getBaseUri(tileset) {\n  return path.dirname(tileset.url);\n}\n\nasync function parseTile(arrayBuffer, options, context) {\n  const tile = {\n    content: {\n      featureIds: null\n    }\n  };\n  const byteOffset = 0;\n  await parse3DTile(arrayBuffer, byteOffset, options, context, tile.content);\n  return tile.content;\n}\n\nasync function parseTileset(data, options, context) {\n  const tilesetJson = JSON.parse(new TextDecoder().decode(data));\n  tilesetJson.loader = options.loader || Tiles3DLoader;\n  tilesetJson.url = context.url;\n  tilesetJson.basePath = getBaseUri(tilesetJson);\n  tilesetJson.root = normalizeTileHeaders(tilesetJson);\n  tilesetJson.type = TILESET_TYPE.TILES3D;\n  tilesetJson.lodMetricType = LOD_METRIC_TYPE.GEOMETRIC_ERROR;\n  tilesetJson.lodMetricValue = tilesetJson.root.lodMetricValue;\n  return tilesetJson;\n}\n\nasync function parse(data, options, context) {\n  const loaderOptions = options['3d-tiles'] || {};\n  let isTileset;\n\n  if (loaderOptions.isTileset === 'auto') {\n    isTileset = context.url && context.url.indexOf('.json') !== -1;\n  } else {\n    isTileset = loaderOptions.isTileset;\n  }\n\n  if (isTileset) {\n    data = await parseTileset(data, options, context);\n  } else {\n    data = await parseTile(data, options, context);\n  }\n\n  return data;\n}\n//# sourceMappingURL=tiles-3d-loader.js.map","import { fetchFile } from '@loaders.gl/core';\nimport { assert } from '@loaders.gl/loader-utils';\nconst CESIUM_ION_URL = 'https://api.cesium.com/v1/assets';\nexport async function getIonTilesetMetadata(accessToken, assetId) {\n  if (!assetId) {\n    const assets = await getIonAssets(accessToken);\n\n    for (const item of assets.items) {\n      if (item.type === '3DTILES') {\n        assetId = item.id;\n      }\n    }\n  }\n\n  const ionAssetMetadata = await getIonAssetMetadata(accessToken, assetId);\n  const {\n    type,\n    url\n  } = ionAssetMetadata;\n  assert(type === '3DTILES' && url);\n  ionAssetMetadata.headers = {\n    Authorization: \"Bearer \".concat(ionAssetMetadata.accessToken)\n  };\n  return ionAssetMetadata;\n}\nexport async function getIonAssets(accessToken) {\n  assert(accessToken);\n  const url = CESIUM_ION_URL;\n  const headers = {\n    Authorization: \"Bearer \".concat(accessToken)\n  };\n  const response = await fetchFile(url, {\n    fetch: {\n      headers,\n      throws: true\n    }\n  });\n  return await response.json();\n}\nexport async function getIonAssetMetadata(accessToken, assetId) {\n  assert(accessToken, assetId);\n  const headers = {\n    Authorization: \"Bearer \".concat(accessToken)\n  };\n  const url = \"\".concat(CESIUM_ION_URL, \"/\").concat(assetId);\n  let response = await fetchFile(\"\".concat(url), {\n    fetch: {\n      headers,\n      throws: true\n    }\n  });\n  let metadata = await response.json();\n  response = await fetchFile(\"\".concat(url, \"/endpoint\"), {\n    fetch: {\n      headers,\n      throws: true\n    }\n  });\n  const tilesetInfo = await response.json();\n  metadata = { ...metadata,\n    ...tilesetInfo\n  };\n  return metadata;\n}\n//# sourceMappingURL=ion.js.map","import { Tiles3DLoader } from './tiles-3d-loader';\nimport { getIonTilesetMetadata } from './lib/ion/ion';\n\nasync function preload(url, options = {}) {\n  options = options['cesium-ion'] || {};\n  const {\n    accessToken\n  } = options;\n  let assetId = options.assetId;\n\n  if (!Number.isFinite(assetId)) {\n    const matched = url.match(/\\/([0-9]+)\\/tileset.json/);\n    assetId = matched && matched[1];\n  }\n\n  return getIonTilesetMetadata(accessToken, assetId);\n}\n\nexport const CesiumIonLoader = { ...Tiles3DLoader,\n  id: 'cesium-ion',\n  name: 'Cesium Ion',\n  preload,\n  parse: async (data, options, context) => {\n    options = { ...options\n    };\n    options['3d-tiles'] = options['cesium-ion'];\n    options.loader = CesiumIonLoader;\n    return Tiles3DLoader.parse(data, options, context);\n  },\n  options: {\n    'cesium-ion': { ...Tiles3DLoader.options['3d-tiles'],\n      accessToken: null\n    }\n  }\n};\n//# sourceMappingURL=cesium-ion-loader.js.map","import {\n  Vector3,\n  Matrix4,\n  Mesh,\n  MeshBasicMaterial,\n  EdgesGeometry,\n  LineSegments,\n  LineBasicMaterial,\n  DoubleSide,\n  BoxGeometry,\n  PlaneGeometry,\n  Camera,\n  Frustum,\n  CanvasTexture,\n  LinearFilter,\n  RepeatWrapping,\n  Group,\n  ArrowHelper,\n  Color,\n} from 'three';\nimport { Tile3D } from '@loaders.gl/tiles';\nimport { Plane as MathGLPlane } from '@math.gl/culling';\nimport { Matrix3 as MathGLMatrix3 } from '@math.gl/core';\n\nimport { Gradient } from './gradients'\n\n// From https://github.com/potree/potree/blob/master/src/materials/PointCloudMaterial.js\nfunction generateGradientTexture(gradient: Gradient): CanvasTexture {\n  const size = 64;\n\n  // create canvas\n  const canvas = document.createElement('canvas');\n  canvas.width = size;\n  canvas.height = size;\n\n  // get context\n  const context = canvas.getContext('2d');\n\n  // draw gradient\n  context.rect(0, 0, size, size);\n  const ctxGradient = context.createLinearGradient(0, 0, size, size);\n\n  for (let i = 0; i < gradient.length; i++) {\n    const step = gradient[i];\n\n    ctxGradient.addColorStop(step[0], '#' + step[1].getHexString());\n  }\n\n  context.fillStyle = ctxGradient;\n  context.fill();\n\n  //let texture = new THREE.Texture(canvas);\n  const texture = new CanvasTexture(canvas);\n  texture.needsUpdate = true;\n\n  texture.minFilter = LinearFilter;\n  texture.wrapS = RepeatWrapping;\n  texture.wrapT = RepeatWrapping;\n  texture.repeat.set(2, 2);\n  // textureImage = texture.image;\n\n  return texture;\n}\n\nfunction getCameraFrustum(camera: Camera): Frustum {\n  camera.updateMatrix(); // make sure camera's local matrix is updated\n  camera.updateMatrixWorld(); // make sure camera's world matrix is updated\n  camera.matrixWorldInverse.copy(camera.matrixWorld).invert();\n  const frustum = new Frustum();\n  frustum.setFromProjectionMatrix(new Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\n\n  return frustum;\n}\n\nfunction loadersPlaneToMesh(plane: MathGLPlane): Group {\n  const group = new Group();\n\n  // Create a basic rectangle geometry from math.gl plane\n  const planeGeometry = new PlaneGeometry(10, 5);\n\n  // Align the geometry to the plane\n  const coplanarPoint = new Vector3(...plane.projectPointOntoPlane([0, 0, 0]));\n  const normal = new Vector3(plane.normal.x, plane.normal.y, plane.normal.z);\n  const focalPoint = new Vector3().copy(coplanarPoint).add(normal);\n  planeGeometry.lookAt(focalPoint);\n  planeGeometry.translate(coplanarPoint.x, coplanarPoint.y, coplanarPoint.z);\n\n  // Edges\n  /*\n  const edges = new EdgesGeometry(planeGeometry)\n  var dispPlane = new LineSegments(edges, new LineBasicMaterial({ color: 0x00ffff }))*/\n\n  //plane\n  const material = new MeshBasicMaterial({ color: 0x00ffff, side: DoubleSide });\n  const mesh = new Mesh(planeGeometry, material);\n\n  const arrowHelper = new ArrowHelper(normal, coplanarPoint, 5, 0xffff00);\n\n  group.add(arrowHelper);\n  group.add(mesh);\n\n  return group;\n}\n\nfunction loadersBoundingBoxToMesh(tile: Tile3D): LineSegments {\n  // Create a basic rectangle geometry from math.gl half-axes\n\n  const box = tile.boundingVolume;\n  let redColor = 0;\n  if (tile.content) {\n    redColor = Math.min(tile.content.byteLength / 500000, 1.0);\n  }\n\n  const boxColor = new Color(redColor, 1.0, 0.0);\n\n  const boxGeometry = new BoxGeometry(1, 1, 1);\n  const boxRotate = getMatrix4FromHalfAxes(box.halfAxes);\n\n  boxGeometry.applyMatrix4(boxRotate);\n  const edges = new EdgesGeometry(boxGeometry);\n  const dispPlane = new LineSegments(edges, new LineBasicMaterial({ color: boxColor }));\n  dispPlane.position.copy(new Vector3(...box.center));\n  return dispPlane;\n}\n\nfunction getMatrix4FromHalfAxes(halfAxes: MathGLMatrix3): Matrix4 {\n  const m = halfAxes;\n  const rotateMatrix = new Matrix4().fromArray([\n    m[0] * 2,\n    m[1] * 2,\n    m[2] * 2,\n    0,\n    m[3] * 2,\n    m[4] * 2,\n    m[5] * 2,\n    0,\n    m[6] * 2,\n    m[7] * 2,\n    m[8] * 2,\n    0,\n    0,\n    0,\n    0,\n    1,\n  ]);\n  return rotateMatrix;\n}\n\nexport {\n  getCameraFrustum,\n  loadersPlaneToMesh,\n  loadersBoundingBoxToMesh,\n  generateGradientTexture,\n  getMatrix4FromHalfAxes,\n};\n","import {\n  AnimationClip,\n  Bone,\n  Box3,\n  BufferAttribute,\n  BufferGeometry,\n  CanvasTexture,\n  ClampToEdgeWrapping,\n  Color,\n  DirectionalLight,\n  DoubleSide,\n  FileLoader,\n  FrontSide,\n  Group,\n  ImageBitmapLoader,\n  InterleavedBuffer,\n  InterleavedBufferAttribute,\n  Interpolant,\n  InterpolateDiscrete,\n  InterpolateLinear,\n  Line,\n  LineBasicMaterial,\n  LineLoop,\n  LineSegments,\n  LinearFilter,\n  LinearMipmapLinearFilter,\n  LinearMipmapNearestFilter,\n  Loader,\n  LoaderUtils,\n  Material,\n  MathUtils,\n  Matrix4,\n  Mesh,\n  MeshBasicMaterial,\n  MeshPhysicalMaterial,\n  MeshStandardMaterial,\n  MirroredRepeatWrapping,\n  NearestFilter,\n  NearestMipmapLinearFilter,\n  NearestMipmapNearestFilter,\n  NumberKeyframeTrack,\n  Object3D,\n  OrthographicCamera,\n  PerspectiveCamera,\n  PointLight,\n  Points,\n  PointsMaterial,\n  PropertyBinding,\n  QuaternionKeyframeTrack,\n  RGBFormat,\n  RepeatWrapping,\n  Skeleton,\n  SkinnedMesh,\n  Sphere,\n  SpotLight,\n  TangentSpaceNormalMap,\n  TextureLoader,\n  TriangleFanDrawMode,\n  TriangleStripDrawMode,\n  Vector2,\n  Vector3,\n  VectorKeyframeTrack,\n  sRGBEncoding,\n} from 'three'\n\nclass GLTFLoader extends Loader {\n\n  constructor( manager ) {\n\n    super( manager );\n\n    this.dracoLoader = null\n    this.ddsLoader = null\n    this.ktx2Loader = null\n    this.meshoptDecoder = null\n\n    this.pluginCallbacks = []\n\n    this.register(function(parser) {\n      return new GLTFMaterialsClearcoatExtension(parser)\n    })\n\n    this.register(function(parser) {\n      return new GLTFTextureBasisUExtension(parser)\n    })\n\n    this.register(function(parser) {\n      return new GLTFTextureWebPExtension(parser)\n    })\n\n    this.register(function(parser) {\n      return new GLTFMaterialsTransmissionExtension(parser)\n    })\n\n    this.register(function(parser) {\n      return new GLTFLightsExtension(parser)\n    })\n\n    this.register(function(parser) {\n      return new GLTFMeshoptCompression(parser)\n    })\n\n  }\n\n  load (url, onLoad, onProgress, onError) {\n      var scope = this\n\n      var resourcePath\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath\n      } else if (this.path !== '') {\n        resourcePath = this.path\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url)\n      }\n\n      // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n      this.manager.itemStart(url)\n\n      var _onError = function(e) {\n        if (onError) {\n          onError(e)\n        } else {\n          console.error(e)\n        }\n\n        scope.manager.itemError(url)\n        scope.manager.itemEnd(url)\n      }\n\n      var loader = new FileLoader(this.manager)\n\n      loader.setPath(this.path)\n      loader.setResponseType('arraybuffer')\n      loader.setRequestHeader(this.requestHeader)\n      loader.setWithCredentials(this.withCredentials)\n\n      loader.load(\n        url,\n        function(data) {\n          try {\n            scope.parse(\n              data,\n              resourcePath,\n              function(gltf) {\n                onLoad(gltf)\n\n                scope.manager.itemEnd(url)\n              },\n              _onError,\n            )\n          } catch (e) {\n            _onError(e)\n          }\n        },\n        onProgress,\n        _onError,\n      )\n    }\n\n    setDRACOLoader(dracoLoader) {\n      this.dracoLoader = dracoLoader\n      return this\n    }\n\n    setDDSLoader(ddsLoader) {\n      this.ddsLoader = ddsLoader\n      return this\n    }\n\n    setKTX2Loader(ktx2Loader) {\n      this.ktx2Loader = ktx2Loader\n      return this\n    }\n\n    setMeshoptDecoder(meshoptDecoder) {\n      this.meshoptDecoder = meshoptDecoder\n      return this\n    }\n\n    register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback)\n      }\n\n      return this\n    }\n\n    unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1)\n      }\n\n      return this\n    }\n\n    parse(data, path, onLoad, onError) {\n      var content\n      var extensions = {}\n      var plugins = {}\n\n      if (typeof data === 'string') {\n        content = data\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4))\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data)\n          } catch (error) {\n            if (onError) onError(error)\n            return\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data))\n        }\n      }\n\n      var json = data instanceof ArrayBuffer ? JSON.parse(content) : data\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError)\n          onError(\n            new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'),\n          )\n        return\n      }\n\n      var parser = new GLTFParser(json, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        manager: this.manager,\n        ktx2Loader: this.ktx2Loader,\n        meshoptDecoder: this.meshoptDecoder,\n      })\n\n      parser.fileLoader.setRequestHeader(this.requestHeader)\n\n      for (var i = 0; i < this.pluginCallbacks.length; i++) {\n        var plugin = this.pluginCallbacks[i](parser)\n        plugins[plugin.name] = plugin\n\n        // Workaround to avoid determining as unknown extension\n        // in addUnknownExtensionsToUserData().\n        // Remove this workaround if we move all the existing\n        // extension handlers to plugin system\n        extensions[plugin.name] = true\n      }\n\n      if (json.extensionsUsed) {\n        for (var i = 0; i < json.extensionsUsed.length; ++i) {\n          var extensionName = json.extensionsUsed[i]\n          var extensionsRequired = json.extensionsRequired || []\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension()\n              break\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension()\n              break\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(\n                json,\n                this.dracoLoader,\n              )\n              break\n\n            case EXTENSIONS.MSFT_TEXTURE_DDS:\n              extensions[extensionName] = new GLTFTextureDDSExtension(this.ddsLoader)\n              break\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension()\n              break\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension()\n              break\n\n            default:\n              if (\n                extensionsRequired.indexOf(extensionName) >= 0 &&\n                plugins[extensionName] === undefined\n              ) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".')\n              }\n          }\n        }\n      }\n\n      parser.setExtensions(extensions)\n      parser.setPlugins(plugins)\n      parser.parse(onLoad, onError)\n    }\n  }\n\n  /* GLTFREGISTRY */\n\n  function GLTFRegistry() {\n    var objects = {}\n\n    return {\n      get: function(key) {\n        return objects[key]\n      },\n\n      add: function(key, object) {\n        objects[key] = object\n      },\n\n      remove: function(key) {\n        delete objects[key]\n      },\n\n      removeAll: function() {\n        objects = {}\n      },\n    }\n  }\n\n  /*********************************/\n  /********** EXTENSIONS ***********/\n  /*********************************/\n\n  var EXTENSIONS = {\n    KHR_BINARY_GLTF: 'KHR_binary_glTF',\n    KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n    KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n    KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n    KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n    KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n    KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n    KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n    KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n    KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n    EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n    EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n    MSFT_TEXTURE_DDS: 'MSFT_texture_dds',\n  }\n\n  /**\n   * DDS Texture Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n   *\n   */\n  function GLTFTextureDDSExtension(ddsLoader) {\n    if (!ddsLoader) {\n      throw new Error(\n        'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader',\n      )\n    }\n\n    this.name = EXTENSIONS.MSFT_TEXTURE_DDS\n    this.ddsLoader = ddsLoader\n  }\n\n  /**\n   * Punctual Lights Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n   */\n  function GLTFLightsExtension(parser) {\n    this.parser = parser\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL\n\n    // Object3D instance caches\n    this.cache = { refs: {}, uses: {} }\n  }\n\n  GLTFLightsExtension.prototype._markDefs = function() {\n    var parser = this.parser\n    var nodeDefs = this.parser.json.nodes || []\n\n    for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      var nodeDef = nodeDefs[nodeIndex]\n\n      if (\n        nodeDef.extensions &&\n        nodeDef.extensions[this.name] &&\n        nodeDef.extensions[this.name].light !== undefined\n      ) {\n        parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light)\n      }\n    }\n  }\n\n  GLTFLightsExtension.prototype._loadLight = function(lightIndex) {\n    var parser = this.parser\n    var cacheKey = 'light:' + lightIndex\n    var dependency = parser.cache.get(cacheKey)\n\n    if (dependency) return dependency\n\n    var json = parser.json\n    var extensions = (json.extensions && json.extensions[this.name]) || {}\n    var lightDefs = extensions.lights || []\n    var lightDef = lightDefs[lightIndex]\n    var lightNode\n\n    var color = new Color(0xffffff)\n\n    if (lightDef.color !== undefined) color.fromArray(lightDef.color)\n\n    var range = lightDef.range !== undefined ? lightDef.range : 0\n\n    switch (lightDef.type) {\n      case 'directional':\n        lightNode = new DirectionalLight(color)\n        lightNode.target.position.set(0, 0, -1)\n        lightNode.add(lightNode.target)\n        break\n\n      case 'point':\n        lightNode = new PointLight(color)\n        lightNode.distance = range\n        break\n\n      case 'spot':\n        lightNode = new SpotLight(color)\n        lightNode.distance = range\n        // Handle spotlight properties.\n        lightDef.spot = lightDef.spot || {}\n        lightDef.spot.innerConeAngle =\n          lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0\n        lightDef.spot.outerConeAngle =\n          lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0\n        lightNode.angle = lightDef.spot.outerConeAngle\n        lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle\n        lightNode.target.position.set(0, 0, -1)\n        lightNode.add(lightNode.target)\n        break\n\n      default:\n        throw new Error('THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".')\n    }\n\n    // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n    // here, because node-level parsing will only override position if explicitly specified.\n    lightNode.position.set(0, 0, 0)\n\n    lightNode.decay = 2\n\n    if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity\n\n    lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex)\n\n    dependency = Promise.resolve(lightNode)\n\n    parser.cache.add(cacheKey, dependency)\n\n    return dependency\n  }\n\n  GLTFLightsExtension.prototype.createNodeAttachment = function(nodeIndex) {\n    var self = this\n    var parser = this.parser\n    var json = parser.json\n    var nodeDef = json.nodes[nodeIndex] || nodeIndex\n    var lightDef = (nodeDef.extensions && nodeDef.extensions[this.name]) || {}\n    var lightIndex = lightDef.light\n\n    if (lightIndex === undefined) return null\n\n    return this._loadLight(lightIndex).then(function(light) {\n      return parser._getNodeRef(self.cache, lightIndex, light)\n    })\n  }\n\n  /**\n   * Unlit Materials Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n   */\n  function GLTFMaterialsUnlitExtension() {\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT\n  }\n\n  GLTFMaterialsUnlitExtension.prototype.getMaterialType = function() {\n    return MeshBasicMaterial\n  }\n\n  GLTFMaterialsUnlitExtension.prototype.extendParams = function(\n    materialParams,\n    materialDef,\n    parser,\n  ) {\n    var pending = []\n\n    materialParams.color = new Color(1.0, 1.0, 1.0)\n    materialParams.opacity = 1.0\n\n    var metallicRoughness = materialDef.pbrMetallicRoughness\n\n    if (metallicRoughness) {\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        var array = metallicRoughness.baseColorFactor\n\n        materialParams.color.fromArray(array)\n        materialParams.opacity = array[3]\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture),\n        )\n      }\n    }\n\n    return Promise.all(pending)\n  }\n\n  /**\n   * Clearcoat Materials Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n   */\n  function GLTFMaterialsClearcoatExtension(parser) {\n    this.parser = parser\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT\n  }\n\n  GLTFMaterialsClearcoatExtension.prototype.getMaterialType = function(materialIndex) {\n    var parser = this.parser\n    var materialDef = parser.json.materials[materialIndex] || materialIndex\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null\n\n    return MeshPhysicalMaterial\n  }\n\n  GLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function(\n    materialIndex,\n    materialParams,\n  ) {\n    var parser = this.parser\n    var materialDef = parser.json.materials[materialIndex] || materialIndex\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve()\n    }\n\n    var pending = []\n\n    var extension = materialDef.extensions[this.name]\n\n    if (extension.clearcoatFactor !== undefined) {\n      materialParams.clearcoat = extension.clearcoatFactor\n    }\n\n    if (extension.clearcoatTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture))\n    }\n\n    if (extension.clearcoatRoughnessFactor !== undefined) {\n      materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor\n    }\n\n    if (extension.clearcoatRoughnessTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(\n          materialParams,\n          'clearcoatRoughnessMap',\n          extension.clearcoatRoughnessTexture,\n        ),\n      )\n    }\n\n    if (extension.clearcoatNormalTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(\n          materialParams,\n          'clearcoatNormalMap',\n          extension.clearcoatNormalTexture,\n        ),\n      )\n\n      if (extension.clearcoatNormalTexture.scale !== undefined) {\n        var scale = extension.clearcoatNormalTexture.scale\n\n        materialParams.clearcoatNormalScale = new Vector2(scale, scale)\n      }\n    }\n\n    return Promise.all(pending)\n  }\n\n  /**\n   * Transmission Materials Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n   * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n   */\n  function GLTFMaterialsTransmissionExtension(parser) {\n    this.parser = parser\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION\n  }\n\n  GLTFMaterialsTransmissionExtension.prototype.getMaterialType = function(materialIndex) {\n    var parser = this.parser\n    var materialDef = parser.json.materials[materialIndex] || materialIndex\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null\n\n    return MeshPhysicalMaterial\n  }\n\n  GLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function(\n    materialIndex,\n    materialParams,\n  ) {\n    var parser = this.parser\n    var materialDef = parser.json.materials[materialIndex] || materialIndex\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve()\n    }\n\n    var pending = []\n\n    var extension = materialDef.extensions[this.name]\n\n    if (extension.transmissionFactor !== undefined) {\n      materialParams.transmission = extension.transmissionFactor\n    }\n\n    if (extension.transmissionTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture),\n      )\n    }\n\n    return Promise.all(pending)\n  }\n\n  /**\n   * BasisU Texture Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n   */\n  function GLTFTextureBasisUExtension(parser) {\n    this.parser = parser\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU\n  }\n\n  GLTFTextureBasisUExtension.prototype.loadTexture = function(textureIndex) {\n    var parser = this.parser\n    var json = parser.json\n\n    var textureDef = json.textures[textureIndex] || textureIndex\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null\n    }\n\n    var extension = textureDef.extensions[this.name]\n    var source = json.images[extension.source]\n    var loader = parser.options.ktx2Loader\n\n    if (!loader) {\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n        throw new Error(\n          'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures',\n        )\n      } else {\n        // Assumes that the extension is optional and that a fallback texture is present\n        return null\n      }\n    }\n\n    return parser.loadTextureImage(textureIndex, source, loader)\n  }\n\n  /**\n   * WebP Texture Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n   */\n  function GLTFTextureWebPExtension(parser) {\n    this.parser = parser\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP\n    this.isSupported = null\n  }\n\n  GLTFTextureWebPExtension.prototype.loadTexture = function(textureIndex) {\n    var name = this.name\n    var parser = this.parser\n    var json = parser.json\n\n    var textureDef = json.textures[textureIndex]\n\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\n      return null\n    }\n\n    var extension = textureDef.extensions[name]\n    var source = json.images[extension.source]\n    var loader = source.uri ? parser.options.manager.getHandler(source.uri) : parser.textureLoader\n\n    return this.detectSupport().then(function(isSupported) {\n      if (isSupported) return parser.loadTextureImage(textureIndex, source, loader)\n\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n        throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.')\n      }\n\n      // Fall back to PNG or JPEG.\n      return parser.loadTexture(textureIndex)\n    })\n  }\n\n  GLTFTextureWebPExtension.prototype.detectSupport = function() {\n    if (!this.isSupported) {\n      this.isSupported = new Promise(function(resolve) {\n        var image = new Image()\n\n        // Lossy test image. Support for lossy images doesn't guarantee support for all\n        // WebP images, unfortunately.\n        image.src =\n          'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA'\n\n        image.onload = image.onerror = function() {\n          resolve(image.height === 1)\n        }\n      })\n    }\n\n    return this.isSupported\n  }\n\n  /**\n   * meshopt BufferView Compression Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n   */\n  function GLTFMeshoptCompression(parser) {\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION\n    this.parser = parser\n  }\n\n  GLTFMeshoptCompression.prototype.loadBufferView = function(index) {\n    var json = this.parser.json\n    var bufferView = json.bufferViews[index] || index\n\n    if (bufferView.extensions && bufferView.extensions[this.name]) {\n      var extensionDef = bufferView.extensions[this.name]\n\n      var buffer = this.parser.getDependency('buffer', extensionDef.buffer)\n      var decoder = this.parser.options.meshoptDecoder\n\n      if (!decoder || !decoder.supported) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error(\n            'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files',\n          )\n        } else {\n          // Assumes that the extension is optional and that fallback buffer data is present\n          return null\n        }\n      }\n\n      return Promise.all([buffer, decoder.ready]).then(function(res) {\n        var byteOffset = extensionDef.byteOffset || 0\n        var byteLength = extensionDef.byteLength || 0\n\n        var count = extensionDef.count\n        var stride = extensionDef.byteStride\n\n        var result = new ArrayBuffer(count * stride)\n        var source = new Uint8Array(res[0], byteOffset, byteLength)\n\n        decoder.decodeGltfBuffer(\n          new Uint8Array(result),\n          count,\n          stride,\n          source,\n          extensionDef.mode,\n          extensionDef.filter,\n        )\n        return result\n      })\n    } else {\n      return null\n    }\n  }\n\n  /* BINARY EXTENSION */\n  var BINARY_EXTENSION_HEADER_MAGIC = 'glTF'\n  var BINARY_EXTENSION_HEADER_LENGTH = 12\n  var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4e4f534a, BIN: 0x004e4942 }\n\n  function GLTFBinaryExtension(data) {\n    this.name = EXTENSIONS.KHR_BINARY_GLTF\n    this.content = null\n    this.body = null\n\n    var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH)\n\n    this.header = {\n      magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n      version: headerView.getUint32(4, true),\n      length: headerView.getUint32(8, true),\n    }\n\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n      throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.')\n    } else if (this.header.version < 2.0) {\n      throw new Error('THREE.GLTFLoader: Legacy binary file detected.')\n    }\n\n    var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH)\n    var chunkIndex = 0\n\n    while (chunkIndex < chunkView.byteLength) {\n      var chunkLength = chunkView.getUint32(chunkIndex, true)\n      chunkIndex += 4\n\n      var chunkType = chunkView.getUint32(chunkIndex, true)\n      chunkIndex += 4\n\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n        var contentArray = new Uint8Array(\n          data,\n          BINARY_EXTENSION_HEADER_LENGTH + chunkIndex,\n          chunkLength,\n        )\n        this.content = LoaderUtils.decodeText(contentArray)\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n        var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex\n        this.body = data.slice(byteOffset, byteOffset + chunkLength)\n      }\n\n      // Clients must ignore chunks with unknown types.\n\n      chunkIndex += chunkLength\n    }\n\n    if (this.content === null) {\n      throw new Error('THREE.GLTFLoader: JSON content not found.')\n    }\n  }\n\n  /**\n   * DRACO Mesh Compression Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n   */\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.')\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION\n    this.json = json\n    this.dracoLoader = dracoLoader\n    this.dracoLoader.preload()\n  }\n\n  GLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function(primitive, parser) {\n    var json = this.json\n    var dracoLoader = this.dracoLoader\n    var bufferViewIndex = primitive.extensions[this.name].bufferView\n    var gltfAttributeMap = primitive.extensions[this.name].attributes\n    var threeAttributeMap = {}\n    var attributeNormalizedMap = {}\n    var attributeTypeMap = {}\n\n    for (var attributeName in gltfAttributeMap) {\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase()\n\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName]\n    }\n\n    for (attributeName in primitive.attributes) {\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase()\n\n      if (gltfAttributeMap[attributeName] !== undefined) {\n        var accessorDef = json.accessors[primitive.attributes[attributeName]]\n        var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType]\n\n        attributeTypeMap[threeAttributeName] = componentType\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true\n      }\n    }\n\n    return parser.getDependency('bufferView', bufferViewIndex).then(function(bufferView) {\n      return new Promise(function(resolve) {\n        dracoLoader.decodeDracoFile(\n          bufferView,\n          function(geometry) {\n            for (var attributeName in geometry.attributes) {\n              var attribute = geometry.attributes[attributeName]\n              var normalized = attributeNormalizedMap[attributeName]\n\n              if (normalized !== undefined) attribute.normalized = normalized\n            }\n            \n            resolve(geometry)\n          },\n          threeAttributeMap,\n          attributeTypeMap,\n        )\n      })\n    })\n  }\n\n  /**\n   * Texture Transform Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n   */\n  function GLTFTextureTransformExtension() {\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM\n  }\n\n  GLTFTextureTransformExtension.prototype.extendTexture = function(texture, transform) {\n    texture = texture.clone()\n\n    if (transform.offset !== undefined) {\n      texture.offset.fromArray(transform.offset)\n    }\n\n    if (transform.rotation !== undefined) {\n      texture.rotation = transform.rotation\n    }\n\n    if (transform.scale !== undefined) {\n      texture.repeat.fromArray(transform.scale)\n    }\n\n    if (transform.texCoord !== undefined) {\n      console.warn(\n        'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.',\n      )\n    }\n\n    texture.needsUpdate = true\n\n    return texture\n  }\n\n  /**\n   * Specular-Glossiness Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n   */\n\n  /**\n   * A sub class of StandardMaterial with some of the functionality\n   * changed via the `onBeforeCompile` callback\n   * @pailhead\n   */\n\n  function GLTFMeshStandardSGMaterial(params) {\n    MeshStandardMaterial.call(this)\n\n    this.isGLTFSpecularGlossinessMaterial = true\n\n    //various chunks that need replacing\n    var specularMapParsFragmentChunk = [\n      '#ifdef USE_SPECULARMAP',\n      '\tuniform sampler2D specularMap;',\n      '#endif',\n    ].join('\\n')\n\n    var glossinessMapParsFragmentChunk = [\n      '#ifdef USE_GLOSSINESSMAP',\n      '\tuniform sampler2D glossinessMap;',\n      '#endif',\n    ].join('\\n')\n\n    var specularMapFragmentChunk = [\n      'vec3 specularFactor = specular;',\n      '#ifdef USE_SPECULARMAP',\n      '\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n      '\ttexelSpecular = sRGBToLinear( texelSpecular );',\n      '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n      '\tspecularFactor *= texelSpecular.rgb;',\n      '#endif',\n    ].join('\\n')\n\n    var glossinessMapFragmentChunk = [\n      'float glossinessFactor = glossiness;',\n      '#ifdef USE_GLOSSINESSMAP',\n      '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n      '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n      '\tglossinessFactor *= texelGlossiness.a;',\n      '#endif',\n    ].join('\\n')\n\n    var lightPhysicalFragmentChunk = [\n      'PhysicalMaterial material;',\n      'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n      'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n      'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n      'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n      'material.specularRoughness += geometryRoughness;',\n      'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n      'material.specularColor = specularFactor;',\n    ].join('\\n')\n\n    var uniforms = {\n      specular: { value: new Color().setHex(0xffffff) },\n      glossiness: { value: 1 },\n      specularMap: { value: null },\n      glossinessMap: { value: null },\n    }\n\n    this._extraUniforms = uniforms\n\n    this.onBeforeCompile = function(shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName]\n      }\n\n      shader.fragmentShader = shader.fragmentShader\n        .replace('uniform float roughness;', 'uniform vec3 specular;')\n        .replace('uniform float metalness;', 'uniform float glossiness;')\n        .replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk)\n        .replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk)\n        .replace('#include <roughnessmap_fragment>', specularMapFragmentChunk)\n        .replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk)\n        .replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk)\n    }\n\n    Object.defineProperties(this, {\n      specular: {\n        get: function() {\n          return uniforms.specular.value\n        },\n        set: function(v) {\n          uniforms.specular.value = v\n        },\n      },\n\n      specularMap: {\n        get: function() {\n          return uniforms.specularMap.value\n        },\n        set: function(v) {\n          uniforms.specularMap.value = v\n\n          if (v) {\n            this.defines.USE_SPECULARMAP = '' // USE_UV is set by the renderer for specular maps\n          } else {\n            delete this.defines.USE_SPECULARMAP\n          }\n        },\n      },\n\n      glossiness: {\n        get: function() {\n          return uniforms.glossiness.value\n        },\n        set: function(v) {\n          uniforms.glossiness.value = v\n        },\n      },\n\n      glossinessMap: {\n        get: function() {\n          return uniforms.glossinessMap.value\n        },\n        set: function(v) {\n          uniforms.glossinessMap.value = v\n\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = ''\n            this.defines.USE_UV = ''\n          } else {\n            delete this.defines.USE_GLOSSINESSMAP\n            delete this.defines.USE_UV\n          }\n        },\n      },\n    })\n\n    delete this.metalness\n    delete this.roughness\n    delete this.metalnessMap\n    delete this.roughnessMap\n\n    this.setValues(params)\n  }\n\n  GLTFMeshStandardSGMaterial.prototype = Object.create(MeshStandardMaterial.prototype)\n  GLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial\n\n  GLTFMeshStandardSGMaterial.prototype.copy = function(source) {\n    MeshStandardMaterial.prototype.copy.call(this, source)\n    this.specularMap = source.specularMap\n    this.specular.copy(source.specular)\n    this.glossinessMap = source.glossinessMap\n    this.glossiness = source.glossiness\n    delete this.metalness\n    delete this.roughness\n    delete this.metalnessMap\n    delete this.roughnessMap\n    return this\n  }\n\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    return {\n      name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n      specularGlossinessParams: [\n        'color',\n        'map',\n        'lightMap',\n        'lightMapIntensity',\n        'aoMap',\n        'aoMapIntensity',\n        'emissive',\n        'emissiveIntensity',\n        'emissiveMap',\n        'bumpMap',\n        'bumpScale',\n        'normalMap',\n        'normalMapType',\n        'displacementMap',\n        'displacementScale',\n        'displacementBias',\n        'specularMap',\n        'specular',\n        'glossinessMap',\n        'glossiness',\n        'alphaMap',\n        'envMap',\n        'envMapIntensity',\n        'refractionRatio',\n      ],\n\n      getMaterialType: function() {\n        return GLTFMeshStandardSGMaterial\n      },\n\n      extendParams: function(materialParams, materialDef, parser) {\n        var pbrSpecularGlossiness = materialDef.extensions[this.name]\n\n        materialParams.color = new Color(1.0, 1.0, 1.0)\n        materialParams.opacity = 1.0\n\n        var pending = []\n\n        if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n          var array = pbrSpecularGlossiness.diffuseFactor\n\n          materialParams.color.fromArray(array)\n          materialParams.opacity = array[3]\n        }\n\n        if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n          pending.push(\n            parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture),\n          )\n        }\n\n        materialParams.emissive = new Color(0.0, 0.0, 0.0)\n        materialParams.glossiness =\n          pbrSpecularGlossiness.glossinessFactor !== undefined\n            ? pbrSpecularGlossiness.glossinessFactor\n            : 1.0\n        materialParams.specular = new Color(1.0, 1.0, 1.0)\n\n        if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n          materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor)\n        }\n\n        if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n          var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture\n          pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef))\n          pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef))\n        }\n\n        return Promise.all(pending)\n      },\n\n      createMaterial: function(materialParams) {\n        var material = new GLTFMeshStandardSGMaterial(materialParams)\n        material.fog = true\n\n        material.color = materialParams.color\n\n        material.map = materialParams.map === undefined ? null : materialParams.map\n\n        material.lightMap = null\n        material.lightMapIntensity = 1.0\n\n        material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap\n        material.aoMapIntensity = 1.0\n\n        material.emissive = materialParams.emissive\n        material.emissiveIntensity = 1.0\n        material.emissiveMap =\n          materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap\n\n        material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap\n        material.bumpScale = 1\n\n        material.normalMap =\n          materialParams.normalMap === undefined ? null : materialParams.normalMap\n        material.normalMapType = TangentSpaceNormalMap\n\n        if (materialParams.normalScale) material.normalScale = materialParams.normalScale\n\n        material.displacementMap = null\n        material.displacementScale = 1\n        material.displacementBias = 0\n\n        material.specularMap =\n          materialParams.specularMap === undefined ? null : materialParams.specularMap\n        material.specular = materialParams.specular\n\n        material.glossinessMap =\n          materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap\n        material.glossiness = materialParams.glossiness\n\n        material.alphaMap = null\n\n        material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap\n        material.envMapIntensity = 1.0\n\n        material.refractionRatio = 0.98\n\n        return material\n      },\n    }\n  }\n\n  /**\n   * Mesh Quantization Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n   */\n  function GLTFMeshQuantizationExtension() {\n    this.name = EXTENSIONS.KHR_MESH_QUANTIZATION\n  }\n\n  /*********************************/\n  /********** INTERPOLATION ********/\n  /*********************************/\n\n  // Spline Interpolation\n  // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer)\n  }\n\n  GLTFCubicSplineInterpolant.prototype = Object.create(Interpolant.prototype)\n  GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant\n\n  GLTFCubicSplineInterpolant.prototype.copySampleValue_ = function(index) {\n    // Copies a sample value to the result buffer. See description of glTF\n    // CUBICSPLINE values layout in interpolate_() function below.\n\n    var result = this.resultBuffer,\n      values = this.sampleValues,\n      valueSize = this.valueSize,\n      offset = index * valueSize * 3 + valueSize\n\n    for (var i = 0; i !== valueSize; i++) {\n      result[i] = values[offset + i]\n    }\n\n    return result\n  }\n\n  GLTFCubicSplineInterpolant.prototype.beforeStart_ =\n    GLTFCubicSplineInterpolant.prototype.copySampleValue_\n\n  GLTFCubicSplineInterpolant.prototype.afterEnd_ =\n    GLTFCubicSplineInterpolant.prototype.copySampleValue_\n\n  GLTFCubicSplineInterpolant.prototype.interpolate_ = function(i1, t0, t, t1) {\n    var result = this.resultBuffer\n    var values = this.sampleValues\n    var stride = this.valueSize\n\n    var stride2 = stride * 2\n    var stride3 = stride * 3\n\n    var td = t1 - t0\n\n    var p = (t - t0) / td\n    var pp = p * p\n    var ppp = pp * p\n\n    var offset1 = i1 * stride3\n    var offset0 = offset1 - stride3\n\n    var s2 = -2 * ppp + 3 * pp\n    var s3 = ppp - pp\n    var s0 = 1 - s2\n    var s1 = s3 - pp + p\n\n    // Layout of keyframe output values for CUBICSPLINE animations:\n    //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n    for (var i = 0; i !== stride; i++) {\n      var p0 = values[offset0 + i + stride] // splineVertex_k\n      var m0 = values[offset0 + i + stride2] * td // outTangent_k * (t_k+1 - t_k)\n      var p1 = values[offset1 + i + stride] // splineVertex_k+1\n      var m1 = values[offset1 + i] * td // inTangent_k+1 * (t_k+1 - t_k)\n\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1\n    }\n\n    return result\n  }\n\n  /*********************************/\n  /********** INTERNALS ************/\n  /*********************************/\n\n  /* CONSTANTS */\n\n  var WEBGL_CONSTANTS = {\n    FLOAT: 5126,\n    //FLOAT_MAT2: 35674,\n    FLOAT_MAT3: 35675,\n    FLOAT_MAT4: 35676,\n    FLOAT_VEC2: 35664,\n    FLOAT_VEC3: 35665,\n    FLOAT_VEC4: 35666,\n    LINEAR: 9729,\n    REPEAT: 10497,\n    SAMPLER_2D: 35678,\n    POINTS: 0,\n    LINES: 1,\n    LINE_LOOP: 2,\n    LINE_STRIP: 3,\n    TRIANGLES: 4,\n    TRIANGLE_STRIP: 5,\n    TRIANGLE_FAN: 6,\n    UNSIGNED_BYTE: 5121,\n    UNSIGNED_SHORT: 5123,\n  }\n\n  var WEBGL_COMPONENT_TYPES = {\n    5120: Int8Array,\n    5121: Uint8Array,\n    5122: Int16Array,\n    5123: Uint16Array,\n    5125: Uint32Array,\n    5126: Float32Array,\n  }\n\n  var WEBGL_FILTERS = {\n    9728: NearestFilter,\n    9729: LinearFilter,\n    9984: NearestMipmapNearestFilter,\n    9985: LinearMipmapNearestFilter,\n    9986: NearestMipmapLinearFilter,\n    9987: LinearMipmapLinearFilter,\n  }\n\n  var WEBGL_WRAPPINGS = {\n    33071: ClampToEdgeWrapping,\n    33648: MirroredRepeatWrapping,\n    10497: RepeatWrapping,\n  }\n\n  var WEBGL_TYPE_SIZES = {\n    SCALAR: 1,\n    VEC2: 2,\n    VEC3: 3,\n    VEC4: 4,\n    MAT2: 4,\n    MAT3: 9,\n    MAT4: 16,\n  }\n\n  var ATTRIBUTES = {\n    POSITION: 'position',\n    NORMAL: 'normal',\n    TANGENT: 'tangent',\n    TEXCOORD_0: 'uv',\n    TEXCOORD_1: 'uv2',\n    COLOR_0: 'color',\n    WEIGHTS_0: 'skinWeight',\n    JOINTS_0: 'skinIndex',\n  }\n\n  var PATH_PROPERTIES = {\n    scale: 'scale',\n    translation: 'position',\n    rotation: 'quaternion',\n    weights: 'morphTargetInfluences',\n  }\n\n  var INTERPOLATION = {\n    CUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n    // keyframe track will be initialized with a default interpolation type, then modified.\n    LINEAR: InterpolateLinear,\n    STEP: InterpolateDiscrete,\n  }\n\n  var ALPHA_MODES = {\n    OPAQUE: 'OPAQUE',\n    MASK: 'MASK',\n    BLEND: 'BLEND',\n  }\n\n  /* UTILITY FUNCTIONS */\n\n  function resolveURL(url, path) {\n    // Invalid URL\n    if (typeof url !== 'string' || url === '') return ''\n\n    // Host Relative URL\n    if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n      path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1')\n    }\n\n    // Absolute URL http://,https://,//\n    if (/^(https?:)?\\/\\//i.test(url)) return url\n\n    // Data URI\n    if (/^data:.*,.*$/i.test(url)) return url\n\n    // Blob URL\n    if (/^blob:.*$/i.test(url)) return url\n\n    // Relative URL\n    return path + url\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n   */\n  function createDefaultMaterial(cache) {\n    if (cache['DefaultMaterial'] === undefined) {\n      cache['DefaultMaterial'] = new MeshStandardMaterial({\n        color: 0xffffff,\n        emissive: 0x000000,\n        metalness: 1,\n        roughness: 1,\n        transparent: false,\n        depthTest: true,\n        side: FrontSide,\n      })\n    }\n\n    return cache['DefaultMaterial']\n  }\n\n  function addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n    // Add unknown glTF extensions to an object's userData.\n\n    for (var name in objectDef.extensions) {\n      if (knownExtensions[name] === undefined) {\n        object.userData.gltfExtensions = object.userData.gltfExtensions || {}\n        object.userData.gltfExtensions[name] = objectDef.extensions[name]\n      }\n    }\n  }\n\n  /**\n   * @param {Object3D|Material|BufferGeometry} object\n   * @param {GLTF.definition} gltfDef\n   */\n  function assignExtrasToUserData(object, gltfDef) {\n    if (gltfDef.extras !== undefined) {\n      if (typeof gltfDef.extras === 'object') {\n        Object.assign(object.userData, gltfDef.extras)\n      } else {\n        console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras)\n      }\n    }\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n   *\n   * @param {BufferGeometry} geometry\n   * @param {Array<GLTF.Target>} targets\n   * @param {GLTFParser} parser\n   * @return {Promise<BufferGeometry>}\n   */\n  function addMorphTargets(geometry, targets, parser) {\n    var hasMorphPosition = false\n    var hasMorphNormal = false\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i]\n\n      if (target.POSITION !== undefined) hasMorphPosition = true\n      if (target.NORMAL !== undefined) hasMorphNormal = true\n\n      if (hasMorphPosition && hasMorphNormal) break\n    }\n\n    if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry)\n\n    var pendingPositionAccessors = []\n    var pendingNormalAccessors = []\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i]\n\n      if (hasMorphPosition) {\n        var pendingAccessor =\n          target.POSITION !== undefined\n            ? parser.getDependency('accessor', target.POSITION)\n            : geometry.attributes.position\n\n        pendingPositionAccessors.push(pendingAccessor)\n      }\n\n      if (hasMorphNormal) {\n        var pendingAccessor =\n          target.NORMAL !== undefined\n            ? parser.getDependency('accessor', target.NORMAL)\n            : geometry.attributes.normal\n\n        pendingNormalAccessors.push(pendingAccessor)\n      }\n    }\n\n    return Promise.all([\n      Promise.all(pendingPositionAccessors),\n      Promise.all(pendingNormalAccessors),\n    ]).then(function(accessors) {\n      var morphPositions = accessors[0]\n      var morphNormals = accessors[1]\n\n      if (hasMorphPosition) geometry.morphAttributes.position = morphPositions\n      if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals\n      geometry.morphTargetsRelative = true\n\n      return geometry\n    })\n  }\n\n  /**\n   * @param {Mesh} mesh\n   * @param {GLTF.Mesh} meshDef\n   */\n  function updateMorphTargets(mesh, meshDef) {\n    mesh.updateMorphTargets()\n\n    if (meshDef.weights !== undefined) {\n      for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n        mesh.morphTargetInfluences[i] = meshDef.weights[i]\n      }\n    }\n\n    // .extras has user-defined data, so check that .extras.targetNames is an array.\n    if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n      var targetNames = meshDef.extras.targetNames\n\n      if (mesh.morphTargetInfluences.length === targetNames.length) {\n        mesh.morphTargetDictionary = {}\n\n        for (var i = 0, il = targetNames.length; i < il; i++) {\n          mesh.morphTargetDictionary[targetNames[i]] = i\n        }\n      } else {\n        console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.')\n      }\n    }\n  }\n\n  function createPrimitiveKey(primitiveDef) {\n    var dracoExtension =\n      primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n    var geometryKey\n\n    if (dracoExtension) {\n      geometryKey =\n        'draco:' +\n        dracoExtension.bufferView +\n        ':' +\n        dracoExtension.indices +\n        ':' +\n        createAttributesKey(dracoExtension.attributes)\n    } else {\n      geometryKey =\n        primitiveDef.indices +\n        ':' +\n        createAttributesKey(primitiveDef.attributes) +\n        ':' +\n        primitiveDef.mode\n    }\n\n    return geometryKey\n  }\n\n  function createAttributesKey(attributes) {\n    var attributesKey = ''\n\n    var keys = Object.keys(attributes).sort()\n\n    for (var i = 0, il = keys.length; i < il; i++) {\n      attributesKey += keys[i] + ':' + attributes[keys[i]] + ';'\n    }\n\n    return attributesKey\n  }\n\n  /* GLTF PARSER */\n\n  function GLTFParser(json, options) {\n    this.json = json || {}\n    this.extensions = {}\n    this.plugins = {}\n    this.options = options || {}\n\n    // loader object cache\n    this.cache = new GLTFRegistry()\n\n    // associations between Three.js objects and glTF elements\n    this.associations = new Map()\n\n    // BufferGeometry caching\n    this.primitiveCache = {}\n\n    // Object3D instance caches\n    this.meshCache = { refs: {}, uses: {} }\n    this.cameraCache = { refs: {}, uses: {} }\n    this.lightCache = { refs: {}, uses: {} }\n\n    // Track node names, to ensure no duplicates\n    this.nodeNamesUsed = {}\n\n    // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n    if (typeof createImageBitmap !== 'undefined' && /Firefox/.test(navigator.userAgent) === false) {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager)\n    } else {\n      this.textureLoader = new TextureLoader(this.options.manager)\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin)\n\n    this.fileLoader = new FileLoader(this.options.manager)\n    this.fileLoader.setResponseType('arraybuffer')\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true)\n    }\n\n  }\n\n  GLTFParser.prototype.setExtensions = function(extensions) {\n    this.extensions = extensions\n  }\n\n  GLTFParser.prototype.setPlugins = function(plugins) {\n    this.plugins = plugins\n  }\n\n  GLTFParser.prototype.parse = function(onLoad, onError) {\n    var parser = this\n    var json = this.json\n    var extensions = this.extensions\n\n    // Clear the loader cache\n    this.cache.removeAll()\n\n    // Mark the special nodes/meshes in json for efficient parse\n    this._invokeAll(function(ext) {\n      return ext._markDefs && ext._markDefs()\n    })\n\n    Promise.all([\n      this.getDependencies('scene'),\n      this.getDependencies('animation'),\n      this.getDependencies('camera'),\n    ])\n      .then(function(dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {},\n        }\n\n        addUnknownExtensionsToUserData(extensions, result, json)\n\n        assignExtrasToUserData(result, json)\n\n        onLoad(result)\n      })\n      .catch(onError)\n  }\n\n  /**\n   * Marks the special nodes/meshes in json for efficient parse.\n   */\n  GLTFParser.prototype._markDefs = function() {\n    var nodeDefs = this.json.nodes || []\n    var skinDefs = this.json.skins || []\n    var meshDefs = this.json.meshes || []\n\n    // Nothing in the node definition indicates whether it is a Bone or an\n    // Object3D. Use the skins' joint references to mark bones.\n    for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n      var joints = skinDefs[skinIndex].joints\n\n      for (var i = 0, il = joints.length; i < il; i++) {\n        nodeDefs[joints[i]].isBone = true\n      }\n    }\n\n    // Iterate over all nodes, marking references to shared resources,\n    // as well as skeleton joints.\n    for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      var nodeDef = nodeDefs[nodeIndex]\n\n      if (nodeDef.mesh !== undefined) {\n        this._addNodeRef(this.meshCache, nodeDef.mesh)\n\n        // Nothing in the mesh definition indicates whether it is\n        // a SkinnedMesh or Mesh. Use the node's mesh reference\n        // to mark SkinnedMesh if node has skin.\n        if (nodeDef.skin !== undefined) {\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true\n        }\n      }\n\n      if (nodeDef.camera !== undefined) {\n        this._addNodeRef(this.cameraCache, nodeDef.camera)\n      }\n    }\n  }\n\n  /**\n   * Counts references to shared node / Object3D resources. These resources\n   * can be reused, or \"instantiated\", at multiple nodes in the scene\n   * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n   * be marked. Non-scenegraph resources (like Materials, Geometries, and\n   * Textures) can be reused directly and are not marked here.\n   *\n   * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n   */\n  GLTFParser.prototype._addNodeRef = function(cache, index) {\n    if (index === undefined) return\n\n    if (cache.refs[index] === undefined) {\n      cache.refs[index] = cache.uses[index] = 0\n    }\n\n    cache.refs[index]++\n  }\n\n  /** Returns a reference to a shared resource, cloning it if necessary. */\n  GLTFParser.prototype._getNodeRef = function(cache, index, object) {\n    if (cache.refs[index] <= 1) return object\n\n    var ref = object.clone()\n\n    ref.name += '_instance_' + cache.uses[index]++\n\n    return ref\n  }\n\n  GLTFParser.prototype._invokeOne = function(func) {\n    var extensions = Object.values(this.plugins)\n    extensions.push(this)\n\n    for (var i = 0; i < extensions.length; i++) {\n      var result = func(extensions[i])\n\n      if (result) return result\n    }\n  }\n\n  GLTFParser.prototype._invokeAll = function(func) {\n    var extensions = Object.values(this.plugins)\n    extensions.unshift(this)\n\n    var pending = []\n\n    for (var i = 0; i < extensions.length; i++) {\n      var result = func(extensions[i])\n\n      if (result) pending.push(result)\n    }\n\n    return pending\n  }\n\n  /**\n   * Requests the specified dependency asynchronously, with caching.\n   * @param {string} type\n   * @param {number} index\n   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n   */\n  GLTFParser.prototype.getDependency = function(type, index) {\n    var cacheKey = type + ':' + index\n    var dependency = typeof index == 'number' ? this.cache.get(cacheKey) : null\n    if (!dependency) {\n      switch (type) {\n        case 'scene':\n          dependency = this.loadScene(index)\n          break\n\n        case 'node':\n          dependency = this.loadNode(index)\n          break\n\n        case 'mesh':\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadMesh && ext.loadMesh(index)\n          })\n          break\n\n        case 'accessor':\n          dependency = this.loadAccessor(index)\n          break\n\n        case 'bufferView':\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadBufferView && ext.loadBufferView(index)\n          })\n          break\n\n        case 'buffer':\n          dependency = this.loadBuffer(index)\n          break\n\n        case 'material':\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadMaterial && ext.loadMaterial(index)\n          })\n          break\n\n        case 'texture':\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadTexture && ext.loadTexture(index)\n          })\n          break\n\n        case 'skin':\n          dependency = this.loadSkin(index)\n          break\n\n        case 'animation':\n          dependency = this.loadAnimation(index)\n          break\n\n        case 'camera':\n          dependency = this.loadCamera(index)\n          break\n\n        default:\n          throw new Error('Unknown type: ' + type)\n      }\n\n      this.cache.add(cacheKey, dependency)\n    }\n\n    return dependency\n  }\n\n  /**\n   * Requests all dependencies of the specified type asynchronously, with caching.\n   * @param {string} type\n   * @return {Promise<Array<Object>>}\n   */\n  GLTFParser.prototype.getDependencies = function(type) {\n    var dependencies = this.cache.get(type)\n\n    if (!dependencies) {\n      var parser = this\n      var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || []\n\n      dependencies = Promise.all(\n        defs.map(function(def, index) {\n          return parser.getDependency(type, index)\n        }),\n      )\n\n      this.cache.add(type, dependencies)\n    }\n\n    return dependencies\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  GLTFParser.prototype.loadBuffer = function(bufferIndex) {\n    var bufferDef = this.json.buffers[bufferIndex] || bufferIndex\n    var loader = this.fileLoader\n\n    if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n      throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.')\n    }\n\n    // If present, GLB container is required to be the first buffer.\n    if (\n      bufferDef.uri === undefined &&\n      bufferIndex === 0 &&\n      this.extensions[EXTENSIONS.KHR_BINARY_GLTF]\n    ) {\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body)\n    }\n\n    var options = this.options\n\n    return new Promise(function(resolve, reject) {\n      loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function() {\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'))\n      })\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferViewIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  GLTFParser.prototype.loadBufferView = function(bufferViewIndex) {\n    var bufferViewDef = this.json.bufferViews[bufferViewIndex] || bufferViewIndex\n\n    if (bufferViewDef.data) {\n      return Promise.resolve(bufferViewDef.data)\n    }\n\n    return this.getDependency('buffer', bufferViewDef.buffer).then(function(buffer) {\n      var byteLength = bufferViewDef.byteLength || 0\n      var byteOffset = bufferViewDef.byteOffset || 0\n      return buffer.slice(byteOffset, byteOffset + byteLength)\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n   * @param {number} accessorIndex\n   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n   */\n  GLTFParser.prototype.loadAccessor = function(accessorIndex) {\n    var parser = this\n    var json = this.json\n\n    var accessorDef = this.json.accessors[accessorIndex] || accessorIndex\n\n    if (\n      (accessorDef.bufferView === undefined || accessorDef.bufferView === null) &&\n      accessorDef.sparse === undefined &&\n      !accessorDef.value\n    ) {\n      // Ignore empty accessors, which may be used to declare runtime\n      // information about attributes coming from another source (e.g. Draco\n      // compression extension).\n      return Promise.resolve(null)\n    }\n\n    var pendingBufferViews = []\n\n    if (accessorDef.bufferView !== undefined && !accessorDef.value) {\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView))\n    } else {\n      pendingBufferViews.push(null)\n    }\n\n    if (accessorDef.sparse !== undefined) {\n      pendingBufferViews.push(\n        this.getDependency('bufferView', accessorDef.sparse.indices.bufferView),\n      )\n      pendingBufferViews.push(\n        this.getDependency('bufferView', accessorDef.sparse.values.bufferView),\n      )\n    }\n\n    return Promise.all(pendingBufferViews).then(function(bufferViews) {\n      var bufferView = bufferViews[0]\n\n      var itemSize = WEBGL_TYPE_SIZES[accessorDef.type]\n      var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]\n\n      // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n      var elementBytes = TypedArray.BYTES_PER_ELEMENT\n      var itemBytes = elementBytes * itemSize\n      var byteOffset = accessorDef.byteOffset || 0\n      var byteStride =\n        accessorDef.bufferView !== undefined && !accessorDef.value\n          ? json.bufferViews[accessorDef.bufferView].byteStride\n          : undefined\n      var normalized = accessorDef.normalized === true\n      var array, bufferAttribute\n\n      // The buffer is not interleaved if the stride is the item size in bytes.\n      if (byteStride && byteStride !== itemBytes) {\n        // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n        // This makes sure that IBA.count reflects accessor.count properly\n        var ibSlice = Math.floor(byteOffset / byteStride)\n        var ibCacheKey =\n          'InterleavedBuffer:' +\n          accessorDef.bufferView +\n          ':' +\n          accessorDef.componentType +\n          ':' +\n          ibSlice +\n          ':' +\n          accessorDef.count\n        var ib = parser.cache.get(ibCacheKey)\n\n        if (!ib) {\n          array = new TypedArray(\n            bufferView,\n            ibSlice * byteStride,\n            (accessorDef.count * byteStride) / elementBytes,\n          )\n\n          // Integer parameters to IB/IBA are in array elements, not bytes.\n          ib = new InterleavedBuffer(array, byteStride / elementBytes)\n\n          parser.cache.add(ibCacheKey, ib)\n        }\n\n        bufferAttribute = new InterleavedBufferAttribute(\n          ib,\n          itemSize,\n          (byteOffset % byteStride) / elementBytes,\n          normalized,\n        )\n      } else {\n        if (accessorDef.value) {\n          array = accessorDef.value\n        } else if (bufferView === null) {\n          array = new TypedArray(accessorDef.count * itemSize)\n        } else {\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize)\n        }\n\n        bufferAttribute = new BufferAttribute(array, itemSize, normalized)\n      }\n\n      // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n      if (accessorDef.sparse !== undefined) {\n        var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR\n        var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType]\n\n        var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0\n        var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0\n\n        var sparseIndices = new TypedArrayIndices(\n          bufferViews[1],\n          byteOffsetIndices,\n          accessorDef.sparse.count * itemSizeIndices,\n        )\n        var sparseValues = new TypedArray(\n          bufferViews[2],\n          byteOffsetValues,\n          accessorDef.sparse.count * itemSize,\n        )\n\n        if (bufferView !== null) {\n          // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n          bufferAttribute = new BufferAttribute(\n            bufferAttribute.array.slice(),\n            bufferAttribute.itemSize,\n            bufferAttribute.normalized,\n          )\n        }\n\n        for (var i = 0, il = sparseIndices.length; i < il; i++) {\n          var index = sparseIndices[i]\n\n          bufferAttribute.setX(index, sparseValues[i * itemSize])\n          if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1])\n          if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2])\n          if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3])\n          if (itemSize >= 5)\n            throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.')\n        }\n      }\n\n      return bufferAttribute\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n   * @param {number} textureIndex\n   * @return {Promise<THREE.Texture>}\n   */\n  GLTFParser.prototype.loadTexture = function(textureIndex) {\n    var parser = this\n    var json = this.json\n    var options = this.options\n\n    var textureDef = json.textures[textureIndex] || textureIndex\n\n    var textureExtensions = textureDef.extensions || {}\n\n    var source\n\n    if (textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]) {\n      source = json.images[textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS].source]\n    } else {\n      source = json.images[textureDef.source] || textureDef.source\n    }\n\n    var loader\n\n    if (source.uri) {\n      loader = options.manager.getHandler(source.uri)\n    }\n\n    if (!loader) {\n      loader = textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]\n        ? parser.extensions[EXTENSIONS.MSFT_TEXTURE_DDS].ddsLoader\n        : this.textureLoader\n    }\n\n    return this.loadTextureImage(textureIndex, source, loader)\n  }\n\n  GLTFParser.prototype.loadTextureImage = function(textureIndex, source, loader) {\n    var parser = this\n    var json = this.json\n    var options = this.options\n\n    var textureDef = json.textures[textureIndex] || textureIndex\n\n    var URL = self.URL || self.webkitURL\n\n    var sourceURI = source.uri\n    var isObjectURL = false\n    var hasAlpha = true\n    var blob = null\n\n    if (source.mimeType === 'image/jpeg') hasAlpha = false\n\n    if (source.bufferView !== undefined) {\n      // Load binary image data from bufferView, if provided.\n\n      sourceURI = parser.getDependency('bufferView', source.bufferView).then(function(bufferView) {\n        if (source.mimeType === 'image/png') {\n          // Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n          // alpha channel. This check is conservative — the image could have an alpha\n          // channel with all values == 1, and the indexed type (colorType == 3) only\n          // sometimes contains alpha.\n          //\n          // https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n          var colorType = new DataView(bufferView, 25, 1).getUint8(0, false)\n          hasAlpha = colorType === 6 || colorType === 4 || colorType === 3\n        }\n\n        blob = new Blob([bufferView], { type: source.mimeType })\n        return blob\n      })\n    }\n\n    var textureLoad\n\n    if (loader.isImageBitmapLoader) {\n      textureLoad = Promise.resolve(sourceURI)\n        .then(function(blob) {\n          return createImageBitmap(blob, { premultiplyAlpha: 'none' })\n        })\n        .then(function(imageBitmap) {\n          return new CanvasTexture(imageBitmap)\n        })\n    } else {\n      /* TODO: Different behaviors in different browsers?\n       * https://www.andygup.net/performance-comparison-between-readasdataurl-and-createobjecturl/\n       */\n      textureLoad = Promise.resolve(sourceURI)\n        .then(function(blob) {\n          isObjectURL = true\n          sourceURI = URL.createObjectURL(blob)\n          return sourceURI\n        })\n        .then(function(sourceURI) {\n          return new Promise(function(resolve, reject) {\n            var onLoad = resolve\n\n            loader.load(resolveURL(sourceURI, options.path), onLoad, undefined, reject)\n          })\n        })\n    }\n    return Promise.resolve(textureLoad).then(function(texture) {\n      // Clean up resources and configure Texture.\n\n      if (isObjectURL === true) {\n        URL.revokeObjectURL(sourceURI)\n      }\n\n      texture.flipY = false\n\n      if (textureDef.name) texture.name = textureDef.name\n\n      // When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n      if (!hasAlpha) texture.format = RGBFormat\n\n      var samplers = json.samplers || {}\n      var sampler = samplers[textureDef.sampler] || {}\n\n      texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter\n      texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter\n      texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping\n      texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping\n\n      parser.associations.set(texture, {\n        type: 'textures',\n        index: textureIndex,\n      })\n\n      return texture\n    })\n  }\n\n  /**\n   * Asynchronously assigns a texture to the given material parameters.\n   * @param {Object} materialParams\n   * @param {string} mapName\n   * @param {Object} mapDef\n   * @return {Promise}\n   */\n  GLTFParser.prototype.assignTexture = function(materialParams, mapName, mapDef) {\n    var parser = this\n\n    return this.getDependency('texture', mapDef.index).then(function(texture) {\n      // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n      // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n      if (\n        mapDef.texCoord !== undefined &&\n        mapDef.texCoord != 0 &&\n        !(mapName === 'aoMap' && mapDef.texCoord == 1)\n      ) {\n        console.warn(\n          'THREE.GLTFLoader: Custom UV set ' +\n            mapDef.texCoord +\n            ' for texture ' +\n            mapName +\n            ' not yet supported.',\n        )\n      }\n\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n        var transform =\n          mapDef.extensions !== undefined\n            ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]\n            : undefined\n\n        if (transform) {\n          var gltfReference = parser.associations.get(texture)\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(\n            texture,\n            transform,\n          )\n          parser.associations.set(texture, gltfReference)\n        }\n      }\n\n      materialParams[mapName] = texture\n    })\n  }\n\n  /**\n   * Assigns final material to a Mesh, Line, or Points instance. The instance\n   * already has a material (generated from the glTF material options alone)\n   * but reuse of the same glTF material may require multiple threejs materials\n   * to accomodate different primitive types, defines, etc. New materials will\n   * be created if necessary, and reused from a cache.\n   * @param  {Object3D} mesh Mesh, Line, or Points instance.\n   */\n  GLTFParser.prototype.assignFinalMaterial = function(mesh) {\n    var geometry = mesh.geometry\n    var material = mesh.material\n\n    var useVertexTangents = geometry.attributes.tangent !== undefined\n    var useVertexColors = geometry.attributes.color !== undefined\n    var useFlatShading = geometry.attributes.normal === undefined\n    var useSkinning = mesh.isSkinnedMesh === true\n    var useMorphTargets = Object.keys(geometry.morphAttributes).length > 0\n    var useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined\n\n    if (mesh.isPoints) {\n      var cacheKey = 'PointsMaterial:' + material.uuid\n\n      var pointsMaterial = this.cache.get(cacheKey)\n\n      if (!pointsMaterial) {\n        pointsMaterial = new PointsMaterial()\n        Material.prototype.copy.call(pointsMaterial, material)\n        pointsMaterial.color.copy(material.color)\n        pointsMaterial.map = material.map\n        pointsMaterial.sizeAttenuation = false // glTF spec says points should be 1px\n\n        this.cache.add(cacheKey, pointsMaterial)\n      }\n\n      material = pointsMaterial\n    } else if (mesh.isLine) {\n      var cacheKey = 'LineBasicMaterial:' + material.uuid\n\n      var lineMaterial = this.cache.get(cacheKey)\n\n      if (!lineMaterial) {\n        lineMaterial = new LineBasicMaterial()\n        Material.prototype.copy.call(lineMaterial, material)\n        lineMaterial.color.copy(material.color)\n\n        this.cache.add(cacheKey, lineMaterial)\n      }\n\n      material = lineMaterial\n    }\n\n    // Clone the material if it will be modified\n    if (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n      var cacheKey = 'ClonedMaterial:' + material.uuid + ':'\n\n      if (material.isGLTFSpecularGlossinessMaterial) cacheKey += 'specular-glossiness:'\n      if (useSkinning) cacheKey += 'skinning:'\n      if (useVertexTangents) cacheKey += 'vertex-tangents:'\n      if (useVertexColors) cacheKey += 'vertex-colors:'\n      if (useFlatShading) cacheKey += 'flat-shading:'\n      if (useMorphTargets) cacheKey += 'morph-targets:'\n      if (useMorphNormals) cacheKey += 'morph-normals:'\n\n      var cachedMaterial = this.cache.get(cacheKey)\n\n      if (!cachedMaterial) {\n        cachedMaterial = material.clone()\n\n        if (useSkinning) cachedMaterial.skinning = true\n        if (useVertexTangents) cachedMaterial.vertexTangents = true\n        if (useVertexColors) cachedMaterial.vertexColors = true\n        if (useFlatShading) cachedMaterial.flatShading = true\n        if (useMorphTargets) cachedMaterial.morphTargets = true\n        if (useMorphNormals) cachedMaterial.morphNormals = true\n\n        this.cache.add(cacheKey, cachedMaterial)\n\n        this.associations.set(cachedMaterial, this.associations.get(material))\n      }\n\n      material = cachedMaterial\n    }\n\n    // workarounds for mesh and geometry\n\n    if (\n      material.aoMap &&\n      geometry.attributes.uv2 === undefined &&\n      geometry.attributes.uv !== undefined\n    ) {\n      geometry.setAttribute('uv2', geometry.attributes.uv)\n    }\n\n    // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n    if (material.normalScale && !useVertexTangents) {\n      material.normalScale.y = -material.normalScale.y\n    }\n\n    if (material.clearcoatNormalScale && !useVertexTangents) {\n      material.clearcoatNormalScale.y = -material.clearcoatNormalScale.y\n    }\n\n    mesh.material = material\n  }\n\n  GLTFParser.prototype.getMaterialType = function(/* materialIndex */) {\n    return MeshStandardMaterial\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n   * @param {number} materialIndex\n   * @return {Promise<Material>}\n   */\n  GLTFParser.prototype.loadMaterial = function(materialIndex) {\n    var parser = this\n    var json = this.json\n    var extensions = this.extensions\n    var materialDef = json.materials[materialIndex] || materialIndex\n\n    var materialType\n    var materialParams = {}\n    var materialExtensions = materialDef.extensions || {}\n\n    var pending = []\n\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n      var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]\n      materialType = sgExtension.getMaterialType()\n      pending.push(sgExtension.extendParams(materialParams, materialDef, parser))\n    } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n      var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT]\n      materialType = kmuExtension.getMaterialType()\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser))\n    } else {\n      // Specification:\n      // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n      var metallicRoughness = materialDef.pbrMetallicRoughness || {}\n\n      materialParams.color = new Color(1.0, 1.0, 1.0)\n      materialParams.opacity = 1.0\n\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        var array = metallicRoughness.baseColorFactor\n\n        materialParams.color.fromArray(array)\n        materialParams.opacity = array[3]\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture),\n        )\n      }\n\n      materialParams.metalness =\n        metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0\n      materialParams.roughness =\n        metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0\n\n      if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(\n            materialParams,\n            'metalnessMap',\n            metallicRoughness.metallicRoughnessTexture,\n          ),\n        )\n        pending.push(\n          parser.assignTexture(\n            materialParams,\n            'roughnessMap',\n            metallicRoughness.metallicRoughnessTexture,\n          ),\n        )\n      }\n\n      materialType = this._invokeOne(function(ext) {\n        return ext.getMaterialType && ext.getMaterialType(materialIndex)\n      })\n\n      pending.push(\n        Promise.all(\n          this._invokeAll(function(ext) {\n            return (\n              ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams)\n            )\n          }),\n        ),\n      )\n    }\n\n    if (materialDef.doubleSided === true) {\n      materialParams.side = DoubleSide\n    }\n\n    var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE\n\n    if (alphaMode === ALPHA_MODES.BLEND) {\n      materialParams.transparent = true\n\n      // See: https://github.com/mrdoob/three.js/issues/17706\n      materialParams.depthWrite = false\n    } else {\n      materialParams.transparent = false\n\n      if (alphaMode === ALPHA_MODES.MASK) {\n        materialParams.alphaTest =\n          materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5\n      }\n    }\n\n    if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture))\n\n      materialParams.normalScale = new Vector2(1, 1)\n\n      if (materialDef.normalTexture.scale !== undefined) {\n        materialParams.normalScale.set(\n          materialDef.normalTexture.scale,\n          materialDef.normalTexture.scale,\n        )\n      }\n    }\n\n    if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture))\n\n      if (materialDef.occlusionTexture.strength !== undefined) {\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength\n      }\n    }\n\n    if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n      materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor)\n    }\n\n    if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture))\n    }\n\n    return Promise.all(pending).then(function() {\n      var material\n\n      if (materialType === GLTFMeshStandardSGMaterial) {\n        material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(\n          materialParams,\n        )\n      } else {\n        material = new materialType(materialParams)\n      }\n\n      if (materialDef.name) material.name = materialDef.name\n\n      // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n      if (material.map) material.map.encoding = sRGBEncoding\n      if (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding\n\n      assignExtrasToUserData(material, materialDef)\n\n      parser.associations.set(material, { type: 'materials', index: materialIndex })\n\n      if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef)\n\n      return material\n    })\n  }\n\n  /** When Object3D instances are targeted by animation, they need unique names. */\n  GLTFParser.prototype.createUniqueName = function(originalName) {\n    var name = PropertyBinding.sanitizeNodeName(originalName || '')\n\n    for (var i = 1; this.nodeNamesUsed[name]; ++i) {\n      name = originalName + '_' + i\n    }\n\n    this.nodeNamesUsed[name] = true\n\n    return name\n  }\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {GLTF.Primitive} primitiveDef\n   * @param {GLTFParser} parser\n   */\n  function computeBounds(geometry, primitiveDef, parser) {\n    var attributes = primitiveDef.attributes\n\n    var box = new Box3()\n\n    if (attributes.POSITION !== undefined) {\n      var accessor = parser.json.accessors[attributes.POSITION] || attributes.POSITION\n\n      var min = accessor.min\n      var max = accessor.max\n\n      // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n      if (min !== undefined && max !== undefined) {\n        box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]))\n      } else {\n        console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.')\n\n        return\n      }\n    } else {\n      return\n    }\n\n    var targets = primitiveDef.targets\n\n    if (targets !== undefined) {\n      var maxDisplacement = new Vector3()\n      var vector = new Vector3()\n\n      for (var i = 0, il = targets.length; i < il; i++) {\n        var target = targets[i]\n\n        if (target.POSITION !== undefined) {\n          var accessor = parser.json.accessors[target.POSITION]\n          var min = accessor.min\n          var max = accessor.max\n\n          // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n          if (min !== undefined && max !== undefined) {\n            // we need to get max of absolute components because target weight is [-1,1]\n            vector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])))\n            vector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])))\n            vector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])))\n\n            // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n            // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n            // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n            // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n            maxDisplacement.max(vector)\n          } else {\n            console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.')\n          }\n        }\n      }\n\n      // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n      box.expandByVector(maxDisplacement)\n    }\n\n    geometry.boundingBox = box\n\n    var sphere = new Sphere()\n\n    box.getCenter(sphere.center)\n    sphere.radius = box.min.distanceTo(box.max) / 2\n\n    geometry.boundingSphere = sphere\n  }\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {GLTF.Primitive} primitiveDef\n   * @param {GLTFParser} parser\n   * @return {Promise<BufferGeometry>}\n   */\n  function addPrimitiveAttributes(geometry, primitiveDef, parser) {\n    var attributes = primitiveDef.attributes\n\n    var pending = []\n\n    function assignAttributeAccessor(accessorIndex, attributeName) {\n      return parser.getDependency('accessor', accessorIndex).then(function(accessor) {\n        geometry.setAttribute(attributeName, accessor)\n      })\n    }\n\n    for (var gltfAttributeName in attributes) {\n      var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase()\n\n      // Skip attributes already provided by e.g. Draco extension.\n      if (\n        threeAttributeName in geometry.attributes &&\n        geometry.attributes[threeAttributeName] != null\n      )\n        continue\n\n      pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName))\n    }\n\n    if (primitiveDef.indices !== undefined && ! geometry.index) {\n      var accessor = parser\n        .getDependency('accessor', primitiveDef.indices)\n        .then(function(accessor) {\n          geometry.setIndex(accessor)\n        })\n\n      pending.push(accessor)\n    }\n\n    assignExtrasToUserData(geometry, primitiveDef)\n\n    computeBounds(geometry, primitiveDef, parser)\n\n    return Promise.all(pending).then(function() {\n      return primitiveDef.targets !== undefined\n        ? addMorphTargets(geometry, primitiveDef.targets, parser)\n        : geometry\n    })\n  }\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {Number} drawMode\n   * @return {BufferGeometry}\n   */\n  function toTrianglesDrawMode(geometry, drawMode) {\n    var index = geometry.getIndex()\n\n    // generate index if not present\n\n    if (index === null) {\n      var indices = []\n\n      var position = geometry.getAttribute('position')\n\n      if (position !== undefined) {\n        for (var i = 0; i < position.count; i++) {\n          indices.push(i)\n        }\n\n        geometry.setIndex(indices)\n        index = geometry.getIndex()\n      } else {\n        console.error(\n          'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.',\n        )\n        return geometry\n      }\n    }\n\n    //\n\n    var numberOfTriangles = index.count - 2\n    var newIndices = []\n\n    if (drawMode === TriangleFanDrawMode) {\n      // gl.TRIANGLE_FAN\n\n      for (var i = 1; i <= numberOfTriangles; i++) {\n        newIndices.push(index.getX(0))\n        newIndices.push(index.getX(i))\n        newIndices.push(index.getX(i + 1))\n      }\n    } else {\n      // gl.TRIANGLE_STRIP\n\n      for (var i = 0; i < numberOfTriangles; i++) {\n        if (i % 2 === 0) {\n          newIndices.push(index.getX(i))\n          newIndices.push(index.getX(i + 1))\n          newIndices.push(index.getX(i + 2))\n        } else {\n          newIndices.push(index.getX(i + 2))\n          newIndices.push(index.getX(i + 1))\n          newIndices.push(index.getX(i))\n        }\n      }\n    }\n\n    if (newIndices.length / 3 !== numberOfTriangles) {\n      console.error(\n        'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.',\n      )\n    }\n\n    // build final geometry\n\n    var newGeometry = geometry.clone()\n    newGeometry.setIndex(newIndices)\n\n    return newGeometry\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n   *\n   * Creates BufferGeometries from primitives.\n   *\n   * @param {Array<GLTF.Primitive>} primitives\n   * @return {Promise<Array<BufferGeometry>>}\n   */\n  GLTFParser.prototype.loadGeometries = function(primitives) {\n    var parser = this\n    var extensions = this.extensions\n    var cache = this.primitiveCache\n\n    function createDracoPrimitive(primitive) {\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n        .decodePrimitive(primitive, parser)\n        .then(function(geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser)\n        })\n    }\n\n    var pending = []\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n      var primitive = primitives[i]\n\n      var cacheKey = null\n      var cached = null\n\n      if (typeof primitive.indices == 'number') {\n        cacheKey = createPrimitiveKey(primitive)\n        cached = cache[cacheKey]\n      }\n      \n      if (cached) {\n        // Use the cached geometry if it exists\n        pending.push(cached.promise)\n      } else {\n        var geometryPromise\n        \n        if (\n          primitive.extensions &&\n          primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION] &&\n          // TODO: There should be a better way to differentiate already loaded draco meshes.\n          (typeof primitive.indices == 'number')\n        ) {\n          // Use DRACO geometry if available\n          geometryPromise = createDracoPrimitive(primitive)\n        } else {\n          // Otherwise create a new geometry\n          geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser)\n        }\n\n        // Cache this geometry\n        if (cacheKey) {\n          cache[cacheKey] = { primitive: primitive, promise: geometryPromise }\n        }\n\n        pending.push(geometryPromise)\n      }\n    }\n\n    return Promise.all(pending)\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n   * @param {number} meshIndex\n   * @return {Promise<Group|Mesh|SkinnedMesh>}\n   */\n  GLTFParser.prototype.loadMesh = function(meshIndex) {\n    var parser = this\n    var json = this.json\n\n    var meshDef = json.meshes[meshIndex] || meshIndex\n    var primitives = meshDef.primitives\n\n    var pending = []\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n      var material =\n        primitives[i].material === undefined\n          ? createDefaultMaterial(this.cache)\n          : this.getDependency('material', primitives[i].material)\n\n      pending.push(material)\n    }\n\n    pending.push(parser.loadGeometries(primitives))\n\n    return Promise.all(pending).then(function(results) {\n      var materials = results.slice(0, results.length - 1)\n      var geometries = results[results.length - 1]\n\n      var meshes = []\n\n      for (var i = 0, il = geometries.length; i < il; i++) {\n        var geometry = geometries[i]\n        var primitive = primitives[i]\n\n        // 1. create Mesh\n\n        var mesh\n\n        var material = materials[i]\n\n        if (\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n          primitive.mode === undefined\n        ) {\n          // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n          mesh =\n            meshDef.isSkinnedMesh === true\n              ? new SkinnedMesh(geometry, material)\n              : new Mesh(geometry, material)\n\n          if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n            // we normalize floating point skin weight array to fix malformed assets (see #15319)\n            // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n            mesh.normalizeSkinWeights()\n          }\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode)\n          } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode)\n          }\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n          mesh = new LineSegments(geometry, material)\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n          mesh = new Line(geometry, material)\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n          mesh = new LineLoop(geometry, material)\n        } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n          mesh = new Points(geometry, material)\n        } else {\n          throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode)\n        }\n\n        if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n          updateMorphTargets(mesh, meshDef)\n        }\n\n        mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex)\n\n        assignExtrasToUserData(mesh, meshDef)\n\n        parser.assignFinalMaterial(mesh)\n\n        meshes.push(mesh)\n      }\n\n      if (meshes.length === 1) {\n        return meshes[0]\n      }\n\n      var group = new Group()\n\n      for (var i = 0, il = meshes.length; i < il; i++) {\n        group.add(meshes[i])\n      }\n\n      return group\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n   * @param {number} cameraIndex\n   * @return {Promise<THREE.Camera>}\n   */\n  GLTFParser.prototype.loadCamera = function(cameraIndex) {\n    var camera\n    var cameraDef = this.json.cameras[cameraIndex]\n    var params = cameraDef[cameraDef.type]\n\n    if (!params) {\n      console.warn('THREE.GLTFLoader: Missing camera parameters.')\n      return\n    }\n\n    if (cameraDef.type === 'perspective') {\n      camera = new PerspectiveCamera(\n        MathUtils.radToDeg(params.yfov),\n        params.aspectRatio || 1,\n        params.znear || 1,\n        params.zfar || 2e6,\n      )\n    } else if (cameraDef.type === 'orthographic') {\n      camera = new OrthographicCamera(\n        -params.xmag,\n        params.xmag,\n        params.ymag,\n        -params.ymag,\n        params.znear,\n        params.zfar,\n      )\n    }\n\n    if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name)\n\n    assignExtrasToUserData(camera, cameraDef)\n\n    return Promise.resolve(camera)\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n   * @param {number} skinIndex\n   * @return {Promise<Object>}\n   */\n  GLTFParser.prototype.loadSkin = function(skinIndex) {\n    var skinDef = this.json.skins[skinIndex]\n\n    var skinEntry = { joints: skinDef.joints }\n\n    if (skinDef.inverseBindMatrices === undefined) {\n      return Promise.resolve(skinEntry)\n    }\n\n    return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function(accessor) {\n      skinEntry.inverseBindMatrices = accessor\n\n      return skinEntry\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n   * @param {number} animationIndex\n   * @return {Promise<AnimationClip>}\n   */\n  GLTFParser.prototype.loadAnimation = function(animationIndex) {\n    var json = this.json\n\n    var animationDef = json.animations[animationIndex]\n\n    var pendingNodes = []\n    var pendingInputAccessors = []\n    var pendingOutputAccessors = []\n    var pendingSamplers = []\n    var pendingTargets = []\n\n    for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n      var channel = animationDef.channels[i]\n      var sampler = animationDef.samplers[channel.sampler]\n      var target = channel.target\n      var name = target.node !== undefined ? target.node : target.id // NOTE: target.id is deprecated.\n      var input =\n        animationDef.parameters !== undefined\n          ? animationDef.parameters[sampler.input]\n          : sampler.input\n      var output =\n        animationDef.parameters !== undefined\n          ? animationDef.parameters[sampler.output]\n          : sampler.output\n\n      pendingNodes.push(this.getDependency('node', name))\n      pendingInputAccessors.push(this.getDependency('accessor', input))\n      pendingOutputAccessors.push(this.getDependency('accessor', output))\n      pendingSamplers.push(sampler)\n      pendingTargets.push(target)\n    }\n\n    return Promise.all([\n      Promise.all(pendingNodes),\n      Promise.all(pendingInputAccessors),\n      Promise.all(pendingOutputAccessors),\n      Promise.all(pendingSamplers),\n      Promise.all(pendingTargets),\n    ]).then(function(dependencies) {\n      var nodes = dependencies[0]\n      var inputAccessors = dependencies[1]\n      var outputAccessors = dependencies[2]\n      var samplers = dependencies[3]\n      var targets = dependencies[4]\n\n      var tracks = []\n\n      for (var i = 0, il = nodes.length; i < il; i++) {\n        var node = nodes[i]\n        var inputAccessor = inputAccessors[i]\n        var outputAccessor = outputAccessors[i]\n        var sampler = samplers[i]\n        var target = targets[i]\n\n        if (node === undefined) continue\n\n        node.updateMatrix()\n        node.matrixAutoUpdate = true\n\n        var TypedKeyframeTrack\n\n        switch (PATH_PROPERTIES[target.path]) {\n          case PATH_PROPERTIES.weights:\n            TypedKeyframeTrack = NumberKeyframeTrack\n            break\n\n          case PATH_PROPERTIES.rotation:\n            TypedKeyframeTrack = QuaternionKeyframeTrack\n            break\n\n          case PATH_PROPERTIES.position:\n          case PATH_PROPERTIES.scale:\n          default:\n            TypedKeyframeTrack = VectorKeyframeTrack\n            break\n        }\n\n        var targetName = node.name ? node.name : node.uuid\n\n        var interpolation =\n          sampler.interpolation !== undefined\n            ? INTERPOLATION[sampler.interpolation]\n            : InterpolateLinear\n\n        var targetNames = []\n\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n          // Node may be a Group (glTF mesh with several primitives) or a Mesh.\n          node.traverse(function(object) {\n            if (object.isMesh === true && object.morphTargetInfluences) {\n              targetNames.push(object.name ? object.name : object.uuid)\n            }\n          })\n        } else {\n          targetNames.push(targetName)\n        }\n\n        var outputArray = outputAccessor.array\n\n        if (outputAccessor.normalized) {\n          var scale\n\n          if (outputArray.constructor === Int8Array) {\n            scale = 1 / 127\n          } else if (outputArray.constructor === Uint8Array) {\n            scale = 1 / 255\n          } else if (outputArray.constructor == Int16Array) {\n            scale = 1 / 32767\n          } else if (outputArray.constructor === Uint16Array) {\n            scale = 1 / 65535\n          } else {\n            throw new Error('THREE.GLTFLoader: Unsupported output accessor component type.')\n          }\n\n          var scaled = new Float32Array(outputArray.length)\n\n          for (var j = 0, jl = outputArray.length; j < jl; j++) {\n            scaled[j] = outputArray[j] * scale\n          }\n\n          outputArray = scaled\n        }\n\n        for (var j = 0, jl = targetNames.length; j < jl; j++) {\n          var track = new TypedKeyframeTrack(\n            targetNames[j] + '.' + PATH_PROPERTIES[target.path],\n            inputAccessor.array,\n            outputArray,\n            interpolation,\n          )\n\n          // Override interpolation with custom factory method.\n          if (sampler.interpolation === 'CUBICSPLINE') {\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n              // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n              // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n              // must be divided by three to get the interpolant's sampleSize argument.\n\n              return new GLTFCubicSplineInterpolant(\n                this.times,\n                this.values,\n                this.getValueSize() / 3,\n                result,\n              )\n            }\n\n            // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true\n          }\n\n          tracks.push(track)\n        }\n      }\n\n      var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex\n\n      return new AnimationClip(name, undefined, tracks)\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n   * @param {number} nodeIndex\n   * @return {Promise<Object3D>}\n   */\n  GLTFParser.prototype.loadNode = function(nodeIndex) {\n    var json = this.json\n    var extensions = this.extensions\n    var parser = this\n\n    var nodeDef = json.nodes[nodeIndex] || nodeIndex\n\n    // reserve node's name before its dependencies, so the root has the intended name.\n    var nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : ''\n\n    return (function() {\n      var pending = []\n\n      if (nodeDef.mesh !== undefined) {\n        pending.push(\n          parser.getDependency('mesh', nodeDef.mesh).then(function(mesh) {\n            var node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh)\n\n            // if weights are provided on the node, override weights on the mesh.\n            if (nodeDef.weights !== undefined) {\n              node.traverse(function(o) {\n                if (!o.isMesh) return\n\n                for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n                  o.morphTargetInfluences[i] = nodeDef.weights[i]\n                }\n              })\n            }\n\n            return node\n          }),\n        )\n      }\n\n      if (nodeDef.camera !== undefined) {\n        pending.push(\n          parser.getDependency('camera', nodeDef.camera).then(function(camera) {\n            return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera)\n          }),\n        )\n      }\n\n      parser\n        ._invokeAll(function(ext) {\n          return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex)\n        })\n        .forEach(function(promise) {\n          pending.push(promise)\n        })\n\n      return Promise.all(pending)\n    })().then(function(objects) {\n      var node\n\n      // .isBone isn't in glTF spec. See ._markDefs\n      if (nodeDef.isBone === true) {\n        node = new Bone()\n      } else if (objects.length > 1) {\n        node = new Group()\n      } else if (objects.length === 1) {\n        node = objects[0]\n      } else {\n        node = new Object3D()\n      }\n\n      if (node !== objects[0]) {\n        for (var i = 0, il = objects.length; i < il; i++) {\n          node.add(objects[i])\n        }\n      }\n\n      if (nodeDef.name) {\n        node.userData.name = nodeDef.name\n        node.name = nodeName\n      }\n\n      assignExtrasToUserData(node, nodeDef)\n\n      if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef)\n\n      if (nodeDef.matrix !== undefined) {\n        var matrix = new Matrix4()\n        matrix.fromArray(nodeDef.matrix)\n        node.applyMatrix4(matrix)\n      } else {\n        if (nodeDef.translation !== undefined) {\n          node.position.fromArray(nodeDef.translation)\n        }\n\n        if (nodeDef.rotation !== undefined) {\n          node.quaternion.fromArray(nodeDef.rotation)\n        }\n\n        if (nodeDef.scale !== undefined) {\n          node.scale.fromArray(nodeDef.scale)\n        }\n      }\n\n      parser.associations.set(node, { type: 'nodes', index: nodeIndex })\n\n      return node\n    })\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n   * @param {number} sceneIndex\n   * @return {Promise<Group>}\n   */\n  GLTFParser.prototype.loadScene = (function() {\n    // scene node hierachy builder\n\n    function buildNodeHierachy(nodeId, parentObject, json, parser) {\n      var nodeDef = json.nodes[nodeId] || nodeId\n\n      return parser\n        .getDependency('node', nodeId)\n        .then(function(node) {\n          if (nodeDef.skin === undefined) return node\n\n          // build skeleton here as well\n\n          var skinEntry\n\n          return parser\n            .getDependency('skin', nodeDef.skin)\n            .then(function(skin) {\n              skinEntry = skin\n\n              var pendingJoints = []\n\n              for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n                pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]))\n              }\n\n              return Promise.all(pendingJoints)\n            })\n            .then(function(jointNodes) {\n              node.traverse(function(mesh) {\n                if (!mesh.isMesh) return\n\n                var bones = []\n                var boneInverses = []\n\n                for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n                  var jointNode = jointNodes[j]\n\n                  if (jointNode) {\n                    bones.push(jointNode)\n\n                    var mat = new Matrix4()\n\n                    if (skinEntry.inverseBindMatrices !== undefined) {\n                      mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16)\n                    }\n\n                    boneInverses.push(mat)\n                  } else {\n                    console.warn(\n                      'THREE.GLTFLoader: Joint \"%s\" could not be found.',\n                      skinEntry.joints[j],\n                    )\n                  }\n                }\n\n                mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld)\n              })\n\n              return node\n            })\n        })\n        .then(function(node) {\n          // build node hierachy\n\n          parentObject.add(node)\n\n          var pending = []\n\n          if (nodeDef.children) {\n            var children = nodeDef.children\n\n            for (var i = 0, il = children.length; i < il; i++) {\n              var child = children[i]\n              pending.push(buildNodeHierachy(child, node, json, parser))\n            }\n          }\n\n          return Promise.all(pending)\n        })\n    }\n\n    return function loadScene(sceneIndex) {\n      var json = this.json\n      var extensions = this.extensions\n      var sceneDef = this.json.scenes[sceneIndex]\n      var parser = this\n\n      // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n      var scene = new Group()\n      if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name)\n\n      assignExtrasToUserData(scene, sceneDef)\n\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef)\n\n      var nodeIds = sceneDef.nodes || []\n\n      var pending = []\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n        pending.push(buildNodeHierachy(nodeIds[i], scene, json, parser))\n      }\n\n      return Promise.all(pending).then(function() {\n        return scene\n      })\n    }\n  })()\n\nexport { GLTFLoader }\n","import { Color } from 'three'\ntype Gradient = Array<[number, Color]>;\n\nconst Gradients: {[key: string] : Gradient } = {\n  // From chroma spectral http://gka.github.io/chroma.js/\n  SPECTRAL: [\n    [0, new Color(0.3686, 0.3098, 0.6353)],\n    [0.1, new Color(0.1961, 0.5333, 0.7412)],\n    [0.2, new Color(0.4, 0.7608, 0.6471)],\n    [0.3, new Color(0.6706, 0.8667, 0.6431)],\n    [0.4, new Color(0.902, 0.9608, 0.5961)],\n    [0.5, new Color(1.0, 1.0, 0.749)],\n    [0.6, new Color(0.9961, 0.8784, 0.5451)],\n    [0.7, new Color(0.9922, 0.6824, 0.3804)],\n    [0.8, new Color(0.9569, 0.4275, 0.2627)],\n    [0.9, new Color(0.8353, 0.2431, 0.3098)],\n    [1, new Color(0.6196, 0.0039, 0.2588)],\n  ],\n  PLASMA: [\n    [0.0, new Color(0.241, 0.015, 0.61)],\n    [0.1, new Color(0.387, 0.001, 0.654)],\n    [0.2, new Color(0.524, 0.025, 0.653)],\n    [0.3, new Color(0.651, 0.125, 0.596)],\n    [0.4, new Color(0.752, 0.227, 0.513)],\n    [0.5, new Color(0.837, 0.329, 0.431)],\n    [0.6, new Color(0.907, 0.435, 0.353)],\n    [0.7, new Color(0.963, 0.554, 0.272)],\n    [0.8, new Color(0.992, 0.681, 0.195)],\n    [0.9, new Color(0.987, 0.822, 0.144)],\n    [1.0, new Color(0.94, 0.975, 0.131)],\n  ],\n  YELLOW_GREEN: [\n    [0, new Color(0.1647, 0.2824, 0.3451)],\n    [0.1, new Color(0.1338, 0.3555, 0.4227)],\n    [0.2, new Color(0.061, 0.4319, 0.4864)],\n    [0.3, new Color(0.0, 0.5099, 0.5319)],\n    [0.4, new Color(0.0, 0.5881, 0.5569)],\n    [0.5, new Color(0.137, 0.665, 0.5614)],\n    [0.6, new Color(0.2906, 0.7395, 0.5477)],\n    [0.7, new Color(0.4453, 0.8099, 0.5201)],\n    [0.8, new Color(0.6102, 0.8748, 0.485)],\n    [0.9, new Color(0.7883, 0.9323, 0.4514)],\n    [1, new Color(0.9804, 0.9804, 0.4314)],\n  ],\n  VIRIDIS: [\n    [0.0, new Color(0.267, 0.005, 0.329)],\n    [0.1, new Color(0.283, 0.141, 0.458)],\n    [0.2, new Color(0.254, 0.265, 0.53)],\n    [0.3, new Color(0.207, 0.372, 0.553)],\n    [0.4, new Color(0.164, 0.471, 0.558)],\n    [0.5, new Color(0.128, 0.567, 0.551)],\n    [0.6, new Color(0.135, 0.659, 0.518)],\n    [0.7, new Color(0.267, 0.749, 0.441)],\n    [0.8, new Color(0.478, 0.821, 0.318)],\n    [0.9, new Color(0.741, 0.873, 0.15)],\n    [1.0, new Color(0.993, 0.906, 0.144)],\n  ],\n  INFERNO: [\n    [0.0, new Color(0.077, 0.042, 0.206)],\n    [0.1, new Color(0.225, 0.036, 0.388)],\n    [0.2, new Color(0.373, 0.074, 0.432)],\n    [0.3, new Color(0.522, 0.128, 0.42)],\n    [0.4, new Color(0.665, 0.182, 0.37)],\n    [0.5, new Color(0.797, 0.255, 0.287)],\n    [0.6, new Color(0.902, 0.364, 0.184)],\n    [0.7, new Color(0.969, 0.516, 0.063)],\n    [0.8, new Color(0.988, 0.683, 0.072)],\n    [0.9, new Color(0.961, 0.859, 0.298)],\n    [1.0, new Color(0.988, 0.998, 0.645)],\n  ],\n  GRAYSCALE: [\n    [0, new Color(0, 0, 0)],\n    [1, new Color(1, 1, 1)],\n  ],\n  // 16 samples of the TURBU color scheme\n  // values taken from: https://gist.github.com/mikhailov-work/ee72ba4191942acecc03fe6da94fc73f\n  // original file licensed under Apache-2.0\n  TURBO: [\n    [0.0, new Color(0.18995, 0.07176, 0.23217)],\n    [0.07, new Color(0.25107, 0.25237, 0.63374)],\n    [0.13, new Color(0.27628, 0.42118, 0.89123)],\n    [0.2, new Color(0.25862, 0.57958, 0.99876)],\n    [0.27, new Color(0.15844, 0.73551, 0.92305)],\n    [0.33, new Color(0.09267, 0.86554, 0.7623)],\n    [0.4, new Color(0.19659, 0.94901, 0.59466)],\n    [0.47, new Color(0.42778, 0.99419, 0.38575)],\n    [0.53, new Color(0.64362, 0.98999, 0.23356)],\n    [0.6, new Color(0.80473, 0.92452, 0.20459)],\n    [0.67, new Color(0.93301, 0.81236, 0.22667)],\n    [0.73, new Color(0.99314, 0.67408, 0.20348)],\n    [0.8, new Color(0.9836, 0.49291, 0.12849)],\n    [0.87, new Color(0.92105, 0.31489, 0.05475)],\n    [0.93, new Color(0.81608, 0.18462, 0.01809)],\n    [1.0, new Color(0.66449, 0.08436, 0.00424)],\n  ],\n  RAINBOW: [\n    [0, new Color(0.278, 0, 0.714)],\n    [1 / 6, new Color(0, 0, 1)],\n    [2 / 6, new Color(0, 1, 1)],\n    [3 / 6, new Color(0, 1, 0)],\n    [4 / 6, new Color(1, 1, 0)],\n    [5 / 6, new Color(1, 0.64, 0)],\n    [1, new Color(1, 0, 0)],\n  ],\n  CONTOUR: [\n    [0.0, new Color(0, 0, 0)],\n    [0.03, new Color(0, 0, 0)],\n    [0.04, new Color(1, 1, 1)],\n    [1.0, new Color(1, 1, 1)],\n  ],\n}\n\nexport {Gradients, Gradient}\n\n","const MeshFS = `\n  uniform sampler2D map;\n  varying vec2 vUv;\n\n  void main() {\n    vec4 realColor = texture2D(map, vUv);\n    gl_FragColor = realColor;\n  }\n`;\nconst MeshVS = `\n  varying vec2 vUv;\n  void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n`;\n\nconst PointCloudFS = `\n  varying vec3 vColor;\n  void main() {\n    if (vColor == vec3(0.0, 0.0, 0.0)) {\n      discard;\n    } else {\n      gl_FragColor = vec4( vColor, 1.0 );\n    }\n  }\n`;\nconst PointCloudVS = `\n  varying vec3 vColor;\n  uniform sampler2D gradient;\n  uniform sampler2D grayscale;\n  attribute float intensity;\n  attribute float classification;\n  uniform vec3 rootCenter;\n  uniform vec3 rootNormal;\n  uniform vec2 elevationRange;\n  uniform int coloring;\n  uniform bool hideGround;\n  uniform float maxIntensity;\n  uniform float intensityContrast;\n\n  #ifdef USE_COLOR\n  vec3 getRGB() {\n      vec3 rgb = color;\n      return rgb;\n  }\n  #endif\n\n  vec3 getElevation(){\n    vec4 world = modelMatrix * vec4( position, 1.0 );\n    float diff = abs(dot(rootNormal, (vec3(world) - rootCenter)));\n    float w = max(diff - elevationRange.x,0.0) / max(elevationRange.y - elevationRange.x,1.0);\n    vec3 cElevation = texture2D(gradient, vec2(w,1.0-w)).rgb;\n\n    return cElevation;\n  }\n\n  vec3 getIntensity(){\n    // TODO: real contrast enhancement. Check https://github.com/yuki-koyama/enhancer/blob/master/shaders/enhancer.fs\n    float intmod = pow(intensity, intensityContrast);\n    vec3 cIntensity = texture2D(grayscale, vec2(intmod / maxIntensity ,1.0-(intmod / maxIntensity))).rgb;\n    return cIntensity;\n  }\n\n  vec3 getClassification(){\n    float classNormalized = classification / 255.0;\n    vec3 cClassification = texture2D(gradient, vec2(classNormalized * 5.0,1.0-classNormalized * 5.0)).rgb;\n    return cClassification;\n  }\n\n  vec3 getColor(){\n      vec3 color;\n      if (hideGround && classification == 2.0) {\n         return vec3(0.0, 0.0, 0.0);               \n      }\n\n      if (coloring == 1) {\n        color = getIntensity();\n      }\n      else if (coloring == 2) {\n        color = getClassification();\n      } else if (coloring == 3) {\n        color = getElevation();\n      } \n      #ifdef USE_COLOR\n      else if (coloring == 4) {\n        color = getRGB();\n      }\n      #endif\n      else {\n        color = vec3(1.0, 1.0, 1.0);\n      }\n      return color;\n  }\n\n  void main() {\n      vColor = getColor();\n\n      gl_PointSize = 1.0;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n`;\nexport { MeshFS, MeshVS, PointCloudFS, PointCloudVS };\n","import { Stats } from '@probe.gl/stats';\nimport { Tileset3D } from '@loaders.gl/tiles';\nimport {\n  Object3D,\n  Vector3,\n  Matrix4,\n  Material,\n  Shader,\n  WebGLRenderer,\n} from 'three';\n\n/** Types of coloring used when viewing point cloud tiles */\nenum PointCloudColoring {\n  Intensity = 1,\n  Classification = 2,\n  Elevation = 3,\n  RGB = 4,\n  White = 5,\n}\n\n/** Types of shading used when viewing b3dm (mesh) tiles */\nenum Shading {\n  FlatTexture = 1,\n  ShadedTexture = 2,\n  ShadedNoTexture = 3,\n}\n\n/** Properties for loading a tileset */\ninterface LoaderProps {\n    /** The URL of the tileset. For example if using Cesium ION, \n    * it would have the form: `https://assets.cesium.com/[ASSET_ID]/tileset.json`.\n    */\n    url: string;\n    /** Required when using compressed textures (basis universal) for GPU feature detection. */\n    renderer?: WebGLRenderer;\n    /** Advanced options for loading the tileset ({@link LoaderOptions}) */\n    options?: LoaderOptions;\n    onProgress?(progress: number | ProgressEvent<EventTarget>, total?: number): void;\n}\n\n/** Advanced loader options */\ninterface LoaderOptions {\n  /** A Cesium ION access token when loading tilesets from Cesium ION. */\n  cesiumIONToken?: string;\n  /** The initial transformation of the tileset -  Default: `Matrix4.Identity`. */\n  initialTransform?: Matrix4;\n  /** Whether to check if the tileset was transformed, set to `true` if the model is changes position in runtime. Default: `false` */\n  updateTransforms?: boolean;\n  /** Interval in seconds for the traverser to check in an update is needed - Default: `0.1`. */\n  updateInterval?: number;\n  /** Maximum GPU memory (MB) to use for displaying tiles. May go over the limit if tiles within the camera viewport exceed that ammount - Default: `32`. */\n  maximumMemoryUsage?: number;\n  /** determines the distance from tiles in which they are refined, depending on their geometrical size. increase the value to load lower lod tiles from the same view distance (increases performnace) - default: `16`.*/\n  maximumScreenSpaceError?: number;\n  /** 0-1 scale for the LOD quality. A lower value loads tiles from lower LODs (increases performance). */ \n  viewDistanceScale?: number;\n  /** Maximum worker thread concurrency when processing DRACO-compressed tiles - Default: `1` worker. */\n  maxConcurrency?: number;\n  /** Whether to use workers when processing DRACO-compressed tiles - Default: `true`. */\n  worker?: boolean;\n  /** Whether to throttle network requests so that tiles got out of the frame before the request launched, would not be requested - Default: `true` */\n  throttleRequests?: boolean;\n  /** When thorttling requests, how many requests can launch simultaneously - Default: `64` */\n  maxRequests?: number;\n  /** _EXPERIMENTAL_: Skip traversal mechanism, not yet supported. Default: `false` */ \n  skipLevelOfDetail?: boolean;\n  /** When viewing b3dm (mesh) tiles, which type of {@link Shading} is used - Default: `Shading.FlatTexture` */\n  shading?: Shading;\n  /** When viewing b3dm (mesh) tiles, apply a custom material - Default: `undefined` **/\n  material?: Material;\n  /** When viewing b3dm (mesh) tiles, a callback to update shader uniforms - Default: `undefined` */\n  shaderCallback?: (shader: Shader, renderer: WebGLRenderer) => void;\n  /** When viewing b3dm (mesh) tiles, show meshes as wireframe - Default: `false`. */\n  wireframe?: boolean;\n  /** When viewing b3dm (mesh) tiles, compute the vertex normals - Default: `false`. */\n  computeNormals?: boolean;\n  /** When viewing b3dm (mesh) tiles, use the loaders.gl GLTFLoader rather than the Three.hs GLTFLoader - Default: `true`. */\n  loadersGlGltf: boolean;\n  /** When viewing Point Cloud tiles, how should the points be colored ({@link PointCloudColoring}) - Default: `PointCloudColoring.White` */\n  pointCloudColoring?: PointCloudColoring;\n  /** Debug mode: Show tile bounding boxes. Make sure to add the boxes to the scene from {@link Runtime.getTileBoxes} - Default: `false` */\n  debug?: boolean;\n  /** A path to that contains the basis universal library. e.g: `https://unpkg.com/three@0.129.0/examples/js/libs/basis` - Default: `undefined` */\n  basisTranscoderPath?: string;\n  /** A path to that contains the draco library. e.g: `https://unpkg.com/three@0.129.0/examples/js/libs/draco` - Default: `undefined` */\n  dracoDecoderPath?: string;\n}\n\n/** Container object for interfacing with lat/long/height coordinates */\ninterface GeoCoord {\n  long: number;\n  lat: number;\n  height: number;\n}\n\n/** Runtime methods that can be used once a tileset is loaded */\ninterface Runtime {\n  /** \n  * Get a reference to the loaders.gl {@link https://github.com/visgl/loaders.gl/blob/master/modules/tiles/docs/api-reference/tileset-3d.md | Tileset3D} object.\n  *\n  * @returns {@link https://github.com/visgl/loaders.gl/blob/master/modules/tiles/docs/api-reference/tileset-3d.md | Tileset3D} \n  */\n  getTileset(): Tileset3D;\n  /** \n  * Get a reference to the probe.gl {@link https://github.com/uber-web/probe.gl/blob/master/docs/api-reference/stats/stats.md | Stats} object. \n  * @returns {@link https://github.com/uber-web/probe.gl/blob/master/docs/api-reference/stats/stats.md | Stats}\n  */\n  getStats(): Stats;\n  /** Get the tile bounding boxes group when `debug: true` is set. */\n  getTileBoxes(): Object3D;\n  /** Show or hide the tile bounding boxes. */\n  showTiles(boolean): void;\n  /** Enable or disable wireframe mode. */\n  setWireframe(boolean): void;\n  /** Enable or disable deubg mode. */\n  setDebug(boolean): void;\n  /** Set the current shading mode for b3dm tiles. See {@link Shading}. */\n  setShading(Shading): void;\n  /** Set the current view distance scale. See {@link LoaderOptions} */\n  setViewDistanceScale(number): void;\n  /** In point clouds wher the points are classified as `Ground`, hide the ground level points - Default: `false`.*/\n  setHideGround(boolean): void;\n  /** In point clouds set the type of coloring used. See {@link PointCloudColoring} */\n  setPointCloudColoring(PointCloudColoring): void;\n  /** In point clouds when coloring by `PointCloudColoring.Elevation`, set the min/max elevation values - Default: `[0, 400]`. */\n  setElevationRange(range: ReadonlyArray<number>): void;\n  /** In point clouds when coloring by `PointCloudColoring.Intensity`, set the max intensity value -  Default: `1.0` */\n  setMaxIntensity(number): void;\n  /** In point clouds when coloring by `PointCloudColoring.Intensity`, set the contrast factor. Default: `1.0`. */\n  setIntensityContrast(number): void;\n  /** When viewing a Geo-located tileset, get the {@link GeoCoord} value from a world-space `Vector3`. */\n  getLatLongHeightFromPosition(Vector3): GeoCoord;\n  /** When viewing a Geo-located tileset, world-space `Vector3` from a {@link GeoCoord}. */\n  getPositionFromLatLongHeight(GeoCoord): Vector3;\n  /** Get the current camera frustum as mesh planes (for debugging purposes). */\n  getCameraFrustum(Camera): Object3D;\n  /** Get the current tileset transform. */\n  getTransform(): Matrix4;\n  /** Set the tileset transform. Make sure `updateTransforms` is set to `true` (in {@link LoaderOptions}). */\n  setTransform(Matrix4): void;\n  /** Update the tileset for rendering. */\n  update(number, WebGLRenderer, Camera): void;\n  /** Dispose of all of the tileset's assets in memory. */\n  dispose(): void;\n}\n\nexport { LoaderProps, LoaderOptions, PointCloudColoring, Runtime, GeoCoord, Shading };\n","import { load } from '@loaders.gl/core';\nimport { CesiumIonLoader, Tiles3DLoader } from '@loaders.gl/3d-tiles';\nimport { Tileset3D, TILE_TYPE, TILE_CONTENT_STATE } from '@loaders.gl/tiles';\nimport { CullingVolume, Plane } from '@math.gl/culling';\nimport  { _PerspectiveFrustum as PerspectiveFrustum}  from '@math.gl/culling';\nimport { Matrix4 as MathGLMatrix4 } from '@math.gl/core';\nimport * as Util from './util';\nimport {\n  Object3D,\n  Group,\n  Matrix4,\n  Vector3,\n  Vector2,\n  Mesh,\n  BufferGeometry,\n  MeshStandardMaterial,\n  LineSegments,\n  Material,\n  Float32BufferAttribute,\n  ShaderMaterial,\n  Uint8BufferAttribute,\n  Points,\n  Camera,\n  PerspectiveCamera,\n  WebGLRenderer,\n} from 'three';\n\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { GLTFLoader as RDGLTFLoader } from './RDGLTFLoader';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport { KTX2Loader } from 'three/examples/jsm/loaders/KTX2Loader';\n\nimport { Gradients } from './gradients';\n\nimport { MeshFS, MeshVS, PointCloudFS, PointCloudVS } from './shaders';\n\nimport { LoaderProps, LoaderOptions, Runtime, PointCloudColoring, Shading, GeoCoord } from './types';\n\nconst gradient = Gradients.RAINBOW;\nconst gradientTexture = typeof document != 'undefined' ? Util.generateGradientTexture(gradient) : null;\n\nconst grayscale = Gradients.GRAYSCALE;\nconst grayscaleTexture = typeof document != 'undefined' ? Util.generateGradientTexture(grayscale) : null;\n\nconst defaultOptions: LoaderOptions = {\n  initialTransform: new Matrix4(),\n  throttleRequests: true,\n  maxRequests: 64,\n  updateInterval: 0.1,\n  maxConcurrency: 1,\n  maximumScreenSpaceError: 16,\n  maximumMemoryUsage: 32,\n  viewDistanceScale: 1.0,\n  skipLevelOfDetail: false,\n  updateTransforms: false,\n  shading: Shading.FlatTexture,\n  pointCloudColoring: PointCloudColoring.White,\n  worker: true,\n  wireframe: false,\n  debug: false,\n  basisTranscoderPath: null,\n  dracoDecoderPath: null,\n  material: null,\n  computeNormals: false,\n  shaderCallback: null,\n  loadersGlGltf: true\n};\n\n/** The Threebird 3D Tiles Loader */\nclass Loader3DTiles {\n  /**\n  * Loads a tileset of 3D Tiles according to the given {@link LoaderProps}\n  * @public\n  *\n  * @param props - Properties for this load call {@link LoaderProps}.\n  * @returns An object containing the 3D Model to be added to the scene\n  * and a runtime engine to be updated every frame.\n  */\n  public static async load (props: LoaderProps): Promise<{ model: Object3D; runtime: Runtime }> {\n    const options = { ...defaultOptions, ...props.options };\n    const { url } = props;\n\n    const UPDATE_INTERVAL = options.updateInterval;\n\n    const loadersGLOptions: {[key: string]: unknown} = {};\n\n    if (options.cesiumIONToken) {\n      loadersGLOptions['cesium-ion'] = {\n        accessToken: options.cesiumIONToken,\n      };\n      const metadata = await CesiumIonLoader.preload(url, loadersGLOptions);\n      loadersGLOptions['fetch'] = { headers: metadata.headers };\n    }\n\n    const tilesetJson = await load(url, Tiles3DLoader, {\n      ...loadersGLOptions,\n    });\n\n    const renderMap = {};\n    const boxMap = {};\n    const unloadQueue = [];\n    const root = new Group();\n\n    const tileBoxes = new Group();\n    if (!options.debug) {\n      tileBoxes.visible = false;\n    } else {\n      // TODO: Need to have a parent root with no transform and then a conent root with transform\n      //root.add(tileBoxes)\n    }\n\n    // transformations\n    let threeMat = new Matrix4();\n\n    // TODO: This handles the situation where not the root tile is transformed, but one child below the root. There should be a more generic way to handle this...\n    const tileTrasnform = tilesetJson.root.transform\n      ? new Matrix4().fromArray(tilesetJson.root.transform)\n      : new Matrix4();\n    if (tilesetJson.root.children.length == 1 && tilesetJson.root.children[0].transform) {\n      const childTransform = new Matrix4().fromArray(tilesetJson.root.children[0].transform);\n      tileTrasnform.multiply(childTransform);\n    }\n\n    // TODO: Originally the tileset is moved by loaders.gl to its WGS84 matching coordiate. In here, we negate that and bring it back to 0,0,0 with an optional initial transform. If we want to combine the tileset with other geographic layers we might need to go back to those original coordiates\n    threeMat.copy(tileTrasnform).invert();\n\n    const resetTransform = threeMat.clone();\n\n    threeMat.premultiply(options.initialTransform);\n\n    let modelMatrix = new MathGLMatrix4(threeMat.toArray());\n\n    const pointcloudUniforms = {\n      pointSize: { type: 'f', value: 1.0 },\n      gradient: { type: 't', value: gradientTexture },\n      grayscale: { type: 't', value: grayscaleTexture },\n      rootCenter: { type: 'vec3', value: new Vector3() },\n      rootNormal: { type: 'vec3', value: new Vector3() },\n      coloring: { type: 'i', value: options.pointCloudColoring },\n      hideGround: { type: 'b', value: true },\n      elevationRange: { type: 'vec2', value: new Vector2(0, 400) },\n      maxIntensity: { type: 'f', value: 1.0 },\n      intensityContrast: { type: 'f', value: 1.0 },\n    };\n\n    let cameraReference = null;\n    let rendererReference = null;\n\n    const gltfLoader = options.loadersGlGltf ? new RDGLTFLoader() : new GLTFLoader();\n\n    if (options.basisTranscoderPath) {\n      const ktx2Loader = new KTX2Loader();\n      ktx2Loader.detectSupport(props.renderer);\n      ktx2Loader.setTranscoderPath(options.basisTranscoderPath + '/');\n\n      gltfLoader.setKTX2Loader(ktx2Loader);\n    }\n\n    if (!options.loadersGlGltf && options.dracoDecoderPath) {\n      const dracoLoader = new DRACOLoader();\n      dracoLoader.setDecoderPath(options.dracoDecoderPath + '/');\n      dracoLoader.setWorkerLimit(options.maxConcurrency);\n      gltfLoader.setDRACOLoader(dracoLoader);\n    }\n\n    const unlitMaterial = new ShaderMaterial({\n      uniforms: {},\n      vertexShader: MeshVS,\n      fragmentShader: MeshFS,\n    });\n\n    const tileOptions = {\n      modelMatrix: modelMatrix,\n      maximumMemoryUsage: options.maximumMemoryUsage,\n      maximumScreenSpaceError: options.maximumScreenSpaceError,\n      viewDistanceScale: options.viewDistanceScale,\n      skipLevelOfDetail: options.skipLevelOfDetail,\n      updateTransforms: options.updateTransforms,\n      throttleRequests: options.throttleRequests,\n      maxRequests: options.maxRequests,\n      contentLoader: async (tile) => {\n        let tileContent = null;\n        switch (tile.type) {\n          case TILE_TYPE.POINTCLOUD: {\n            tileContent = createPointNodes(tile, pointcloudUniforms);\n            break;\n          }\n          case TILE_TYPE.SCENEGRAPH:\n          case TILE_TYPE.MESH: {\n            tileContent = await createGLTFNodes(gltfLoader, tile, unlitMaterial, options);\n            break;\n          }\n          default:\n            break;\n        }\n        if (tileContent) {\n          tileContent.visible = false;\n          renderMap[tile.id] = tileContent;\n          root.add(renderMap[tile.id]);\n          if (options.debug) {\n            const box = Util.loadersBoundingBoxToMesh(tile);\n            tileBoxes.add(box);\n            boxMap[tile.id] = box;\n          }\n        }\n      },\n      onTileLoad: async () => {\n        if (tileset) {\n          tileset._frameNumber++;\n          tilesetUpdate(tileset, renderMap, rendererReference, cameraReference);\n        }\n      },\n      onTileUnload: (tile) => {\n        unloadQueue.push(tile);\n      },\n      onTileError: (tile, message) => {\n        console.error('Tile error', tile.id, message);\n      },\n    };\n    const tileset = new Tileset3D(tilesetJson, {\n      ...tileOptions,\n      loadOptions: {\n        ...loadersGLOptions,\n        maxConcurrency: options.maxConcurrency,\n        worker: options.worker,\n        gltf: {\n          loadImages: false,\n        },\n        '3d-tiles': {\n          loadGLTF: options.loadersGlGltf,\n        },\n      },\n    });\n\n    let disposeFlag = false;\n\n    const rootCenter = new Vector3().setFromMatrixPosition(options.initialTransform);\n\n    pointcloudUniforms.rootCenter.value.copy(rootCenter);\n    pointcloudUniforms.rootNormal.value.copy(new Vector3(0, 0, 1).applyMatrix4(options.initialTransform).normalize());\n\n    root.applyMatrix4(options.initialTransform);\n\n    // Extra stats\n    tileset.stats.get('Loader concurrency').count =\n      options.maxConcurrency +\n      ' / ' +\n      (typeof navigator != 'undefined' && navigator.hardwareConcurrency ? navigator.hardwareConcurrency : '??');\n\n    tileset.stats.get('Maximum SSE').count = options.maximumScreenSpaceError;\n\n    tileset.stats.get('Maximum mem usage').count = options.maximumMemoryUsage;\n\n    let timer = 0;\n\n    const lastCameraTransform: Matrix4 = new Matrix4().makeTranslation(Infinity, Infinity, Infinity);\n    let lastCameraAspect = null;\n    const lastCameraPosition = new Vector3(Infinity, Infinity, Infinity);\n    let sseDenominator = null;\n\n    function tilesetUpdate(tileset, renderMap, renderer, camera) {\n      if (disposeFlag) {\n        return;\n      }\n\n      // Assumes camera fov, near and far are not changing\n      if (!sseDenominator || camera.aspect != lastCameraAspect) {\n        const loadersFrustum = new PerspectiveFrustum({\n          fov: (camera.fov / 180) * Math.PI,\n          aspectRatio: camera.aspect,\n          near: camera.near,\n          far: camera.far,\n        });\n\n        sseDenominator = loadersFrustum.sseDenominator;\n        lastCameraAspect = camera.aspect;\n\n        if (options.debug) {\n          console.log('Updated sse denonimator:', sseDenominator);\n        }\n      }\n\n      const frustum = Util.getCameraFrustum(camera);\n      const planes = frustum.planes.map((plane) => new Plane(plane.normal.toArray(), plane.constant));\n      const cullingVolume = new CullingVolume(planes);\n\n      const rendererSize = new Vector2();\n      renderer.getSize(rendererSize);\n\n      const frameState = {\n        camera: {\n          position: lastCameraPosition.toArray(),\n        },\n\n        height: rendererSize.y,\n        frameNumber: tileset._frameNumber,\n        sseDenominator: sseDenominator,\n        cullingVolume: cullingVolume,\n        viewport: {\n          id: 0,\n        },\n      };\n\n      tileset._cache.reset();\n      tileset._traverser.traverse(tileset.root, frameState, tileset.options);\n\n      for (const tile of tileset.tiles) {\n        if (tile.selected) {\n          if (!renderMap[tile.id]) {\n            console.error('TILE SELECTED BUT NOT LOADED!!', tile.id);\n          } else {\n            // Make sure it's visible\n            renderMap[tile.id].visible = true;\n          }\n        } else {\n          if (renderMap[tile.id]) {\n            renderMap[tile.id].visible = false;\n          }\n        }\n      }\n      while (unloadQueue.length > 0) {\n        const tile = unloadQueue.pop();\n        if (renderMap[tile.id] && tile.contentState == TILE_CONTENT_STATE.UNLOADED) {\n          root.remove(renderMap[tile.id]);\n          disposeNode(renderMap[tile.id]);\n          delete renderMap[tile.id];\n        }\n        if (boxMap[tile.id]) {\n          disposeNode(boxMap[tile.id]);\n          tileBoxes.remove(boxMap[tile.id]);\n          delete boxMap[tile.id];\n        }\n      }\n\n      if (props.onProgress) {\n        props.onProgress(\n          tileset.stats.get('Tiles Loaded').count,\n          tileset.stats.get('Tiles Loaded').count + tileset.stats.get('Tiles Loading').count,\n        );\n      }\n\n      return frameState;\n    }\n\n    return {\n      model: root,\n      runtime: {\n        getTileset: () => {\n          return tileset;\n        },\n        getStats: () => {\n          return tileset.stats;\n        },\n        showTiles: (visible) => {\n          tileBoxes.visible = visible;\n        },\n        setWireframe: (wireframe) => {\n          options.wireframe = wireframe;\n          root.traverse((object) => {\n            if (object instanceof Mesh) {\n              object.material.wireframe = wireframe;\n            }\n          });\n        },\n        setDebug: (debug) => {\n          options.debug = debug;\n          tileBoxes.visible = debug;\n        },\n        setShading: (shading) => {\n          options.shading = shading;\n        },\n        getTileBoxes: () => {\n          return tileBoxes;\n        },\n        setViewDistanceScale: (scale) => {\n          tileset.options.viewDistanceScale = scale;\n          tileset._frameNumber++;\n          tilesetUpdate(tileset, renderMap, rendererReference, cameraReference);\n        },\n        setHideGround: (enabled) => {\n          pointcloudUniforms.hideGround.value = enabled;\n        },\n        setPointCloudColoring: (selection) => {\n          pointcloudUniforms.coloring.value = selection;\n        },\n        setElevationRange: (range) => {\n          pointcloudUniforms.elevationRange.value.set(range[0], range[1]);\n        },\n        setMaxIntensity: (intensity) => {\n          pointcloudUniforms.maxIntensity.value = intensity;\n        },\n        setIntensityContrast: (contrast) => {\n          pointcloudUniforms.intensityContrast.value = contrast;\n        },\n        getLatLongHeightFromPosition: (position) => {\n          const cartographicPosition = tileset.ellipsoid.cartesianToCartographic(\n            new Vector3().copy(position).applyMatrix4(new Matrix4().copy(threeMat).invert()).toArray(),\n          );\n          return {\n            lat: cartographicPosition[1],\n            long: cartographicPosition[0],\n            height: cartographicPosition[2],\n          };\n        },\n        getPositionFromLatLongHeight: (coord) => {\n          const cartesianPosition = tileset.ellipsoid.cartographicToCartesian([coord.long, coord.lat, coord.height]);\n          return new Vector3(...cartesianPosition).applyMatrix4(threeMat);\n        },\n        getCameraFrustum: (camera: Camera) => {\n          const frustum = Util.getCameraFrustum(camera);\n          const meshes = frustum.planes\n            .map((plane) => new Plane(plane.normal.toArray(), plane.constant))\n            .map((loadersPlane) => Util.loadersPlaneToMesh(loadersPlane));\n\n          const model = new Group();\n          for (const mesh of meshes) model.add(mesh);\n\n          return model;\n        },\n        getTransform: () => {\n          return options.initialTransform;\n        },\n        setTransform: (transform: Matrix4) => {\n          options.initialTransform = transform;\n          threeMat = resetTransform.clone();\n          threeMat.premultiply(options.initialTransform);\n          modelMatrix = new MathGLMatrix4(threeMat.toArray());\n          tileset.modelMatrix = modelMatrix;\n          root.matrix.copy(options.initialTransform);\n          root.matrix.decompose(root.position, root.quaternion, root.scale);\n        },\n        update: function (dt: number, renderer: WebGLRenderer, camera: Camera) {\n          const cameraChanged: boolean =\n            !camera.matrixWorld.equals(lastCameraTransform) ||\n            !((<PerspectiveCamera>camera).aspect == lastCameraAspect);\n          cameraReference = camera;\n          rendererReference = renderer;\n\n          timer += dt;\n\n          if (tileset && timer >= UPDATE_INTERVAL && cameraChanged) {\n            timer = 0;\n            tileset._frameNumber++;\n            camera.getWorldPosition(lastCameraPosition);\n            lastCameraTransform.copy(camera.matrixWorld);\n            tilesetUpdate(tileset, renderMap, renderer, camera);\n          }\n        },\n        dispose: function () {\n          disposeFlag = true;\n          tileset._destroy();\n          while (root.children.length > 0) {\n            const obj = root.children[0];\n            disposeNode(obj);\n            root.remove(obj);\n          }\n          while (tileBoxes.children.length > 0) {\n            const obj = tileBoxes.children[0] as LineSegments;\n            tileBoxes.remove(obj);\n            obj.geometry.dispose();\n            (<Material>obj.material).dispose();\n          }\n        },\n      },\n    };\n  }\n}\n\nasync function createGLTFNodes(gltfLoader, tile, unlitMaterial, options): Promise<Object3D> {\n  return new Promise((resolve, reject) => {\n    const rotateX = new Matrix4().makeRotationAxis(new Vector3(1, 0, 0), Math.PI / 2);\n    gltfLoader.parse(\n      options.loadersGlGltf ? tile.content.gltf : tile.content.gltfArrayBuffer,\n      '',\n      (gltf) => {\n        const tileContent = gltf.scenes[0].children[0] as Object3D;\n        tileContent.applyMatrix4(rotateX); // convert from GLTF Y-up to Z-up\n        tileContent.traverse((object) => {\n          if (object instanceof Mesh) {\n            const originalMap = (object.material as MeshStandardMaterial).map;\n            if (options.material) {\n              object.material = options.material.clone();\n            } else if (options.shading == Shading.FlatTexture) {\n              object.material = unlitMaterial.clone();\n            }\n\n            if (options.shading != Shading.ShadedNoTexture) {\n              if (object.material.uniforms) {\n                object.material.uniforms.map = { value: originalMap };\n              } else {\n                object.material.map = originalMap;\n              }\n            } else {\n              object.material.map = null;\n            }\n\n            if (options.shaderCallback) {\n              object.onBeforeRender = options.shaderCallback;\n            }\n            object.material.wireframe = options.wireframe;\n\n            if (options.computeNormals) {\n              object.geometry.computeVertexNormals();\n            }\n          }\n        });\n        resolve(tileContent);\n      },\n      (e) => {\n        reject(new Error(`error parsing gltf in tile ${tile.id}: ${e}`));\n      },\n    );\n  });\n}\nfunction createPointNodes(tile, pointcloudUniforms) {\n  const d = {\n    rtc_center: tile.content.rtcCenter, // eslint-disable-line camelcase\n    points: tile.content.attributes.positions,\n    intensities: tile.content.attributes.intensity,\n    classifications: tile.content.attributes.classification,\n    rgb: null,\n    rgba: null,\n  };\n  const { colors } = tile.content.attributes;\n  if (colors && colors.size === 3) {\n    d.rgb = colors.value;\n  }\n  if (colors && colors.size === 4) {\n    d.rgba = colors.value;\n  }\n\n  const geometry = new BufferGeometry();\n  geometry.setAttribute('position', new Float32BufferAttribute(d.points, 3));\n  const pointcloudMaterial = new ShaderMaterial({\n    uniforms: pointcloudUniforms,\n    vertexShader: PointCloudVS,\n    fragmentShader: PointCloudFS,\n    transparent: true,\n  });\n  if (d.rgba) {\n    geometry.setAttribute('color', new Float32BufferAttribute(d.rgba, 4));\n    pointcloudMaterial.vertexColors = true;\n  } else if (d.rgb) {\n    geometry.setAttribute('color', new Uint8BufferAttribute(d.rgb, 3, true));\n    pointcloudMaterial.vertexColors = true;\n  }\n  if (d.intensities) {\n    geometry.setAttribute('intensity', new Uint8BufferAttribute(d.intensities, 1, true));\n  }\n  if (d.classifications) {\n    geometry.setAttribute('classification', new Uint8BufferAttribute(d.classifications, 1, false));\n  }\n\n  const tileContent = new Points(geometry, pointcloudMaterial);\n  if (d.rtc_center) {\n    const c = d.rtc_center;\n    tileContent.applyMatrix4(new Matrix4().makeTranslation(c[0], c[1], c[2]));\n  }\n  return tileContent;\n}\n\nfunction disposeNode(node) {\n  node.traverse((object) => {\n    if (object.isMesh) {\n      object.geometry.dispose();\n\n      if (object.material.isMaterial) {\n        object.material.dispose();\n      } else {\n        // an array of materials\n        for (const material of object.material) material.dispose();\n      }\n    }\n  });\n  for (let i = node.children.length - 1; i >= 0; i--) {\n    const obj = node.children[i];\n    node.remove(obj);\n  }\n}\n\nexport { Loader3DTiles, PointCloudColoring, Shading, Runtime, GeoCoord, LoaderOptions, LoaderProps };\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","assert","condition","message","Error","globals","self","window","global","document","global_","isBrowser","process","String","browser","matches","version","exec","nodeVersion","parseFloat","isWorker","importScripts","isMobile","orientation","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","WorkerJob","constructor","jobName","workerThread","this","name","isRunning","_resolve","_reject","postMessage","type","payload","source","error","workerURLCache","Map","getLoadableWorkerURL","props","url","workerURL","get","startsWith","getLoadableWorkerURLFromSource","workerUrl","concat","getLoadableWorkerURLFromURL","set","workerSource","blob","Blob","URL","createObjectURL","getTransferList","object","recursive","transfers","transfersSet","Set","isTransferable","add","buffer","ArrayBuffer","isView","undefined","Array","from","MessagePort","ImageBitmap","OffscreenCanvas","NOOP","WorkerThread","isSupported","Worker","onMessage","onError","console","log","worker","_createBrowserWorker","destroy","terminate","terminated","Boolean","data","transferList","_getErrorFromErrorEvent","event","lineno","colno","_loadableURL","onmessage","onerror","onmessageerror","WorkerPool","setProps","idleQueue","forEach","isDestroyed","maxConcurrency","maxMobileConcurrency","reuseWorkers","onDebug","startJob","job","startPromise","onStart","jobQueue","push","_startQueuedJob","length","_getAvailableWorker","queuedJob","shift","backlog","returnWorkerToQueue","count","_getMaxConcurrency","toLowerCase","DEFAULT_PROPS","WorkerFarm","getWorkerFarm","_workerFarm","workerPools","workerPool","values","_getWorkerPoolProps","getWorkerPool","options","loadLibraryPromises","async","loadLibrary","libraryUrl","moduleName","library","modules","CDN","getLibraryUrl","endsWith","response","fetch","arrayBuffer","scriptSource","id","eval","call","script","createElement","appendChild","createTextNode","text","body","loadLibraryFromString","loadLibraryFromFile","parseWithWorker","loader","context","parseOnMainThread","workerOptions","workerFile","_workerType","module","versionTag","getWorkerURL","JSON","parse","stringify","bind","input","warn","getMagicString","byteOffset","byteLength","dataView","DataView","magic","i","fromCharCode","getUint8","parseJSON","string","_","slice","getFirstCharacters","toArrayBuffer","TextEncoder","encode","_toArrayBuffer","sliceArrayBuffer","subArray","Uint8Array","subarray","padToNBytes","padding","copyToArray","target","targetOffset","sourceArray","srcByteOffset","srcByteLength","dirname","slashIndex","lastIndexOf","substr","fileAliases","concatenateArrayBuffersAsync","asyncIterator","arrayBuffers","chunk","sources","sourceArrays","map","source2","reduce","typedArray","offset","concatenateArrayBuffers","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","_createClass","protoProps","staticProps","prototype","getHiResTimestamp","timestamp","performance","now","hrtime","timeParts","Date","Stat","sampleSize","reset","samples","addCount","subtractCount","_count","_samples","_checkSampling","time","_time","lastTiming","_startTime","_timerPending","addTime","lastSampleCount","lastSampleTime","Stats","_ref","stats","_initializeStats","seal","arguments","_getOrCreate","fn","table","stat","average","getAverageTime","hz","getHz","_this","keys","throttleRequests","maxRequests","RequestScheduler","requestQueue","activeRequestCount","requestMap","_deferredUpdate","scheduleRequest","handle","getPriority","has","request","priority","promise","_issueNewRequests","_issueRequest","isDone","delete","setTimeout","_issueNewRequestsAsync","freeSlots","Math","max","_updateAllRequests","_updateRequest","splice","sort","a","b","isFunction","x","isObject","isPureObject","isResponse","Response","json","isBlob","isReadableStream","ReadableStream","tee","cancel","getReader","isReadableDOMStream","read","pipe","isBoolean","readable","isReadableNodeStream","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","headers","replace","makeResponse","contentLength","size","getResourceContentLength","initialDataUrl","INITIAL_DATA_LENGTH","blobSlice","reader","FileReader","onload","_event$target","readAsDataURL","base64","binary","bytes","btoa","arrayBufferToBase64","getInitialDataUrl","fetchFile","filename","alias","replacement","resolvePath","fetchOptions","ok","throws","status","includes","statusText","getErrorMessageFromResponse","NullLog","info","DEFAULT_LOADER_OPTIONS","args","batchSize","metadata","transforms","attributeName","attributeType","REMOVED_LOADER_OPTIONS","dataType","uri","method","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","getGlobalLoaderState","loaders","_state","getGlobalLoaderOptions","state","globalOptions","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","defaultOptions","validateOptions","isArray","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","normalizeOptionsInternal","getFetchFunction","loaderName","prefix","isSubOptions","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","isLoaderObject","_loader","extensions","normalizeLoader","getRegisteredLoaders","loaderRegistry","getGlobalLoaderRegistry","readFileSlice","file","end","fileReader","readAsArrayBuffer","EXT_PATTERN","selectLoaderSync","normalizeLoaders","match","extension","loaderExtension","findLoaderByExtension","findLoaderByUrl","mimeType","mimeTypes","findLoaderByContentType","testDataAgainstText","testDataAgainstBinary","findLoaderByExamingInitialData","nothrow","getNoValidLoaderMessage","testText","tests","some","test","arrayBuffer1","arrayBuffer2","array1","array2","compareArrayBuffers","testBinary","DEFAULT_CHUNK_SIZE","makeStreamIterator","stream","Symbol","makeToArrayBufferIterator","getIterator","releaseLock","makeBrowserStreamIterator","_readableState","ended","onceReadable","makeNodeStreamIterator","once","makeIterator","chunkSize","textEncoder","chunkLength","min","makeStringIterator","chunkByteLength","makeArrayBufferIterator","makeBlobIterator","ERR_DATA","getArrayBufferOrStringFromData","isArrayBuffer","isBuffer","TextDecoder","decode","getArrayBufferOrStringFromDataSync","contentType","getResponseError","checkResponse","iterator","isAsyncIterable","candidateLoaders","contextLoaders","getLoaders","selectLoader","previousContext","getLoaderContext","coreVersion","workerVersion","validateWorkerVersion","parseTextSync","canParseWithWorker","parseText","parseSync","parseWithLoader","load","_typeof","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","_construct","Parent","Class","isNativeReflectConstruct","Function","_arrayLikeToArray","arr","len","arr2","_unsupportedIterableToArray","minLen","arrayLikeToArray","n","toString","_toConsumableArray","arrayWithoutHoles","iter","iterableToArray","unsupportedIterableToArray","nonIterableSpread","RADIANS_TO_DEGREES","PI","DEGREES_TO_RADIANS","config","round","EPSILON","formatValue","_ref$precision","precision","toPrecision","func","array","clone","toRadians","degrees","radians","toDegrees","equals","epsilon","oldEpsilon","Number","isFinite","abs","_inherits","subClass","superClass","create","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_wrapNativeSuper","_cache","indexOf","Wrapper","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","debug","printTypes","printDegrees","printRowMajor","MathArray","_Array","_super","copy","arrayOrObject","fromObject","ELEMENTS","check","toArray","toObject","to","Float32Array","formatString","opts","_equals","t","ai","vector","minVector","maxVector","_len","vectors","_key","_i","_vectors","_len2","_key2","_i2","_vectors2","_scale","multiply","subtract","addScalar","scalar","scale","validate","valid","validateVector","v","checkNumber","checkVector","callerName","deprecated","out","Vector","_MathArray","sqrt","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","distance","multiplyScalar","ARRAY_TYPE","transformMat3","m","y","transformMat4","vec2_transformMat4AsVector","w","vec3_transformMat4AsVector","z","hypot","glMatrix.ARRAY_TYPE","Vector2","_Vector","atan2","matrix4","transformAsPoint","vec2.transformMat4","matrix3","vec2.transformMat3","matrix2x3","vec2.transformMat2d","matrix2","vec2.transformMat2","fromValues","dot","cross","ax","ay","az","bx","by","bz","vec","ORIGIN","constants","Vector3","ZERO","freeze","mag","cosine","acos","vec3.cross","_ref$origin","origin","rad","r","cos","sin","vec3.rotateX","_ref2","_ref2$origin","vec3.rotateY","_ref3","_ref3$origin","vec3.rotateZ","vec3.transformMat4","vec3.transformMat3","vec3_transformMat2","quaternion","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","vec3.transformQuat","Matrix","row","RANK","col","columnIndex","fill","firstIndex","columnVector","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","IDENTITY","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL1ROW0","COL1ROW1","COL1ROW2","COL2ROW0","COL2ROW1","COL2ROW2","Matrix3","_Matrix","identity","m00","m10","m20","m01","m11","m21","m02","m12","m22","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","mat3.fromQuat","mat3.transpose","det","mat3.invert","mat3.multiply","s","c","mat3.rotate","factor","mat3.scale","mat3.translate","vec4_transformMat3","transform","_slicedToArray","arrayWithHoles","_s","_e","_arr","_n","_d","err","iterableToArrayLimit","nonIterableRest","a03","a13","a23","a30","a31","a32","a33","b0","b1","b2","b3","perspective","fovy","aspect","near","far","nf","f","tan","Infinity","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","transformQuat","ix","iy","iz","iw","COL0ROW3","COL1ROW3","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","Matrix4","m30","m31","m32","m03","m13","m23","m33","mat4.fromQuat","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","mat4.frustum","_eye","mat4.lookAt","_ref2$near","_ref2$far","lr","bt","mat4.ortho","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fovy","_ref4$fov","fov","_ref4$aspect","_ref4$near","_ref4$far","mat4.perspective","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","mat4.transpose","b03","b04","b05","b06","b07","b08","b09","mat4.invert","mat4.multiply","mat4.rotateX","mat4.rotateY","mat4.rotateZ","_ref5","_ref6","rx","ry","rz","rotateX","rotateY","rotateZ","axis","mat4.rotate","mat4.scale","mat4.translate","vec4.transformMat4","translate","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","setAxisAngle","aw","bw","slerp","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","j","k","tmpvec3","xUnitVec3","yUnitVec3","lerp","squaredLength","normalize","rotationTo","vec3.create","vec3.fromValues","vec3.dot","vec3.len","vec3.normalize","mat3.create","IDENTITY_QUATERNION","Quaternion","quat.fromMat3","quat.identity","quat.setAxisAngle","fromAxisRotation","quat.length","quat.squaredLength","quat.dot","vectorA","vectorB","quat.rotationTo","quat.add","quat.calculateW","quat.conjugate","a0","a1","a2","a3","invDot","quat.invert","quat.lerp","quat.multiply","l","quat.rotateX","quat.rotateY","quat.rotateZ","quat.scale","start","ratio","_arguments$","_arguments$$start","quat.slerp","vec4.transformQuat","multiplyLeft","multiplyRight","noop","scratchVector","fromCartographic","cartographic","longitude","latitude","height","fromCartographicToRadians","_cartographicRadians","toCartographicFromRadians","toCartographic","scaleToGeodeticSurfaceIntersection","scaleToGeodeticSurfaceGradient","scratchOrigin","VECTOR_PRODUCT_LOCAL_FRAME","south","north","west","east","down","degeneratePositionLocalFrame","scratchAxisVectors","scratchVector1","scratchVector2","scratchVector3","localFrameToFixedFrame","ellipsoid","firstAxis","secondAxis","thirdAxis","cartesianOrigin","firstAxisVector","secondAxisVector","thirdAxisVector","thirdAxisInferred","equalsEpsilon","sign","fromArray","geodeticSurfaceNormal","wgs84","scratchNormal","scratchK","scratchPosition","scratchHeight","scratchCartesian","Ellipsoid","radii","radiiSquared","radiiToTheFourth","oneOverRadii","oneOverRadiiSquared","minimumRadius","maximumRadius","centerToleranceSquared","_MathUtils","squaredXOverSquaredZ","normal","_cartographic","geodeticSurfaceNormalCartographic","gamma","cartesian","point","scaleToGeodeticSurface","h","asin","vec3.length","_localFrameToFixedFrame","cartographicVectorRadians","cosLatitude","positionX","positionY","positionZ","oneOverRadiiX","oneOverRadiiY","oneOverRadiiZ","squaredNorm","intersection","oneOverRadiiSquaredX","oneOverRadiiSquaredY","oneOverRadiiSquaredZ","gradient","xMultiplier","yMultiplier","zMultiplier","lambda","correction","xMultiplier2","yMultiplier2","zMultiplier2","_scaleToGeodeticSurface","beta","position","DoublyLinkedListNode","item","previous","DoublyLinkedList","head","tail","_length","node","remove","nextNode","_insert","oldNodeNext","defined","TilesetCache","_list","_sentinel","_trimTiles","touch","tile","_cacheNode","tileset","addCallback","unloadTile","unloadCallback","unloadTiles","trimTiles","list","maximumMemoryUsageInBytes","maximumMemoryUsage","sentinel","gpuMemoryUsageInBytes","trim","INTERSECTION","OUTSIDE","INTERSECTING","INSIDE","AxisAlignedBoundingBox","minimum","maximum","halfDiagonal","plane","distanceSquaredTo","d","BoundingSphere","radius","fromCenterRadius","corner","oppositeCorner","boundingSphere","leftCenter","leftRadius","rightCenter","rightRadius","toRightCenter","centerSeparation","halfDistanceBetweenTangentPoints","distanceToPlane","_transform","mat","mat4.getScaling","scratchOffset","scratchVectorU","scratchVectorV","scratchVectorW","scratchCorner","scratchToCenter","fromOrientedBoundingBoxScratchU","fromOrientedBoundingBoxScratchV","fromOrientedBoundingBoxScratchW","MATRIX3","OrientedBoundingBox","halfAxes","halfSize","quaternionObject","directionsMatrix","fromQuaternion","u","getColumn","cornerVector","normalX","normalY","normalZ","radEffective","uHalf","vHalf","wHalf","direction","minDist","POSITIVE_INFINITY","maxDist","NEGATIVE_INFINITY","toCenter","xAxis","yAxis","zAxis","normXAxis","normYAxis","normZAxis","fromMatrix3","Plane","fromNormalDistance","fromPointNormal","pointDistance","getPointDistance","scaledNormal","_createForOfIteratorHelper","allowArrayLike","it","F","normalCompletion","didErr","_e2","return","faces","scratchPlaneCenter","scratchPlaneNormal","CullingVolume","planes","every","_step","planeIndex","_iterator","faceNormal","plane0","plane1","plane0Center","plane1Center","negatedFaceNormal","negate","boundingVolume","_step2","intersect","_iterator2","intersectPlane","parentPlaneMask","MASK_OUTSIDE","MASK_INSIDE","mask","flag","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","defineProperties","scratchPlaneUpVector","scratchPlaneRightVector","scratchPlaneNearCenter","scratchPlaneFarCenter","PerspectiveOffCenterFrustum","_left","_right","_top","_bottom","_near","_far","_cullingVolume","_perspectiveMatrix","_infinitePerspective","other","nearCenter","multiplyByScalar","farCenter","drawingBufferWidth","drawingBufferHeight","update","inverseNear","tanTheta","pixelHeight","pixelWidth","frustum","PerspectiveFrustum","xOffset","yOffset","_offCenterFrustum","_fov","_fovy","_sseDenominator","aspectRatio","_aspectRatio","_xOffset","_yOffset","val","computeCullingVolume","getPixelDimensions","projectionMatrix","infiniteProjectionMatrix","atan","cullingVolume","getFrameState","viewport","frameNumber","cameraDirection","cameraUp","metersPerUnit","distanceScales","viewportCenterCartographic","viewportCenterCartesian","WGS84","cartographicToCartesian","enuToFixedTransform","eastNorthUpToFixedFrame","cameraPositionCartographic","unprojectPosition","cameraPosition","cameraPositionCartesian","cameraDirectionCartesian","cameraUpCartesian","frustumPlanes","getFrustumPlanes","dir","distanceToCenter","cartographicPos","cartesianPos","commonSpacePlanesToWGS84","camera","sseDenominator","getZoomFromBoundingVolume","width","obbSize","axeY","axeZ","farthestVertex","getObbSize","log2","TILE_CONTENT_STATE","TILE_REFINEMENT","TILE_TYPE","TILESET_TYPE","LOD_METRIC_TYPE","TILE3D_OPTIMIZATION_HINT","scratchScale","scratchNorthWest","scratchSouthEast","createBoundingVolume","boundingVolumeHeader","box","transformByQuaternion","createBox","region","minHeight","maxHeight","northWest","southEast","centerInCartesian","addVectors","subVectors","createSphere","sphere","uniformScale","getDynamicScreenSpaceError","distanceToCamera","dynamicScreenSpaceError","dynamicScreenSpaceErrorComputedDensity","density","dynamicScreenSpaceErrorFactor","exp","fog","qualityFactor","projectVertexToSphere","azim","incl","radCosInc","getDistanceFromLatLon","observer","observerLon","observerLat","observerZ","centerLon","centerLat","centerZ","projectedCenter","projectedObserver","dx","dy","dz","getI3ScreenSize","frameState","mbsLat","header","mbs","mbsCenter","mbsRNormalized","screenSizeFactor","pixelProjectionMatrix","tanOfHalfVFAngle","calculateScreenSizeFactor","ManagedArray","_array","_map","index","element","peek","pop","reserve","resize","find","loadSiblings","skipLevelOfDetail","maximumScreenSpaceError","updateTransforms","onTraversalEnd","viewportTraversersMap","basePath","TilesetTraverser","_traversalStack","_emptyTraversalStack","_frameNumber","root","selectedTiles","requestedTiles","emptyTiles","traverse","updateTile","executeTraversal","stack","_selectionDepth","shouldRefine","canTraverse","updateChildTiles","updateAndPushChildren","hasRenderContent","parent","parentRefines","_shouldRefine","stoppedRefining","refine","loadTile","selectTile","touchTile","children","child","depth","compareDistanceToCamera","checkRefines","hasVisibleChild","refines","isVisibleAndInRequestVolume","childRefines","_inRequestVolume","contentAvailable","executeEmptyTraversal","updateTileVisibility","shouldSelectTile","_selectedFrame","shouldLoadTile","_requestedFrame","_priority","_getPriority","_touchedFrame","useParentMetric","ignoreVisibility","hasChildren","hasTilesetContent","contentExpired","hasUnloadedContent","screenSpaceError","_screenSpaceError","getScreenSpaceError","viewportIds","updateVisibility","_distanceToCamera","anyChildrenVisible","anyVisible","allDescendantsLoaded","TileHeader","parentHeader","extendedId","_getRefine","contentUrl","lodMetricType","lodMetricValue","content","contentState","hasEmptyContent","userData","_visitedFrame","traverser","_centerZDepth","_visible","_stackLength","_initialTransform","_initializeLodMetric","_initializeTransforms","_initializeBoundingVolumes","_initializeContent","_initializeRenderingState","_lodJudge","_expireDate","_expiredContent","selected","isVisible","contentReady","contentFailed","contentUnloaded","useParentLodMetric","parentLodMetricValue","viewDistanceScale","getTiles3DScreenSpaceError","_traverser","maySkipTile","rootScreenSpaceError","loadContent","requestToken","_requestScheduler","getTileUrl","loadOptions","isTileset","_getLoaderSpecificOptions","contentLoader","_isTileset","_initializeTileHeaders","_onContentLoaded","unloadContent","parentVisibilityPlaneMask","_visibilityPlaneMask","MASK_INDETERMINATE","parentTransform","computedTransform","modelMatrix","_updateTransform","distanceToTile","visibility","insideViewerRequestVolume","computeVisibilityWithPlaneMask","contentVisibility","cameraSpaceZDepth","viewerRequestVolume","_viewerRequestVolume","updateExpiration","lessThan","extras","tileHeader","parentInitialTransform","_contentBoundingVolume","_updateBoundingVolume","_tileset","_tile","level","disableSkipLevelOfDetail","loaderId","i3s","isTileHeader","assetGltfUpAxis","asset","gltfUpAxis","Tileset3DTraverser","super","firstChild","meetsScreenSpaceErrorEarly","useOptimization","_optimChildrenWithinParent","STATUS","I3STileManager","_statusMap","callback","catch","I3STilesetTraverser","_tileManager","metersPerPixel","mbsLon","mbsZ","mbsR","viewportCenter","mbsLatProjected","mbsLonProjected","diagonalInMeters","visibleHeight","visibleWidth","screenSize","lodJudge","childTiles","childTile","_loadTile","nodePages","nodePagesTile","formTileFromNodePages","_onTileLoad","nodeId","nodeUrl","description","onTileLoad","onTileUnload","onTileError","loadTiles","attributions","Tileset3D","path.dirname","roots","cartographicCenter","cartesianCenter","zoom","traverseCounter","geometricError","_initializeTraverser","_pendingCount","_tiles","_emptyTiles","_requestedTiles","frameStateData","lastUpdatedVieports","_queryParams","_queryParamsString","_extensionsUsed","credits","_initializeTileSet","_destroy","isLoaded","tiles","queryParams","queryParamStrings","join","getQueryParamString","setOptions","tilePath","hasExtension","extensionName","viewports","viewportsToTraverse","_needTraverse","viewportId","traverserId","_onTraversalEnd","currentFrameStateData","_updateTiles","frameStateKey","frameStateDataValue","_loadTiles","_unloadTiles","_updateStats","_tilesChanged","oldSelectedTiles","set1","set2","changed","_unloadTile","tilesRenderable","pointsRenderable","pointCount","tilesetJson","_initializeCesiumTileset","_initializeI3STileset","_calculateViewProps","cartesianToCartographic","parentTileHeader","rootTile","Tile3D","incrementCount","childHeader","TraverserClass","I3SetTraverser","_destroyTileHeaders","parentTile","_destroySubtree","loaded","_onStartTileLoading","_onTileLoadError","_onEndTileLoading","rtcCenter","rotationY","rotationX","isQuantized","quantizedVolumeOffset","quantizedVolumeScale","cartesianModelMatrix","cartographicOrigin","toFixedFrameMatrix","invert","cartographicModelMatrix","calculateTransformProps","_addTileToCache","decrementCount","_updateCacheStats","_destroyTile","tilesetVersion","properties","extensionsUsed","token","TILE3D_TYPE","getStringFromArrayBuffer","textDecoder","Schema","fields","usedNames","field","checkNames","compareTo","select","columnNames","nameMap","selectedFields","selectAt","columnIndices","assign","schemaOrFields","otherSchema","mergeMaps","fieldMap","mergedFields","m1","m2","Field","nullable","typeId","Type","_Symbol$toStringTag","_Symbol$toStringTag2","_Symbol$toStringTag7","DataType","isNull","Null","isInt","Int","isFloat","Float","isBinary","Binary","isUtf8","Utf8","isBool","Bool","isDecimal","Decimal","isDate","isTime","Time","isTimestamp","Timestamp","isInterval","Interval","isList","List","isStruct","Struct","isUnion","Union","isFixedSizeBinary","FixedSizeBinary","isFixedSizeList","FixedSizeList","isMap","isDictionary","Dictionary","NONE","toStringTag","isSigned","bitWidth","Int8","Int16","Int32","Uint8","Uint16","Uint32","Precision","Float32","Float64","listSize","valueType","valueField","getArrowFieldFromAttribute","attribute","loaderData","metadataMap","makeMetadata","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float64Array","getArrowTypeFromTypedArray","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","DracoParser","draco","decoder","Decoder","metadataQuerier","MetadataQuerier","DecoderBuffer","Init","_disableAttributeTransforms","geometry_type","GetEncodedGeometryType","dracoGeometry","TRIANGULAR_MESH","Mesh","PointCloud","dracoStatus","DecodeBufferToMesh","POINT_CLOUD","DecodeBufferToPointCloud","ptr","error_msg","_getDracoLoaderData","geometry","_getMeshData","boundingBox","attributes","minX","minY","minZ","maxX","maxY","maxZ","positions","getMeshBoundingBox","schema","indices","namedLoaderDataAttributes","dracoAttribute","transformAttributesLoaderData","indicesField","makeSchemaFromAttributes","vertexCount","num_points","_getTopLevelMetadata","_getDracoAttributes","num_attributes","num_faces","dracoAttributes","attributeId","GetAttribute","_getAttributeMetadata","unique_id","attribute_type","data_type","num_components","byte_offset","byte_stride","normalized","quantization","_getQuantizationTransform","quantization_transform","octahedron","_getOctahedronTransform","octahedron_transform","_getMeshAttributes","topology","_getTriangleStripIndices","_getTriangleListIndices","loaderAttribute","_deduceAttributeName","_getAttributeValues","byteStride","numIndices","_malloc","GetTrianglesUInt32Array","HEAPF32","_free","dracoArray","DracoInt32Array","GetTriangleStripsFromMesh","numValues","intArray","GetValue","getUint32Array","TypedArrayCtor","numComponents","BYTES_PER_ELEMENT","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","DT_INVALID","getDracoDataType","GetAttributeDataArrayForAllPoints","uniqueId","attributeUniqueId","entries","extraAttributes","thisAttributeType","dracoAttributeConstant","entryName","attributeNameEntry","dracoMetadata","GetMetadata","_getDracoMetadata","GetAttributeMetadata","numEntries","NumEntries","entryIndex","GetEntryName","_getDracoMetadataField","GetIntEntryArray","getInt32Array","int","GetIntEntry","GetStringEntry","double","GetDoubleEntry","quantizedAttributes","octahedronAttributes","skipAttributes","dracoAttributeName","SkipAttributeTransform","AttributeQuantizationTransform","InitFromAttribute","quantization_bits","range","min_values","min_value","DRACO_JS_DECODER_URL","DRACO_WASM_WRAPPER_URL","DRACO_WASM_DECODER_URL","loadDecoderPromise","loadDracoDecoderModule","draco3d","createDecoderModule","DracoDecoderModule","wasmBinary","decoderType","all","globalThis","onModuleLoaded","initializeDracoDecoder","loadDracoDecoder","DracoLoader","WebAssembly","libraryPath","dracoParser","GL_TYPE","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","DOUBLE","GL","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","GL_TYPE_TO_ARRAY_TYPE","NAME_TO_GL_TYPE","GLType","fromTypedArray","arrayOrType","glType","fromName","getArrayType","clamped","UNSIGNED_SHORT_5_6_5","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","ArrayType","getByteSize","createTypedArray","decodeRGB565","rgb565","r5","g6","b5","fromSNorm","rangeMaximum","clamp","signNotZero","octDecodeInRange","rangeMax","oldVX","Tile3DFeatureTable","featureTableJson","featureTableBinary","featuresLength","_cachedTypedArrays","getExtension","hasProperty","propertyName","getGlobalProperty","componentType","componentLength","jsonValue","_getTypedArrayFromBinary","getPropertyArray","_getTypedArrayFromArray","getProperty","featureId","cachedTypedArrays","COMPONENTS_PER_ATTRIBUTE","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","UNPACKER","PACKER","initializeHierarchy","batchTable","jsonHeader","binaryBody","hierarchy","legacyHierarchy","HIERARCHY","hierarchyJson","classId","binaryAccessor","instancesLength","classes","classIds","parentCounts","parentIds","parentIdsLength","defaultValue","AttributeType","getBinaryAccessor","createArrayBufferView","parentIndexes","classesLength","classInstancesLength","instances","binaryProperties","getBinaryProperties","combine","classCounts","classIndexes","validateInstance","validateHierarchy","initializeHierarchyValues","traverseHierarchy","instanceIndex","endConditionCallback","visited","scratchVisited","visitedMarker","marker","scratchStack","parentCount","parentIndex","parentId","traverseHierarchyMultipleParents","hasParent","traverseHierarchySingleParent","IGNORED_PROPERTY_FIELDS","Tile3DBatchTableParser","featureCount","_this$json","_extensions","_properties","_binaryProperties","_initializeBinaryProperties","_hierarchy","memorySizeInBytes","isClass","batchId","className","_checkBatchId","isExactClass","getExactClassName","_hasPropertyInHierarchy","getPropertyNames","results","propertyNames","_getPropertyNamesInHierarchy","binaryProperty","_getBinaryProperty","propertyValues","hierarchyProperty","_getHierarchyProperty","setProperty","_setBinaryProperty","_setHierarchyProperty","unpack","pack","property","_initializeBinaryProperty","tile3DAccessor","accessor","unpacker","packer","createTypedArrayFromAccessor","componentCount","hasOwnProperty","instanceClass","indexInClass","parse3DTileHeaderSync","view","getUint32","parse3DTileTablesHeaderSync","batchLength","featureTableJsonByteLength","featureTableBinaryByteLength","batchTableJsonByteLength","batchTableBinaryByteLength","SIZEOF_UINT32","parse3DTileTablesSync","BATCH_LENGTH","featureTableString","parse3DTileFeatureTable","batchTableString","batchTableJson","batchTableBinary","parse3DTileBatchTable","normalize3DTileColorAttribute","colors","batchIds","isRGB565","colorArray","Uint8ClampedArray","color","normalize3DTilePositionAttribute","decodeQuantizedPositions","decodedArray","quantizedRange","parsePointCloud3DTile","normals","isTranslucent","isOctEncoded16P","initializeTile","featureTable","pointsLength","batchFeatureLength","Tile3DBatchTable","parseBatchIds","parsePointCloudTables","dracoBuffer","dracoFeatureTableProperties","dracoBatchTableProperties","batchTableDraco","featureTableDraco","dracoByteOffset","dracoByteLength","hasPositions","hasColors","RGB","RGBA","hasNormals","hasBatchIds","BATCH_ID","dracoData","featureTableProperties","batchTableProperties","dequantizeInShader","dracoOptions","decodedPositions","decodedColors","COLOR_0","decodedNormals","decodedBatchIds","isQuantizedDraco","isOctEncodedDraco","minValues","quantizationBits","octEncodedRange","batchTableAttributes","loadDraco","parseDraco","parsePositions","constantRGBA","parseColors","normalize3DTileNormalAttribute","parseNormals","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","image","format","getImageTypeOrNull","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlob","parseToImage","blobOrDataUrl","xmlText","getBlobOrSVGDataUrl","webkitURL","objectUrl","src","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","imagebitmap","isEmptyObject","createImageBitmap","safeCreateImageBitmap","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getUint16","tableMarkers","sofMarkers","getJpegMarkers","getJpegMetadata","getGifMetadata","getBmpMetadata","ImageLoader","imageType","getDefaultImageType","isImageTypeSupported","getLoadableImageType","parseToNodeImage","canvas","getContext","drawImage","getImageData","resolveUrl","baseUrl","TYPES","ARRAY_CONSTRUCTOR_TO_WEBGL_CONSTANT","ARRAY_TO_COMPONENT_TYPE","ATTRIBUTE_TYPE_TO_COMPONENTS","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","getAccessorArrayTypeAndLength","bufferView","components","bytesPerComponent","DEFAULT_GLTF_JSON","buffers","GLTFScenegraph","gltf","sourceBuffers","getApplicationData","getExtraData","isExtension","getUsedExtensions","getRequiredExtension","getRequiredExtensions","extensionsRequired","getObjectExtension","getScene","getObject","getNode","getSkin","getMesh","getMaterial","getAccessor","getTexture","getSampler","getImage","getBufferView","getBuffer","getTypedArrayForBufferView","bufferIndex","binChunk","getTypedArrayForAccessor","getTypedArrayForImageData","addApplicationData","addExtraData","addObjectExtension","registerUsedExtension","setObjectExtension","removeObjectExtension","addExtension","extensionData","addRequiredExtension","registerRequiredExtension","ext","removeExtension","_removeStringFromArray","setDefaultScene","sceneIndex","scene","addScene","nodeIndices","scenes","nodes","addNode","meshIndex","matrix","nodeData","mesh","addMesh","material","glTFMesh","primitives","_addAttributes","indicesAccessor","_addIndices","meshes","addPointCloud","addImage","imageData","mimeTypeOpt","glTFImage","addBufferView","images","glTFBufferView","bufferViews","addAccessor","bufferViewIndex","glTFAccessor","accessors","addBinaryBuffer","sourceBuffer","minMax","_getAccessorMinMax","accessorDefaults","addTexture","texture","imageIndex","glTFTexture","textures","addMaterial","pbrMaterialInfo","materials","createBinaryChunk","_this$json$buffers","totalByteLength","targetArray","dstByteOffset","found","attributeKey","attributeData","attrName","_getGltfAttributeName","initValues","componentIndex","getGLTFAccessor","convertTypedArrays","toTypedArray","getAccessorData","decompressPrimitive","scenegraph","primitive","dracoExtension","bufferCopy","decodedData","decodedAttributes","getGLTFAccessors","decodedAttribute","accessorIndex","checkPrimitive","compressMesh","DracoWriter","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","KHR_draco_mesh_compression","resolveValues","technique","gltfScenegraph","uniforms","uniform","EXTENSIONS","gltfData","_options$gltf","decompressMeshes","Scenegraph","promises","makeMeshPrimitiveIterator","KHR_materials_unlit","unlit","KHR_lights_punctual","lights","nodeExtension","light","KHR_techniques_webgl","techniques","techniquesExtension","programs","shaders","shader","code","program","fragmentShader","vertexShader","resolveTechniques","materialExtension","GLTF_ARRAYS","animations","samplers","skins","GLTF_KEYS","sampler","skin","GLTFV1Normalizer","idToIndexMap","_addAsset","_convertTopLevelObjectsToArrays","KHR_binary_glTF.decode","_convertObjectIdsToArrayIndices","_updateObjects","_updateMaterial","arrayName","_convertTopLevelObjectToArray","mapName","objectMap","_convertIdsToIndices","_convertIdToIndex","_convertTextureIds","_convertMeshIds","_convertNodeIds","_convertSceneIds","topLevelArrayName","pbrMetallicRoughness","baseColorFactor","metallicFactor","roughnessFactor","textureId","tex","textureIndex","findIndex","baseColorTexture","COMPONENTS","BYTES","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","postProcess","_resolveTree","bufView","_resolveBufferView","_resolveImage","_resolveSampler","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","_resolveSkin","_resolveScene","_get","getCamera","accum","inverseBindMatrices","normalTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","emissiveFactor","mr","metallicRoughnessTexture","bytesPerElement","cutBufffer","parameters","glEnum","_enumSamplerParameter","preloadedImage","_resolveCamera","orthographic","MAGIC_glTF","LE","parseGLBSync","glb","hasBinChunk","binChunks","GLB_FILE_HEADER_SIZE","contentFormat","parseJSONChunk","parseBINChunk","parseGLBV1","chunkFormat","strict","parseGLBChunksSync","parseGLBV2","jsonChunk","jsonText","parseGLTF","arrayBufferOrString","_options$gltf2","_options$gltf3","_options$gltf4","magic1","isGLB","_glb","parseGLTFContainerSync","normalizeGLTFV1","loadBuffers","loadImages","loadImage","excludes","excludeExtensions","decodeExtensions","postProcessGLTF","parsedImage","GLTFLoader","fetchImages","createImages","decompress","GLTF_FORMAT","parse3DTileGLTFViewSync","rotateYtoZ","gltfByteLength","gltfArrayBuffer","gltfByteOffset","extractGLTF","gltfFormat","tile3DOptions","gltfUrlBytes","gltfUrl","extractGLTFBufferOrURL","loadGLTF","parseBatchedModel3DTile","_tile$gltf","parseBatchedModel","CESIUM_RTC","parseInstancedModel3DTile","eastNorthUp","_batchTable","collectionOptions","instancePosition","instanceRotation","instanceQuaternion","instanceScale","instanceTranslationRotationScale","instanceTransform","scratch1","scratch2","MAX_UNSIGNED_SHORT","translation","normalUp","normalRight","hasCustomOrientation","octNormalUp","octNormalRight","getRotationMatrix3","rotation","nonUniformScale","rotationMatrix","extractInstancedAttributes","parseInstancedModel","parse3DTile","tilesLength","subtile","parseComposite3DTile","normalizeTileData","contentUri","transformMatrix","fileExtension","split","getTileType","getRefine","Tiles3DLoader","getBaseUri","normalizeTileHeaders","parseTileset","featureIds","parseTile","CESIUM_ION_URL","getIonTilesetMetadata","accessToken","assetId","assets","Authorization","getIonAssets","items","ionAssetMetadata","tilesetInfo","getIonAssetMetadata","CesiumIonLoader","preload","matched","generateGradientTexture","rect","ctxGradient","createLinearGradient","addColorStop","getHexString","fillStyle","CanvasTexture","needsUpdate","LinearFilter","RepeatWrapping","repeat","getCameraFrustum","updateMatrix","updateMatrixWorld","matrixWorldInverse","matrixWorld","Frustum","setFromProjectionMatrix","multiplyMatrices","loadersBoundingBoxToMesh","redColor","boxColor","Color","boxGeometry","BoxGeometry","boxRotate","getMatrix4FromHalfAxes","applyMatrix4","edges","EdgesGeometry","dispPlane","LineSegments","LineBasicMaterial","Loader","manager","dracoLoader","ddsLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFMeshoptCompression","onLoad","onProgress","resourcePath","scope","path","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","unregister","plugins","decodeText","BINARY_EXTENSION_HEADER_MAGIC","KHR_BINARY_GLTF","GLTFBinaryExtension","GLTFParser","crossOrigin","fileLoader","plugin","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","refs","uses","_markDefs","nodeDefs","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightNode","lightDef","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","angle","penumbra","decay","intensity","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","assignTexture","materialIndex","MeshPhysicalMaterial","extendMaterialParams","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","transmissionFactor","transmission","transmissionTexture","loadTexture","textureDef","loadTextureImage","getHandler","textureLoader","detectSupport","loadBufferView","extensionDef","getDependency","supported","ready","res","stride","decodeGltfBuffer","BINARY_EXTENSION_CHUNK_TYPES","headerView","chunkView","chunkIndex","chunkType","contentArray","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","uniformName","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","resultBuffer","Interpolant","decodePrimitive","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","WEBGL_COMPONENT_TYPES","decodeDracoFile","extendTexture","texCoord","copySampleValue_","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","WEBGL_CONSTANTS","WEBGL_FILTERS","NearestFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","WEBGL_TYPE_SIZES","TANGENT","TEXCOORD_0","TEXCOORD_1","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","updateMorphTargets","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","navigator","userAgent","ImageBitmapLoader","TextureLoader","setCrossOrigin","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","setAttribute","gltfAttributeName","setIndex","Box3","targets","maxDisplacement","setX","setY","setZ","expandByVector","Sphere","getCenter","distanceTo","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","_invokeAll","getDependencies","dependencies","cameras","skinDefs","meshDefs","skinIndex","skinLength","joints","isBone","isSkinnedMesh","ref","_invokeOne","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferDef","bufferViewDef","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","itemBytes","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureExtensions","textureLoad","sourceURI","isObjectURL","hasAlpha","colorType","isImageBitmapLoader","premultiplyAlpha","imageBitmap","flipY","RGBFormat","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialType","materialExtensions","sgExtension","kmuExtension","doubleSided","side","DoubleSide","alphaMode","transparent","depthWrite","alphaTest","alphaCutoff","strength","encoding","sRGBEncoding","originalName","PropertyBinding","sanitizeNodeName","loadGeometries","createDracoPrimitive","geometryPromise","cached","BufferGeometry","depthTest","FrontSide","geometries","SkinnedMesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","Line","LineLoop","Points","group","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","isMesh","outputArray","scaled","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","nodeName","Bone","Object3D","buildNodeHierachy","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","Skeleton","sceneDef","nodeIds","Gradients","SPECTRAL","PLASMA","YELLOW_GREEN","VIRIDIS","INFERNO","GRAYSCALE","TURBO","RAINBOW","CONTOUR","PointCloudFS","PointCloudVS","PointCloudColoring","Shading","gradientTexture","Util.generateGradientTexture","grayscaleTexture","initialTransform","updateInterval","shading","FlatTexture","pointCloudColoring","White","wireframe","basisTranscoderPath","dracoDecoderPath","computeNormals","shaderCallback","loadersGlGltf","Loader3DTiles","UPDATE_INTERVAL","loadersGLOptions","cesiumIONToken","renderMap","boxMap","unloadQueue","tileBoxes","visible","threeMat","tileTrasnform","childTransform","resetTransform","premultiply","MathGLMatrix4","pointcloudUniforms","pointSize","grayscale","rootCenter","rootNormal","coloring","hideGround","elevationRange","maxIntensity","intensityContrast","cameraReference","rendererReference","gltfLoader","RDGLTFLoader","KTX2Loader","renderer","setTranscoderPath","DRACOLoader","setDecoderPath","setWorkerLimit","unlitMaterial","ShaderMaterial","tileOptions","tileContent","rtc_center","points","intensities","classifications","classification","rgb","rgba","Float32BufferAttribute","pointcloudMaterial","Uint8BufferAttribute","makeTranslation","createPointNodes","makeRotationAxis","originalMap","ShadedNoTexture","onBeforeRender","computeVertexNormals","createGLTFNodes","Util.loadersBoundingBoxToMesh","tilesetUpdate","disposeFlag","setFromMatrixPosition","hardwareConcurrency","timer","lastCameraTransform","lastCameraAspect","lastCameraPosition","loadersFrustum","Util.getCameraFrustum","constant","rendererSize","getSize","disposeNode","model","runtime","getTileset","getStats","showTiles","setWireframe","setDebug","setShading","getTileBoxes","setViewDistanceScale","setHideGround","enabled","setPointCloudColoring","selection","setElevationRange","setMaxIntensity","setIntensityContrast","contrast","getLatLongHeightFromPosition","cartographicPosition","lat","long","getPositionFromLatLongHeight","coord","cartesianPosition","loadersPlane","planeGeometry","PlaneGeometry","coplanarPoint","projectPointOntoPlane","focalPoint","arrowHelper","ArrowHelper","Util.loadersPlaneToMesh","getTransform","setTransform","decompose","dt","cameraChanged","getWorldPosition","dispose","isMaterial"],"mappings":"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"}